var Uf=Object.defineProperty;var Df=(r,e,t)=>e in r?Uf(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var It=(r,e,t)=>Df(r,typeof e!="symbol"?e+"":e,t);import{G as tc,H as Hf,d as sl,aj as Ff,ak as zf,c as $f,b as bi,o as qn,h as Kf,j as Hi,y as Fi,k as Fn,ag as nc,O as jr,al as qf,m as Vf,e as Ko,E as Gf,P as Wf,S as rc,M as jf,am as ye,an as Yf,ao as Zf,R as si,ap as ji,aq as ol,ar as al,as as Br,at as pa,au as Xf,av as zn,ae as zr}from"./CG-vOezx.js";import{_ as Jf}from"./B4QDHz7E.js";const Qf={slots:{base:"font-medium inline-flex items-center",label:"truncate",leadingIcon:"shrink-0",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailingIcon:"shrink-0"},variants:{buttonGroup:{horizontal:"not-only:first:rounded-e-none not-only:last:rounded-s-none not-last:not-first:rounded-none",vertical:"not-only:first:rounded-b-none not-only:last:rounded-t-none not-last:not-first:rounded-none"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},variant:{solid:"",outline:"",soft:"",subtle:""},size:{xs:{base:"text-[8px]/3 px-1 py-0.5 gap-1 rounded-[calc(var(--ui-radius))]",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},sm:{base:"text-[10px]/3 px-1.5 py-1 gap-1 rounded-[calc(var(--ui-radius))]",leadingIcon:"size-3",leadingAvatarSize:"3xs",trailingIcon:"size-3"},md:{base:"text-xs px-2 py-1 gap-1 rounded-[calc(var(--ui-radius)*1.5)]",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},lg:{base:"text-sm px-2 py-1 gap-1.5 rounded-[calc(var(--ui-radius)*1.5)]",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"text-base px-2.5 py-1 gap-1.5 rounded-[calc(var(--ui-radius)*1.5)]",leadingIcon:"size-6",leadingAvatarSize:"2xs",trailingIcon:"size-6"}}},compoundVariants:[{color:"primary",variant:"solid",class:"bg-(--ui-primary) text-(--ui-bg)"},{color:"secondary",variant:"solid",class:"bg-(--ui-secondary) text-(--ui-bg)"},{color:"success",variant:"solid",class:"bg-(--ui-success) text-(--ui-bg)"},{color:"info",variant:"solid",class:"bg-(--ui-info) text-(--ui-bg)"},{color:"warning",variant:"solid",class:"bg-(--ui-warning) text-(--ui-bg)"},{color:"error",variant:"solid",class:"bg-(--ui-error) text-(--ui-bg)"},{color:"primary",variant:"outline",class:"text-(--ui-primary) ring ring-inset ring-(--ui-primary)/50"},{color:"secondary",variant:"outline",class:"text-(--ui-secondary) ring ring-inset ring-(--ui-secondary)/50"},{color:"success",variant:"outline",class:"text-(--ui-success) ring ring-inset ring-(--ui-success)/50"},{color:"info",variant:"outline",class:"text-(--ui-info) ring ring-inset ring-(--ui-info)/50"},{color:"warning",variant:"outline",class:"text-(--ui-warning) ring ring-inset ring-(--ui-warning)/50"},{color:"error",variant:"outline",class:"text-(--ui-error) ring ring-inset ring-(--ui-error)/50"},{color:"primary",variant:"soft",class:"bg-(--ui-primary)/10 text-(--ui-primary)"},{color:"secondary",variant:"soft",class:"bg-(--ui-secondary)/10 text-(--ui-secondary)"},{color:"success",variant:"soft",class:"bg-(--ui-success)/10 text-(--ui-success)"},{color:"info",variant:"soft",class:"bg-(--ui-info)/10 text-(--ui-info)"},{color:"warning",variant:"soft",class:"bg-(--ui-warning)/10 text-(--ui-warning)"},{color:"error",variant:"soft",class:"bg-(--ui-error)/10 text-(--ui-error)"},{color:"primary",variant:"subtle",class:"bg-(--ui-primary)/10 text-(--ui-primary) ring ring-inset ring-(--ui-primary)/25"},{color:"secondary",variant:"subtle",class:"bg-(--ui-secondary)/10 text-(--ui-secondary) ring ring-inset ring-(--ui-secondary)/25"},{color:"success",variant:"subtle",class:"bg-(--ui-success)/10 text-(--ui-success) ring ring-inset ring-(--ui-success)/25"},{color:"info",variant:"subtle",class:"bg-(--ui-info)/10 text-(--ui-info) ring ring-inset ring-(--ui-info)/25"},{color:"warning",variant:"subtle",class:"bg-(--ui-warning)/10 text-(--ui-warning) ring ring-inset ring-(--ui-warning)/25"},{color:"error",variant:"subtle",class:"bg-(--ui-error)/10 text-(--ui-error) ring ring-inset ring-(--ui-error)/25"},{color:"neutral",variant:"solid",class:"text-(--ui-bg) bg-(--ui-bg-inverted)"},{color:"neutral",variant:"outline",class:"ring ring-inset ring-(--ui-border-accented) text-(--ui-text) bg-(--ui-bg)"},{color:"neutral",variant:"soft",class:"text-(--ui-text) bg-(--ui-bg-elevated)"},{color:"neutral",variant:"subtle",class:"ring ring-inset ring-(--ui-border-accented) text-(--ui-text) bg-(--ui-bg-elevated)"}],defaultVariants:{color:"primary",variant:"solid",size:"md"}},ep=Hf;var il;const tp=tc({extend:tc(Qf),...((il=ep.ui)==null?void 0:il.badge)||{}}),$b=sl({__name:"Badge",props:{as:{default:"span"},label:{},color:{},variant:{},size:{},class:{},ui:{},icon:{},avatar:{},leading:{type:Boolean},leadingIcon:{},trailing:{type:Boolean},trailingIcon:{}},setup(r){const e=r,{orientation:t,size:n}=Ff(e),{isLeading:s,isTrailing:i,leadingIconName:o,trailingIconName:u}=zf(e),f=$f(()=>tp({color:e.color,variant:e.variant,size:n.value||e.size,buttonGroup:t.value}));return(y,g)=>{var S;return qn(),bi(Fn(Wf),{as:y.as,class:jr(f.value.base({class:[e.class,(S=e.ui)==null?void 0:S.base]}))},{default:Kf(()=>[Hi(y.$slots,"leading",{},()=>{var I,R,T;return[Fn(s)&&Fn(o)?(qn(),bi(nc,{key:0,name:Fn(o),class:jr(f.value.leadingIcon({class:(I=e.ui)==null?void 0:I.leadingIcon}))},null,8,["name","class"])):y.avatar?(qn(),bi(qf,Vf({key:1,size:((R=e.ui)==null?void 0:R.leadingAvatarSize)||f.value.leadingAvatarSize()},y.avatar,{class:f.value.leadingAvatar({class:(T=e.ui)==null?void 0:T.leadingAvatar})}),null,16,["size","class"])):Fi("",!0)]}),Hi(y.$slots,"default",{},()=>{var I;return[y.label?(qn(),Ko("span",{key:0,class:jr(f.value.label({class:(I=e.ui)==null?void 0:I.label}))},Gf(y.label),3)):Fi("",!0)]}),Hi(y.$slots,"trailing",{},()=>{var I;return[Fn(i)&&Fn(u)?(qn(),bi(nc,{key:0,name:Fn(u),class:jr(f.value.trailingIcon({class:(I=e.ui)==null?void 0:I.trailingIcon}))},null,8,["name","class"])):Fi("",!0)]})]),_:3},8,["as","class"])}}}),np={class:"flex space-x-2 items-start w-1/2 mx-auto justify-center md:items-center py-2 border-b border-gray-200"},rp={key:0,class:"flex items-center space-x-3"},Kb=sl({__name:"AppStateCard",props:{loading:{type:Boolean,default:!1},error:{type:Boolean,default:!1}},setup(r){return(e,t)=>{const n=Jf;return qn(),Ko("div",np,[e.loading?(qn(),Ko("div",rp,[jf(n,{size:2}),t[0]||(t[0]=rc("span",null,"Loading account",-1))])):Fi("",!0),rc("h3",{class:jr([e.error?"text-red-500":"text-gray-400","text-sm"])},[Hi(e.$slots,"default")],2)])}}}),qb=r=>{if(!r)return"None";const e=60,t=e*60,n=t*24,s=n*30;if(r>=s){const i=Math.round(r/s);return`${i} month${i!==1?"s":""}`}else if(r>=n){const i=Math.round(r/n);return`${i} day${i!==1?"s":""}`}else if(r>=t){const i=Math.round(r/t);return`${i} hour${i!==1?"s":""}`}else{const i=Math.max(1,Math.round(r/e));return`${i} minute${i!==1?"s":""}`}},Vb=r=>new Date(r).toLocaleString("en-US",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit",hour12:!1}),Gb=(r,e=2)=>Intl.NumberFormat("en-us",{style:"decimal",maximumFractionDigits:e}).format(r);var ip=(r=>(r.Closed="Closed",r.SoldOut="Sold Out",r.Upcoming="Upcoming",r.Live="Live",r.Ended="Ended",r))(ip||{});const Wb=(r,e,t,n,s,i)=>r?{status:"Closed",color:"error"}:e===t?{status:"Sold Out",color:"warning"}:n>s?{status:"Upcoming",color:"warning"}:!i||i>s?{status:"Live",color:"success"}:{status:"Ended",color:"error"};var Ri={exports:{}},ic;function sp(){if(ic)return Ri.exports;ic=1;const r=/[\p{Lu}]/u,e=/[\p{Ll}]/u,t=/^[\p{Lu}](?![\p{Lu}])/gu,n=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,i=new RegExp("^"+s.source),o=new RegExp(s.source+n.source,"gu"),u=new RegExp("\\d+"+n.source,"gu"),f=(I,R,T)=>{let x=!1,O=!1,L=!1;for(let F=0;F<I.length;F++){const M=I[F];x&&r.test(M)?(I=I.slice(0,F)+"-"+I.slice(F),x=!1,L=O,O=!0,F++):O&&L&&e.test(M)?(I=I.slice(0,F-1)+"-"+I.slice(F-1),L=O,O=!1,x=!0):(x=R(M)===M&&T(M)!==M,L=O,O=T(M)===M&&R(M)!==M)}return I},y=(I,R)=>(t.lastIndex=0,I.replace(t,T=>R(T))),g=(I,R)=>(o.lastIndex=0,u.lastIndex=0,I.replace(o,(T,x)=>R(x)).replace(u,T=>R(T))),S=(I,R)=>{if(!(typeof I=="string"||Array.isArray(I)))throw new TypeError("Expected the input to be `string | string[]`");if(R={pascalCase:!1,preserveConsecutiveUppercase:!1,...R},Array.isArray(I)?I=I.map(L=>L.trim()).filter(L=>L.length).join("-"):I=I.trim(),I.length===0)return"";const T=R.locale===!1?L=>L.toLowerCase():L=>L.toLocaleLowerCase(R.locale),x=R.locale===!1?L=>L.toUpperCase():L=>L.toLocaleUpperCase(R.locale);return I.length===1?R.pascalCase?x(I):T(I):(I!==T(I)&&(I=f(I,T,x)),I=I.replace(i,""),R.preserveConsecutiveUppercase?I=y(I,T):I=T(I),R.pascalCase&&(I=x(I.charAt(0))+I.slice(1)),g(I,x))};return Ri.exports=S,Ri.exports.default=S,Ri.exports}sp();var $r={},le={},sc;function oc(){if(sc)return le;sc=1;class r{constructor(d,l){if(!Number.isInteger(d))throw new TypeError("span must be an integer");this.span=d,this.property=l}makeDestinationObject(){return{}}decode(d,l){throw new Error("Layout is abstract")}encode(d,l,a){throw new Error("Layout is abstract")}getSpan(d,l){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(d){const l=Object.create(this.constructor.prototype);return Object.assign(l,this),l.property=d,l}fromArray(d){}}le.Layout=r;function e(_,d){return d.property?_+"["+d.property+"]":_}le.nameWithProperty=e;function t(_,d){if(typeof _!="function")throw new TypeError("Class must be constructor");if(_.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(d&&d instanceof r))throw new TypeError("layout must be a Layout");if(d.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");_.layout_=d,d.boundConstructor_=_,d.makeDestinationObject=()=>new _,Object.defineProperty(_.prototype,"encode",{value:function(l,a){return d.encode(this,l,a)},writable:!0}),Object.defineProperty(_,"decode",{value:function(l,a){return d.decode(l,a)},writable:!0})}le.bindConstructorLayout=t;class n extends r{isCount(){throw new Error("ExternalLayout is abstract")}}class s extends n{constructor(d,l){if(d===void 0&&(d=1),!Number.isInteger(d)||0>=d)throw new TypeError("elementSpan must be a (positive) integer");super(-1,l),this.elementSpan=d}isCount(){return!0}decode(d,l){l===void 0&&(l=0);const a=d.length-l;return Math.floor(a/this.elementSpan)}encode(d,l,a){return 0}}class i extends n{constructor(d,l,a){if(!(d instanceof r))throw new TypeError("layout must be a Layout");if(l===void 0)l=0;else if(!Number.isInteger(l))throw new TypeError("offset must be integer or undefined");super(d.span,a||d.property),this.layout=d,this.offset=l}isCount(){return this.layout instanceof o||this.layout instanceof u}decode(d,l){return l===void 0&&(l=0),this.layout.decode(d,l+this.offset)}encode(d,l,a){return a===void 0&&(a=0),this.layout.encode(d,l,a+this.offset)}}class o extends r{constructor(d,l){if(super(d,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,l){return l===void 0&&(l=0),d.readUIntLE(l,this.span)}encode(d,l,a){return a===void 0&&(a=0),l.writeUIntLE(d,a,this.span),this.span}}class u extends r{constructor(d,l){if(super(d,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,l){return l===void 0&&(l=0),d.readUIntBE(l,this.span)}encode(d,l,a){return a===void 0&&(a=0),l.writeUIntBE(d,a,this.span),this.span}}class f extends r{constructor(d,l){if(super(d,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,l){return l===void 0&&(l=0),d.readIntLE(l,this.span)}encode(d,l,a){return a===void 0&&(a=0),l.writeIntLE(d,a,this.span),this.span}}class y extends r{constructor(d,l){if(super(d,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,l){return l===void 0&&(l=0),d.readIntBE(l,this.span)}encode(d,l,a){return a===void 0&&(a=0),l.writeIntBE(d,a,this.span),this.span}}const g=Math.pow(2,32);function S(_){const d=Math.floor(_/g),l=_-d*g;return{hi32:d,lo32:l}}function I(_,d){return _*g+d}class R extends r{constructor(d){super(8,d)}decode(d,l){l===void 0&&(l=0);const a=d.readUInt32LE(l),h=d.readUInt32LE(l+4);return I(h,a)}encode(d,l,a){a===void 0&&(a=0);const h=S(d);return l.writeUInt32LE(h.lo32,a),l.writeUInt32LE(h.hi32,a+4),8}}class T extends r{constructor(d){super(8,d)}decode(d,l){l===void 0&&(l=0);const a=d.readUInt32BE(l),h=d.readUInt32BE(l+4);return I(a,h)}encode(d,l,a){a===void 0&&(a=0);const h=S(d);return l.writeUInt32BE(h.hi32,a),l.writeUInt32BE(h.lo32,a+4),8}}class x extends r{constructor(d){super(8,d)}decode(d,l){l===void 0&&(l=0);const a=d.readUInt32LE(l),h=d.readInt32LE(l+4);return I(h,a)}encode(d,l,a){a===void 0&&(a=0);const h=S(d);return l.writeUInt32LE(h.lo32,a),l.writeInt32LE(h.hi32,a+4),8}}class O extends r{constructor(d){super(8,d)}decode(d,l){l===void 0&&(l=0);const a=d.readInt32BE(l),h=d.readUInt32BE(l+4);return I(a,h)}encode(d,l,a){a===void 0&&(a=0);const h=S(d);return l.writeInt32BE(h.hi32,a),l.writeUInt32BE(h.lo32,a+4),8}}class L extends r{constructor(d){super(4,d)}decode(d,l){return l===void 0&&(l=0),d.readFloatLE(l)}encode(d,l,a){return a===void 0&&(a=0),l.writeFloatLE(d,a),4}}class F extends r{constructor(d){super(4,d)}decode(d,l){return l===void 0&&(l=0),d.readFloatBE(l)}encode(d,l,a){return a===void 0&&(a=0),l.writeFloatBE(d,a),4}}class M extends r{constructor(d){super(8,d)}decode(d,l){return l===void 0&&(l=0),d.readDoubleLE(l)}encode(d,l,a){return a===void 0&&(a=0),l.writeDoubleLE(d,a),8}}class q extends r{constructor(d){super(8,d)}decode(d,l){return l===void 0&&(l=0),d.readDoubleBE(l)}encode(d,l,a){return a===void 0&&(a=0),l.writeDoubleBE(d,a),8}}class G extends r{constructor(d,l,a){if(!(d instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(l instanceof n&&l.isCount()||Number.isInteger(l)&&0<=l))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let h=-1;!(l instanceof n)&&0<d.span&&(h=l*d.span),super(h,a),this.elementLayout=d,this.count=l}getSpan(d,l){if(0<=this.span)return this.span;l===void 0&&(l=0);let a=0,h=this.count;if(h instanceof n&&(h=h.decode(d,l)),0<this.elementLayout.span)a=h*this.elementLayout.span;else{let E=0;for(;E<h;)a+=this.elementLayout.getSpan(d,l+a),++E}return a}decode(d,l){l===void 0&&(l=0);const a=[];let h=0,E=this.count;for(E instanceof n&&(E=E.decode(d,l));h<E;)a.push(this.elementLayout.decode(d,l)),l+=this.elementLayout.getSpan(d,l),h+=1;return a}encode(d,l,a){a===void 0&&(a=0);const h=this.elementLayout,E=d.reduce((C,D)=>C+h.encode(D,l,a+C),0);return this.count instanceof n&&this.count.encode(d.length,l,a),E}}class te extends r{constructor(d,l,a){if(!(Array.isArray(d)&&d.reduce((E,C)=>E&&C instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof l=="boolean"&&a===void 0&&(a=l,l=void 0);for(const E of d)if(0>E.span&&E.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let h=-1;try{h=d.reduce((E,C)=>E+C.getSpan(),0)}catch{}super(h,l),this.fields=d,this.decodePrefixes=!!a}getSpan(d,l){if(0<=this.span)return this.span;l===void 0&&(l=0);let a=0;try{a=this.fields.reduce((h,E)=>{const C=E.getSpan(d,l);return l+=C,h+C},0)}catch{throw new RangeError("indeterminate span")}return a}decode(d,l){l===void 0&&(l=0);const a=this.makeDestinationObject();for(const h of this.fields)if(h.property!==void 0&&(a[h.property]=h.decode(d,l)),l+=h.getSpan(d,l),this.decodePrefixes&&d.length===l)break;return a}encode(d,l,a){a===void 0&&(a=0);const h=a;let E=0,C=0;for(const D of this.fields){let J=D.span;if(C=0<J?J:0,D.property!==void 0){const ie=d[D.property];ie!==void 0&&(C=D.encode(ie,l,a),0>J&&(J=D.getSpan(l,a)))}E=a,a+=J}return E+C-h}fromArray(d){const l=this.makeDestinationObject();for(const a of this.fields)a.property!==void 0&&0<d.length&&(l[a.property]=d.shift());return l}layoutFor(d){if(typeof d!="string")throw new TypeError("property must be string");for(const l of this.fields)if(l.property===d)return l}offsetOf(d){if(typeof d!="string")throw new TypeError("property must be string");let l=0;for(const a of this.fields){if(a.property===d)return l;0>a.span?l=-1:0<=l&&(l+=a.span)}}}class X{constructor(d){this.property=d}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class ee extends X{constructor(d,l){if(!(d instanceof n&&d.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(l||d.property||"variant"),this.layout=d}decode(d,l){return this.layout.decode(d,l)}encode(d,l,a){return this.layout.encode(d,l,a)}}class $ extends r{constructor(d,l,a){const h=d instanceof o||d instanceof u;if(h)d=new ee(new i(d));else if(d instanceof n&&d.isCount())d=new ee(d);else if(!(d instanceof X))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(l===void 0&&(l=null),!(l===null||l instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(l!==null){if(0>l.span)throw new Error("defaultLayout must have constant span");l.property===void 0&&(l=l.replicate("content"))}let E=-1;l&&(E=l.span,0<=E&&h&&(E+=d.layout.span)),super(E,a),this.discriminator=d,this.usesPrefixDiscriminator=h,this.defaultLayout=l,this.registry={};let C=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(D){return C(D)},this.configGetSourceVariant=function(D){C=D.bind(this)}}getSpan(d,l){if(0<=this.span)return this.span;l===void 0&&(l=0);const a=this.getVariant(d,l);if(!a)throw new Error("unable to determine span for unrecognized variant");return a.getSpan(d,l)}defaultGetSourceVariant(d){if(d.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&d.hasOwnProperty(this.defaultLayout.property))return;const l=this.registry[d[this.discriminator.property]];if(l&&(!l.layout||d.hasOwnProperty(l.property)))return l}else for(const l in this.registry){const a=this.registry[l];if(d.hasOwnProperty(a.property))return a}throw new Error("unable to infer src variant")}decode(d,l){l===void 0&&(l=0);let a;const h=this.discriminator,E=h.decode(d,l);let C=this.registry[E];if(C===void 0){let D=0;C=this.defaultLayout,this.usesPrefixDiscriminator&&(D=h.layout.span),a=this.makeDestinationObject(),a[h.property]=E,a[C.property]=this.defaultLayout.decode(d,l+D)}else a=C.decode(d,l);return a}encode(d,l,a){a===void 0&&(a=0);const h=this.getSourceVariant(d);if(h===void 0){const E=this.discriminator,C=this.defaultLayout;let D=0;return this.usesPrefixDiscriminator&&(D=E.layout.span),E.encode(d[E.property],l,a),D+C.encode(d[C.property],l,a+D)}return h.encode(d,l,a)}addVariant(d,l,a){const h=new z(this,d,l,a);return this.registry[d]=h,h}getVariant(d,l){let a=d;return ye.isBuffer(d)&&(l===void 0&&(l=0),a=this.discriminator.decode(d,l)),this.registry[a]}}class z extends r{constructor(d,l,a,h){if(!(d instanceof $))throw new TypeError("union must be a Union");if(!Number.isInteger(l)||0>l)throw new TypeError("variant must be a (non-negative) integer");if(typeof a=="string"&&h===void 0&&(h=a,a=null),a){if(!(a instanceof r))throw new TypeError("layout must be a Layout");if(d.defaultLayout!==null&&0<=a.span&&a.span>d.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof h!="string")throw new TypeError("variant must have a String property")}let E=d.span;0>d.span&&(E=a?a.span:0,0<=E&&d.usesPrefixDiscriminator&&(E+=d.discriminator.layout.span)),super(E,h),this.union=d,this.variant=l,this.layout=a||null}getSpan(d,l){if(0<=this.span)return this.span;l===void 0&&(l=0);let a=0;return this.union.usesPrefixDiscriminator&&(a=this.union.discriminator.layout.span),a+this.layout.getSpan(d,l+a)}decode(d,l){const a=this.makeDestinationObject();if(l===void 0&&(l=0),this!==this.union.getVariant(d,l))throw new Error("variant mismatch");let h=0;return this.union.usesPrefixDiscriminator&&(h=this.union.discriminator.layout.span),this.layout?a[this.property]=this.layout.decode(d,l+h):this.property?a[this.property]=!0:this.union.usesPrefixDiscriminator&&(a[this.union.discriminator.property]=this.variant),a}encode(d,l,a){a===void 0&&(a=0);let h=0;if(this.union.usesPrefixDiscriminator&&(h=this.union.discriminator.layout.span),this.layout&&!d.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,l,a);let E=h;if(this.layout&&(this.layout.encode(d[this.property],l,a+h),E+=this.layout.getSpan(l,a+h),0<=this.union.span&&E>this.union.span))throw new Error("encoded variant overruns containing union");return E}fromArray(d){if(this.layout)return this.layout.fromArray(d)}}function H(_){return 0>_&&(_+=4294967296),_}class P extends r{constructor(d,l,a){if(!(d instanceof o||d instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof l=="string"&&a===void 0&&(a=l,l=void 0),4<d.span)throw new RangeError("word cannot exceed 32 bits");super(d.span,a),this.word=d,this.msb=!!l,this.fields=[];let h=0;this._packedSetValue=function(E){return h=H(E),this},this._packedGetValue=function(){return h}}decode(d,l){const a=this.makeDestinationObject();l===void 0&&(l=0);const h=this.word.decode(d,l);this._packedSetValue(h);for(const E of this.fields)E.property!==void 0&&(a[E.property]=E.decode(h));return a}encode(d,l,a){a===void 0&&(a=0);const h=this.word.decode(l,a);this._packedSetValue(h);for(const E of this.fields)if(E.property!==void 0){const C=d[E.property];C!==void 0&&E.encode(C)}return this.word.encode(this._packedGetValue(),l,a)}addField(d,l){const a=new A(this,d,l);return this.fields.push(a),a}addBoolean(d){const l=new c(this,d);return this.fields.push(l),l}fieldFor(d){if(typeof d!="string")throw new TypeError("property must be string");for(const l of this.fields)if(l.property===d)return l}}class A{constructor(d,l,a){if(!(d instanceof P))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(l)||0>=l)throw new TypeError("bits must be positive integer");const h=8*d.span,E=d.fields.reduce((C,D)=>C+D.bits,0);if(l+E>h)throw new Error("bits too long for span remainder ("+(h-E)+" of "+h+" remain)");this.container=d,this.bits=l,this.valueMask=(1<<l)-1,l===32&&(this.valueMask=4294967295),this.start=E,this.container.msb&&(this.start=h-E-l),this.wordMask=H(this.valueMask<<this.start),this.property=a}decode(){const d=this.container._packedGetValue();return H(d&this.wordMask)>>>this.start}encode(d){if(!Number.isInteger(d)||d!==H(d&this.valueMask))throw new TypeError(e("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const l=this.container._packedGetValue(),a=H(d<<this.start);this.container._packedSetValue(H(l&~this.wordMask)|a)}}class c extends A{constructor(d,l){super(d,1,l)}decode(d,l){return!!A.prototype.decode.call(this,d,l)}encode(d){return typeof d=="boolean"&&(d=+d),A.prototype.encode.call(this,d)}}class p extends r{constructor(d,l){if(!(d instanceof n&&d.isCount()||Number.isInteger(d)&&0<=d))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let a=-1;d instanceof n||(a=d),super(a,l),this.length=d}getSpan(d,l){let a=this.span;return 0>a&&(a=this.length.decode(d,l)),a}decode(d,l){l===void 0&&(l=0);let a=this.span;return 0>a&&(a=this.length.decode(d,l)),d.slice(l,l+a)}encode(d,l,a){let h=this.length;if(this.length instanceof n&&(h=d.length),!(ye.isBuffer(d)&&h===d.length))throw new TypeError(e("Blob.encode",this)+" requires (length "+h+") Buffer as src");if(a+h>l.length)throw new RangeError("encoding overruns Buffer");return l.write(d.toString("hex"),a,h,"hex"),this.length instanceof n&&this.length.encode(h,l,a),h}}class b extends r{constructor(d){super(-1,d)}getSpan(d,l){if(!ye.isBuffer(d))throw new TypeError("b must be a Buffer");l===void 0&&(l=0);let a=l;for(;a<d.length&&d[a]!==0;)a+=1;return 1+a-l}decode(d,l,a){l===void 0&&(l=0);let h=this.getSpan(d,l);return d.slice(l,l+h-1).toString("utf-8")}encode(d,l,a){a===void 0&&(a=0),typeof d!="string"&&(d=d.toString());const h=new ye(d,"utf8"),E=h.length;if(a+E>l.length)throw new RangeError("encoding overruns Buffer");return h.copy(l,a),l[a+E]=0,E+1}}class v extends r{constructor(d,l){if(typeof d=="string"&&l===void 0&&(l=d,d=void 0),d===void 0)d=-1;else if(!Number.isInteger(d))throw new TypeError("maxSpan must be an integer");super(-1,l),this.maxSpan=d}getSpan(d,l){if(!ye.isBuffer(d))throw new TypeError("b must be a Buffer");return l===void 0&&(l=0),d.length-l}decode(d,l,a){l===void 0&&(l=0);let h=this.getSpan(d,l);if(0<=this.maxSpan&&this.maxSpan<h)throw new RangeError("text length exceeds maxSpan");return d.slice(l,l+h).toString("utf-8")}encode(d,l,a){a===void 0&&(a=0),typeof d!="string"&&(d=d.toString());const h=new ye(d,"utf8"),E=h.length;if(0<=this.maxSpan&&this.maxSpan<E)throw new RangeError("text length exceeds maxSpan");if(a+E>l.length)throw new RangeError("encoding overruns Buffer");return h.copy(l,a),E}}class k extends r{constructor(d,l){super(0,l),this.value=d}decode(d,l,a){return this.value}encode(d,l,a){return 0}}return le.ExternalLayout=n,le.GreedyCount=s,le.OffsetLayout=i,le.UInt=o,le.UIntBE=u,le.Int=f,le.IntBE=y,le.Float=L,le.FloatBE=F,le.Double=M,le.DoubleBE=q,le.Sequence=G,le.Structure=te,le.UnionDiscriminator=X,le.UnionLayoutDiscriminator=ee,le.Union=$,le.VariantLayout=z,le.BitStructure=P,le.BitField=A,le.Boolean=c,le.Blob=p,le.CString=b,le.UTF8=v,le.Constant=k,le.greedy=(_,d)=>new s(_,d),le.offset=(_,d,l)=>new i(_,d,l),le.u8=_=>new o(1,_),le.u16=_=>new o(2,_),le.u24=_=>new o(3,_),le.u32=_=>new o(4,_),le.u40=_=>new o(5,_),le.u48=_=>new o(6,_),le.nu64=_=>new R(_),le.u16be=_=>new u(2,_),le.u24be=_=>new u(3,_),le.u32be=_=>new u(4,_),le.u40be=_=>new u(5,_),le.u48be=_=>new u(6,_),le.nu64be=_=>new T(_),le.s8=_=>new f(1,_),le.s16=_=>new f(2,_),le.s24=_=>new f(3,_),le.s32=_=>new f(4,_),le.s40=_=>new f(5,_),le.s48=_=>new f(6,_),le.ns64=_=>new x(_),le.s16be=_=>new y(2,_),le.s24be=_=>new y(3,_),le.s32be=_=>new y(4,_),le.s40be=_=>new y(5,_),le.s48be=_=>new y(6,_),le.ns64be=_=>new O(_),le.f32=_=>new L(_),le.f32be=_=>new F(_),le.f64=_=>new M(_),le.f64be=_=>new q(_),le.struct=(_,d,l)=>new te(_,d,l),le.bits=(_,d,l)=>new P(_,d,l),le.seq=(_,d,l)=>new G(_,d,l),le.union=(_,d,l)=>new $(_,d,l),le.unionLayoutDiscriminator=(_,d)=>new ee(_,d),le.blob=(_,d)=>new p(_,d),le.cstr=_=>new b(_),le.utf8=(_,d)=>new v(_,d),le.const=(_,d)=>new k(_,d),le}var ac;function op(){return ac||(ac=1,function(r){var e=$r&&$r.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(r,"__esModule",{value:!0}),r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0,r.u64=u,r.i64=f,r.u128=y,r.i128=g,r.u256=S,r.i256=I,r.publicKey=T,r.option=O,r.bool=L,r.vec=q,r.tagged=G,r.vecU8=te,r.str=X,r.rustEnum=ee,r.array=$,r.map=H;const t=oc(),n=Zf,s=e(Yf());var i=oc();Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return i.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return i.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return i.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return i.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return i.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return i.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return i.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return i.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return i.struct}});class o extends t.Layout{constructor(A,c,p){super(A,p),this.blob=(0,t.blob)(A),this.signed=c}decode(A,c=0){const p=new s.default(this.blob.decode(A,c),10,"le");return this.signed?p.fromTwos(this.span*8).clone():p}encode(A,c,p=0){return this.signed&&(A=A.toTwos(this.span*8)),this.blob.encode(A.toArrayLike(ye,"le",this.span),c,p)}}function u(P){return new o(8,!1,P)}function f(P){return new o(8,!0,P)}function y(P){return new o(16,!1,P)}function g(P){return new o(16,!0,P)}function S(P){return new o(32,!1,P)}function I(P){return new o(32,!0,P)}class R extends t.Layout{constructor(A,c,p,b){super(A.span,b),this.layout=A,this.decoder=c,this.encoder=p}decode(A,c){return this.decoder(this.layout.decode(A,c))}encode(A,c,p){return this.layout.encode(this.encoder(A),c,p)}getSpan(A,c){return this.layout.getSpan(A,c)}}function T(P){return new R((0,t.blob)(32),A=>new n.PublicKey(A),A=>A.toBuffer(),P)}class x extends t.Layout{constructor(A,c){super(-1,c),this.layout=A,this.discriminator=(0,t.u8)()}encode(A,c,p=0){return A==null?this.discriminator.encode(0,c,p):(this.discriminator.encode(1,c,p),this.layout.encode(A,c,p+1)+1)}decode(A,c=0){const p=this.discriminator.decode(A,c);if(p===0)return null;if(p===1)return this.layout.decode(A,c+1);throw new Error("Invalid option "+this.property)}getSpan(A,c=0){const p=this.discriminator.decode(A,c);if(p===0)return 1;if(p===1)return this.layout.getSpan(A,c+1)+1;throw new Error("Invalid option "+this.property)}}function O(P,A){return new x(P,A)}function L(P){return new R((0,t.u8)(),F,M,P)}function F(P){if(P===0)return!1;if(P===1)return!0;throw new Error("Invalid bool: "+P)}function M(P){return P?1:0}function q(P,A){const c=(0,t.u32)("length"),p=(0,t.struct)([c,(0,t.seq)(P,(0,t.offset)(c,-c.span),"values")]);return new R(p,({values:b})=>b,b=>({values:b}),A)}function G(P,A,c){const p=(0,t.struct)([u("tag"),A.replicate("data")]);function b({tag:v,data:k}){if(!v.eq(P))throw new Error("Invalid tag, expected: "+P.toString("hex")+", got: "+v.toString("hex"));return k}return new R(p,b,v=>({tag:P,data:v}),c)}function te(P){const A=(0,t.u32)("length"),c=(0,t.struct)([A,(0,t.blob)((0,t.offset)(A,-A.span),"data")]);return new R(c,({data:p})=>p,p=>({data:p}),P)}function X(P){return new R(te(),A=>A.toString("utf-8"),A=>ye.from(A,"utf-8"),P)}function ee(P,A,c){const p=(0,t.union)(c??(0,t.u8)(),A);return P.forEach((b,v)=>p.addVariant(v,b,b.property)),p}function $(P,A,c){const p=(0,t.struct)([(0,t.seq)(P,A,"values")]);return new R(p,({values:b})=>b,b=>({values:b}),c)}class z extends t.Layout{constructor(A,c,p){super(A.span+c.span,p),this.keyLayout=A,this.valueLayout=c}decode(A,c){c=c||0;const p=this.keyLayout.decode(A,c),b=this.valueLayout.decode(A,c+this.keyLayout.getSpan(A,c));return[p,b]}encode(A,c,p){p=p||0;const b=this.keyLayout.encode(A[0],c,p),v=this.valueLayout.encode(A[1],c,p+b);return b+v}getSpan(A,c){return this.keyLayout.getSpan(A,c)+this.valueLayout.getSpan(A,c)}}function H(P,A,c){const p=(0,t.u32)("length"),b=(0,t.struct)([p,(0,t.seq)(new z(P,A),(0,t.offset)(p,-p.span),"values")]);return new R(b,({values:v})=>new Map(v),v=>({values:Array.from(v.entries())}),c)}}($r)),$r}var Mt=op();function Lr(r){let e=r.length;for(;--e>=0;)r[e]=0}const ap=3,cp=258,cl=29,up=256,lp=up+1+cl,ul=30,dp=512,hp=new Array((lp+2)*2);Lr(hp);const fp=new Array(ul*2);Lr(fp);const pp=new Array(dp);Lr(pp);const yp=new Array(cp-ap+1);Lr(yp);const gp=new Array(cl);Lr(gp);const mp=new Array(ul);Lr(mp);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const qo=new Uint8Array(256);for(let r=0;r<256;r++)qo[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;qo[254]=qo[254]=1;Mt.struct([Mt.publicKey("authority"),Mt.vecU8("data")]);let _p=class extends TypeError{constructor(e,t){let n;const{message:s,...i}=e,{path:o}=e,u=o.length===0?s:"At path: "+o.join(".")+" -- "+s;super(u),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var f;return(f=n)!=null?f:n=[e,...t()]}}};function wp(r){return wr(r)&&typeof r[Symbol.iterator]=="function"}function wr(r){return typeof r=="object"&&r!=null}function Mn(r){return typeof r=="string"?JSON.stringify(r):""+r}function bp(r){const{done:e,value:t}=r.next();return e?void 0:t}function Rp(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=e,{type:o}=t,{refinement:u,message:f="Expected a value of type `"+o+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+Mn(n)+"`"}=r;return{value:n,type:o,refinement:u,key:s[s.length-1],path:s,branch:i,...r,message:f}}function*cc(r,e,t,n){wp(r)||(r=[r]);for(const s of r){const i=Rp(s,e,t,n);i&&(yield i)}}function*ya(r,e,t){t===void 0&&(t={});const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=t,u={path:n,branch:s};if(i&&(r=e.coercer(r,u),o&&e.type!=="type"&&wr(e.schema)&&wr(r)&&!Array.isArray(r)))for(const y in r)e.schema[y]===void 0&&delete r[y];let f=!0;for(const y of e.validator(r,u))f=!1,yield[y,void 0];for(let[y,g,S]of e.entries(r,u)){const I=ya(g,S,{path:y===void 0?n:[...n,y],branch:y===void 0?s:[...s,g],coerce:i,mask:o});for(const R of I)R[0]?(f=!1,yield[R[0],void 0]):i&&(g=R[1],y===void 0?r=g:r instanceof Map?r.set(y,g):r instanceof Set?r.add(g):wr(r)&&(r[y]=g))}if(f)for(const y of e.refiner(r,u))f=!1,yield[y,void 0];f&&(yield[void 0,r])}let Dn=class{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:n,validator:s,refiner:i,coercer:o=f=>f,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=o,s?this.validator=(f,y)=>{const g=s(f,y);return cc(g,y,this,f)}:this.validator=()=>[],i?this.refiner=(f,y)=>{const g=i(f,y);return cc(g,y,this,f)}:this.refiner=()=>[]}assert(e){return Ep(e,this)}create(e){return ll(e,this)}is(e){return dl(e,this)}mask(e){return Ap(e,this)}validate(e,t){return t===void 0&&(t={}),oi(e,this,t)}};function Ep(r,e){const t=oi(r,e);if(t[0])throw t[0]}function ll(r,e){const t=oi(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function Ap(r,e){const t=oi(r,e,{coerce:!0,mask:!0});if(t[0])throw t[0];return t[1]}function dl(r,e){return!oi(r,e)[0]}function oi(r,e,t){t===void 0&&(t={});const n=ya(r,e,t),s=bp(n);return s[0]?[new _p(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function ai(r,e){return new Dn({type:r,schema:null,validator:e})}function vp(){return ai("any",()=>!0)}function Qs(r){return new Dn({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+Mn(e)}})}function Ip(){return ai("boolean",r=>typeof r=="boolean")}function uc(r){const e=Mn(r);return new Dn({type:"literal",schema:r,validator(t){return t===r||"Expected the literal `"+e+"`, but received: "+Mn(t)}})}function Ei(r){return new Dn({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function zi(){return ai("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+Mn(r))}function $i(r){return new Dn({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function jn(){return ai("string",r=>typeof r=="string"||"Expected a string, but received: "+Mn(r))}function Cn(r){const e=Object.keys(r);return new Dn({type:"type",schema:r,*entries(t){if(wr(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return wr(t)||"Expected an object, but received: "+Mn(t)}})}function hl(r){const e=r.map(t=>t.type).join(" | ");return new Dn({type:"union",schema:null,coercer(t,n){return(r.find(i=>{const[o]=i.validate(t,{coerce:!0});return!o})||ga()).coercer(t,n)},validator(t,n){const s=[];for(const i of r){const[...o]=ya(t,i,n),[u]=o;if(u[0])for(const[f]of o)f&&s.push(f);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+Mn(t),...s]}})}function ga(){return ai("unknown",()=>!0)}function Op(r,e,t){return new Dn({...r,coercer:(n,s)=>dl(n,e)?r.coercer(t(n,s),s):r.coercer(n,s)})}function Sp(r){return Op(fl(r),Tp,e=>"error"in e?e:{...e,result:ll(e.result,r)})}const Tp=fl(ga());function fl(r){return hl([Cn({jsonrpc:uc("2.0"),id:jn(),result:r}),Cn({jsonrpc:uc("2.0"),id:jn(),error:Cn({code:ga(),message:jn(),data:$i(vp())})})])}function Np(r){return Sp(Cn({context:Cn({slot:zi()}),value:r}))}Np(Cn({err:Ei(hl([Cn({}),jn()])),logs:Ei(Qs(jn())),accounts:$i(Ei(Qs(Ei(Cn({executable:Ip(),owner:jn(),lamports:zi(),data:Qs(jn()),rentEpoch:$i(zi())}))))),unitsConsumed:$i(zi())}));var kp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ji<"u"?ji:typeof self<"u"?self:{},j={};Object.defineProperty(j,"__esModule",{value:!0});j.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=j.ANCHOR_ERROR__REQUIRE_VIOLATED=j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=j.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=j.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=j.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=j.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=j.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=j.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=j.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=j.ANCHOR_ERROR__CONSTRAINT_SPACE=j.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=j.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=j.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=j.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=j.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=j.ANCHOR_ERROR__CONSTRAINT_ZERO=j.ANCHOR_ERROR__CONSTRAINT_ADDRESS=j.ANCHOR_ERROR__CONSTRAINT_CLOSE=j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=j.ANCHOR_ERROR__CONSTRAINT_STATE=j.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=j.ANCHOR_ERROR__CONSTRAINT_SEEDS=j.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=j.ANCHOR_ERROR__CONSTRAINT_OWNER=j.ANCHOR_ERROR__CONSTRAINT_RAW=j.ANCHOR_ERROR__CONSTRAINT_SIGNER=j.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=j.ANCHOR_ERROR__CONSTRAINT_MUT=j.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=j.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=j.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=j.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=j.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=j.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=j.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=j.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0;j.ANCHOR_ERROR__DEPRECATED=j.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=j.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=j.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=j.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=j.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=j.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=j.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=j.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=j.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=j.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=j.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=j.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=j.ANCHOR_ERROR__INVALID_PROGRAM_ID=j.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=j.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=j.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=j.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=j.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=j.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=j.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=j.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=j.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=j.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0;j.ANCHOR_ERROR__INSTRUCTION_MISSING=100;j.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101;j.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102;j.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103;j.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3;j.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001;j.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002;j.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500;j.ANCHOR_ERROR__CONSTRAINT_MUT=2e3;j.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001;j.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002;j.ANCHOR_ERROR__CONSTRAINT_RAW=2003;j.ANCHOR_ERROR__CONSTRAINT_OWNER=2004;j.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005;j.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006;j.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007;j.ANCHOR_ERROR__CONSTRAINT_STATE=2008;j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009;j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010;j.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011;j.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012;j.ANCHOR_ERROR__CONSTRAINT_ZERO=2013;j.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014;j.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015;j.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016;j.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017;j.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018;j.ANCHOR_ERROR__CONSTRAINT_SPACE=2019;j.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020;j.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021;j.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022;j.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023;j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024;j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025;j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026;j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027;j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028;j.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029;j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030;j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031;j.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032;j.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033;j.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034;j.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035;j.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036;j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037;j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038;j.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039;j.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;j.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;j.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502;j.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503;j.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504;j.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505;j.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506;j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3;j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001;j.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002;j.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003;j.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004;j.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005;j.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006;j.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007;j.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008;j.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009;j.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010;j.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011;j.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012;j.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013;j.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014;j.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015;j.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016;j.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017;j.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100;j.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101;j.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;j.ANCHOR_ERROR__DEPRECATED=5e3;let zt=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};var as=zt;function xp(r,e){return e.property?r+"["+e.property+"]":r}let Yn=class extends zt{isCount(){throw new Error("ExternalLayout is abstract")}},pl=class extends Yn{constructor(e,t,n){if(!(e instanceof zt))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof cs||this.layout instanceof yl}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}},cs=class extends zt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}},yl=class extends zt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}};const Vo=Math.pow(2,32);function gl(r){const e=Math.floor(r/Vo),t=r-e*Vo;return{hi32:e,lo32:t}}function ml(r,e){return r*Vo+e}let Cp=class extends zt{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),s=e.readUInt32LE(t+4);return ml(s,n)}encode(e,t,n){n===void 0&&(n=0);const s=gl(e);return t.writeUInt32LE(s.lo32,n),t.writeUInt32LE(s.hi32,n+4),8}},Bp=class extends zt{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),s=e.readInt32LE(t+4);return ml(s,n)}encode(e,t,n){n===void 0&&(n=0);const s=gl(e);return t.writeUInt32LE(s.lo32,n),t.writeInt32LE(s.hi32,n+4),8}},Lp=class extends zt{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((i,o)=>i&&o instanceof zt,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const i of e)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(e,t);return t+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const s=n;let i=0,o=0;for(const u of this.fields){let f=u.span;if(o=0<f?f:0,u.property!==void 0){const y=e[u.property];y!==void 0&&(o=u.encode(y,t,n),0>f&&(f=u.getSpan(t,n)))}i=n,n+=f}return i+o-s}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}},_l=class{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}},lc=class extends _l{constructor(e,t){if(!(e instanceof Yn&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}},wl=class extends zt{constructor(e,t,n){const s=e instanceof cs||e instanceof yl;if(s)e=new lc(new pl(e));else if(e instanceof Yn&&e.isCount())e=new lc(e);else if(!(e instanceof _l))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof zt))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&s&&(i+=e.layout.span)),super(i,n),this.discriminator=e,this.usesPrefixDiscriminator=s,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return o(u)},this.configGetSourceVariant=function(u){o=u.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){t===void 0&&(t=0);let n;const s=this.discriminator,i=s.decode(e,t);let o=this.registry[i];if(o===void 0){let u=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(u=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[o.property]=this.defaultLayout.decode(e,t+u)}else n=o.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const s=this.getSourceVariant(e);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=i.layout.span),i.encode(e[i.property],t,n),u+o.encode(e[o.property],t,n+u)}return s.encode(e,t,n)}addVariant(e,t,n){const s=new Mp(this,e,t,n);return this.registry[e]=s,s}getVariant(e,t){let n=e;return ye.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}},Mp=class extends zt{constructor(e,t,n,s){if(!(e instanceof wl))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof zt))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=n?n.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,s),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let i=s;if(this.layout&&(this.layout.encode(e[this.property],t,n+s),i+=this.layout.getSpan(t,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}},Pp=class extends zt{constructor(e,t){if(!(e instanceof Yn&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Yn||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let s=this.length;if(this.length instanceof Yn&&(s=e.length),!(ye.isBuffer(e)&&s===e.length))throw new TypeError(xp("Blob.encode",this)+" requires (length "+s+") Buffer as src");if(n+s>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,s,"hex"),this.length instanceof Yn&&this.length.encode(s,t,n),s}};var Up=(r,e,t)=>new pl(r,e,t),Dp=r=>new cs(1,r),_n=r=>new cs(4,r),Hp=r=>new Cp(r),vn=r=>new Bp(r),At=(r,e,t)=>new Lp(r,e,t),bl=(r,e,t)=>new wl(r,e,t),ci=(r,e)=>new Pp(r,e);let Fp=class extends as{constructor(e){super(-1,e),this.property=e,this.layout=At([_n("length"),_n("lengthPadding"),ci(Up(_n(),-8),"chars")],this.property)}encode(e,t,n=0){if(e==null)return this.layout.span;const s={chars:ye.from(e,"utf8")};return this.layout.encode(s,t,n)}decode(e,t=0){return this.layout.decode(e,t).chars.toString()}getSpan(e,t=0){return _n().span+_n().span+new ol(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}};function us(r){return new Fp(r)}function jt(r){return ci(32,r)}const Vt=bl(_n("instruction"));Vt.addVariant(0,At([vn("lamports"),vn("space"),jt("owner")]),"createAccount");Vt.addVariant(1,At([jt("owner")]),"assign");Vt.addVariant(2,At([vn("lamports")]),"transfer");Vt.addVariant(3,At([jt("base"),us("seed"),vn("lamports"),vn("space"),jt("owner")]),"createAccountWithSeed");Vt.addVariant(4,At([jt("authorized")]),"advanceNonceAccount");Vt.addVariant(5,At([vn("lamports")]),"withdrawNonceAccount");Vt.addVariant(6,At([jt("authorized")]),"initializeNonceAccount");Vt.addVariant(7,At([jt("authorized")]),"authorizeNonceAccount");Vt.addVariant(8,At([vn("space")]),"allocate");Vt.addVariant(9,At([jt("base"),us("seed"),vn("space"),jt("owner")]),"allocateWithSeed");Vt.addVariant(10,At([jt("base"),us("seed"),jt("owner")]),"assignWithSeed");Vt.addVariant(11,At([vn("lamports"),us("seed"),jt("owner")]),"transferWithSeed");Math.max(...Object.values(Vt.registry).map(r=>r.span));let zp=class extends as{constructor(e,t,n,s){super(e.span,s),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}};function dc(r){return new zp(ci(32),e=>new si(e),e=>e.toBuffer(),r)}At([_n("version"),_n("state"),dc("authorizedPubkey"),dc("nonce"),At([Hp("lamportsPerSignature")],"feeCalculator")]);new si("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new si("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var hc={exports:{}};(function(r,e){var t=typeof self<"u"?self:kp,n=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var u={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function f(c){return c&&DataView.prototype.isPrototypeOf(c)}if(u.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(c){return c&&y.indexOf(Object.prototype.toString.call(c))>-1};function S(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function I(c){return typeof c!="string"&&(c=String(c)),c}function R(c){var p={next:function(){var b=c.shift();return{done:b===void 0,value:b}}};return u.iterable&&(p[Symbol.iterator]=function(){return p}),p}function T(c){this.map={},c instanceof T?c.forEach(function(p,b){this.append(b,p)},this):Array.isArray(c)?c.forEach(function(p){this.append(p[0],p[1])},this):c&&Object.getOwnPropertyNames(c).forEach(function(p){this.append(p,c[p])},this)}T.prototype.append=function(c,p){c=S(c),p=I(p);var b=this.map[c];this.map[c]=b?b+", "+p:p},T.prototype.delete=function(c){delete this.map[S(c)]},T.prototype.get=function(c){return c=S(c),this.has(c)?this.map[c]:null},T.prototype.has=function(c){return this.map.hasOwnProperty(S(c))},T.prototype.set=function(c,p){this.map[S(c)]=I(p)},T.prototype.forEach=function(c,p){for(var b in this.map)this.map.hasOwnProperty(b)&&c.call(p,this.map[b],b,this)},T.prototype.keys=function(){var c=[];return this.forEach(function(p,b){c.push(b)}),R(c)},T.prototype.values=function(){var c=[];return this.forEach(function(p){c.push(p)}),R(c)},T.prototype.entries=function(){var c=[];return this.forEach(function(p,b){c.push([b,p])}),R(c)},u.iterable&&(T.prototype[Symbol.iterator]=T.prototype.entries);function x(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=!0}function O(c){return new Promise(function(p,b){c.onload=function(){p(c.result)},c.onerror=function(){b(c.error)}})}function L(c){var p=new FileReader,b=O(p);return p.readAsArrayBuffer(c),b}function F(c){var p=new FileReader,b=O(p);return p.readAsText(c),b}function M(c){for(var p=new Uint8Array(c),b=new Array(p.length),v=0;v<p.length;v++)b[v]=String.fromCharCode(p[v]);return b.join("")}function q(c){if(c.slice)return c.slice(0);var p=new Uint8Array(c.byteLength);return p.set(new Uint8Array(c)),p.buffer}function G(){return this.bodyUsed=!1,this._initBody=function(c){this._bodyInit=c,c?typeof c=="string"?this._bodyText=c:u.blob&&Blob.prototype.isPrototypeOf(c)?this._bodyBlob=c:u.formData&&FormData.prototype.isPrototypeOf(c)?this._bodyFormData=c:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)?this._bodyText=c.toString():u.arrayBuffer&&u.blob&&f(c)?(this._bodyArrayBuffer=q(c.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(c)||g(c))?this._bodyArrayBuffer=q(c):this._bodyText=c=Object.prototype.toString.call(c):this._bodyText="",this.headers.get("content-type")||(typeof c=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var c=x(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?x(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(L)}),this.text=function(){var c=x(this);if(c)return c;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then($)}),this.json=function(){return this.text().then(JSON.parse)},this}var te=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function X(c){var p=c.toUpperCase();return te.indexOf(p)>-1?p:c}function ee(c,p){p=p||{};var b=p.body;if(c instanceof ee){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url,this.credentials=c.credentials,p.headers||(this.headers=new T(c.headers)),this.method=c.method,this.mode=c.mode,this.signal=c.signal,!b&&c._bodyInit!=null&&(b=c._bodyInit,c.bodyUsed=!0)}else this.url=String(c);if(this.credentials=p.credentials||this.credentials||"same-origin",(p.headers||!this.headers)&&(this.headers=new T(p.headers)),this.method=X(p.method||this.method||"GET"),this.mode=p.mode||this.mode||null,this.signal=p.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&b)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(b)}ee.prototype.clone=function(){return new ee(this,{body:this._bodyInit})};function $(c){var p=new FormData;return c.trim().split("&").forEach(function(b){if(b){var v=b.split("="),k=v.shift().replace(/\+/g," "),_=v.join("=").replace(/\+/g," ");p.append(decodeURIComponent(k),decodeURIComponent(_))}}),p}function z(c){var p=new T,b=c.replace(/\r?\n[\t ]+/g," ");return b.split(/\r?\n/).forEach(function(v){var k=v.split(":"),_=k.shift().trim();if(_){var d=k.join(":").trim();p.append(_,d)}}),p}G.call(ee.prototype);function H(c,p){p||(p={}),this.type="default",this.status=p.status===void 0?200:p.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in p?p.statusText:"OK",this.headers=new T(p.headers),this.url=p.url||"",this._initBody(c)}G.call(H.prototype),H.prototype.clone=function(){return new H(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new T(this.headers),url:this.url})},H.error=function(){var c=new H(null,{status:0,statusText:""});return c.type="error",c};var P=[301,302,303,307,308];H.redirect=function(c,p){if(P.indexOf(p)===-1)throw new RangeError("Invalid status code");return new H(null,{status:p,headers:{location:c}})},o.DOMException=i.DOMException;try{new o.DOMException}catch{o.DOMException=function(p,b){this.message=p,this.name=b;var v=Error(p);this.stack=v.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function A(c,p){return new Promise(function(b,v){var k=new ee(c,p);if(k.signal&&k.signal.aborted)return v(new o.DOMException("Aborted","AbortError"));var _=new XMLHttpRequest;function d(){_.abort()}_.onload=function(){var l={status:_.status,statusText:_.statusText,headers:z(_.getAllResponseHeaders()||"")};l.url="responseURL"in _?_.responseURL:l.headers.get("X-Request-URL");var a="response"in _?_.response:_.responseText;b(new H(a,l))},_.onerror=function(){v(new TypeError("Network request failed"))},_.ontimeout=function(){v(new TypeError("Network request failed"))},_.onabort=function(){v(new o.DOMException("Aborted","AbortError"))},_.open(k.method,k.url,!0),k.credentials==="include"?_.withCredentials=!0:k.credentials==="omit"&&(_.withCredentials=!1),"responseType"in _&&u.blob&&(_.responseType="blob"),k.headers.forEach(function(l,a){_.setRequestHeader(a,l)}),k.signal&&(k.signal.addEventListener("abort",d),_.onreadystatechange=function(){_.readyState===4&&k.signal.removeEventListener("abort",d)}),_.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return A.polyfill=!0,i.fetch||(i.fetch=A,i.Headers=T,i.Request=ee,i.Response=H),o.Headers=T,o.Request=ee,o.Response=H,o.fetch=A,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,r.exports=e})(hc,hc.exports);Mt.rustEnum([Mt.struct([],"uninitialized"),Mt.struct([Mt.option(Mt.publicKey(),"authorityAddress")],"buffer"),Mt.struct([Mt.publicKey("programdataAddress")],"program"),Mt.struct([Mt.u64("slot"),Mt.option(Mt.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Mt.u32());function eo(r){return new Rl(ci(8),e=>Kp.fromBuffer(e),e=>e.toBuffer(),r)}function Ai(r){return new Rl(ci(32),e=>new si(e),e=>e.toBuffer(),r)}function to(r,e){return new $p(r,e)}let Rl=class extends as{constructor(e,t,n,s){super(e.span,s),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}},$p=class extends as{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=_n()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}},Kp=class El extends ol{toBuffer(){const e=super.toArray().reverse(),t=ye.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=ye.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new El([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}};At([Ai("mint"),Ai("owner"),eo("amount"),to(Ai(),"delegate"),(r=>{const e=bl(Dp("discriminator"),null,r);return e.addVariant(0,At([]),"uninitialized"),e.addVariant(1,At([]),"initialized"),e.addVariant(2,At([]),"frozen"),e})("state"),to(eo(),"isNative"),eo("delegatedAmount"),to(Ai(),"closeAuthority")]);new si("11111111111111111111111111111111");var no={},Kr={},fc;function qp(){if(fc)return Kr;fc=1,Kr.byteLength=u,Kr.toByteArray=y,Kr.fromByteArray=I;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)r[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(R){var T=R.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=R.indexOf("=");x===-1&&(x=T);var O=x===T?0:4-x%4;return[x,O]}function u(R){var T=o(R),x=T[0],O=T[1];return(x+O)*3/4-O}function f(R,T,x){return(T+x)*3/4-x}function y(R){var T,x=o(R),O=x[0],L=x[1],F=new t(f(R,O,L)),M=0,q=L>0?O-4:O,G;for(G=0;G<q;G+=4)T=e[R.charCodeAt(G)]<<18|e[R.charCodeAt(G+1)]<<12|e[R.charCodeAt(G+2)]<<6|e[R.charCodeAt(G+3)],F[M++]=T>>16&255,F[M++]=T>>8&255,F[M++]=T&255;return L===2&&(T=e[R.charCodeAt(G)]<<2|e[R.charCodeAt(G+1)]>>4,F[M++]=T&255),L===1&&(T=e[R.charCodeAt(G)]<<10|e[R.charCodeAt(G+1)]<<4|e[R.charCodeAt(G+2)]>>2,F[M++]=T>>8&255,F[M++]=T&255),F}function g(R){return r[R>>18&63]+r[R>>12&63]+r[R>>6&63]+r[R&63]}function S(R,T,x){for(var O,L=[],F=T;F<x;F+=3)O=(R[F]<<16&16711680)+(R[F+1]<<8&65280)+(R[F+2]&255),L.push(g(O));return L.join("")}function I(R){for(var T,x=R.length,O=x%3,L=[],F=16383,M=0,q=x-O;M<q;M+=F)L.push(S(R,M,M+F>q?q:M+F));return O===1?(T=R[x-1],L.push(r[T>>2]+r[T<<4&63]+"==")):O===2&&(T=(R[x-2]<<8)+R[x-1],L.push(r[T>>10]+r[T>>4&63]+r[T<<2&63]+"=")),L.join("")}return Kr}var vi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var pc;function Vp(){return pc||(pc=1,vi.read=function(r,e,t,n,s){var i,o,u=s*8-n-1,f=(1<<u)-1,y=f>>1,g=-7,S=t?s-1:0,I=t?-1:1,R=r[e+S];for(S+=I,i=R&(1<<-g)-1,R>>=-g,g+=u;g>0;i=i*256+r[e+S],S+=I,g-=8);for(o=i&(1<<-g)-1,i>>=-g,g+=n;g>0;o=o*256+r[e+S],S+=I,g-=8);if(i===0)i=1-y;else{if(i===f)return o?NaN:(R?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-y}return(R?-1:1)*o*Math.pow(2,i-n)},vi.write=function(r,e,t,n,s,i){var o,u,f,y=i*8-s-1,g=(1<<y)-1,S=g>>1,I=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=n?0:i-1,T=n?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=g):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+S>=1?e+=I/f:e+=I*Math.pow(2,1-S),e*f>=2&&(o++,f/=2),o+S>=g?(u=0,o=g):o+S>=1?(u=(e*f-1)*Math.pow(2,s),o=o+S):(u=e*Math.pow(2,S-1)*Math.pow(2,s),o=0));s>=8;r[t+R]=u&255,R+=T,u/=256,s-=8);for(o=o<<s|u,y+=s;y>0;r[t+R]=o&255,R+=T,o/=256,y-=8);r[t+R-T]|=x*128}),vi}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var yc;function ls(){return yc||(yc=1,function(r){const e=qp(),t=Vp(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=F,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const N=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(N,m),N.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function o(N){if(N>s)throw new RangeError('The value "'+N+'" is invalid for option "size"');const m=new Uint8Array(N);return Object.setPrototypeOf(m,u.prototype),m}function u(N,m,w){if(typeof N=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(N)}return f(N,m,w)}u.poolSize=8192;function f(N,m,w){if(typeof N=="string")return I(N,m);if(ArrayBuffer.isView(N))return T(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(Nt(N,ArrayBuffer)||N&&Nt(N.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Nt(N,SharedArrayBuffer)||N&&Nt(N.buffer,SharedArrayBuffer)))return x(N,m,w);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=N.valueOf&&N.valueOf();if(B!=null&&B!==N)return u.from(B,m,w);const K=O(N);if(K)return K;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return u.from(N[Symbol.toPrimitive]("string"),m,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}u.from=function(N,m,w){return f(N,m,w)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function y(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function g(N,m,w){return y(N),N<=0?o(N):m!==void 0?typeof w=="string"?o(N).fill(m,w):o(N).fill(m):o(N)}u.alloc=function(N,m,w){return g(N,m,w)};function S(N){return y(N),o(N<0?0:L(N)|0)}u.allocUnsafe=function(N){return S(N)},u.allocUnsafeSlow=function(N){return S(N)};function I(N,m){if((typeof m!="string"||m==="")&&(m="utf8"),!u.isEncoding(m))throw new TypeError("Unknown encoding: "+m);const w=M(N,m)|0;let B=o(w);const K=B.write(N,m);return K!==w&&(B=B.slice(0,K)),B}function R(N){const m=N.length<0?0:L(N.length)|0,w=o(m);for(let B=0;B<m;B+=1)w[B]=N[B]&255;return w}function T(N){if(Nt(N,Uint8Array)){const m=new Uint8Array(N);return x(m.buffer,m.byteOffset,m.byteLength)}return R(N)}function x(N,m,w){if(m<0||N.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<m+(w||0))throw new RangeError('"length" is outside of buffer bounds');let B;return m===void 0&&w===void 0?B=new Uint8Array(N):w===void 0?B=new Uint8Array(N,m):B=new Uint8Array(N,m,w),Object.setPrototypeOf(B,u.prototype),B}function O(N){if(u.isBuffer(N)){const m=L(N.length)|0,w=o(m);return w.length===0||N.copy(w,0,0,m),w}if(N.length!==void 0)return typeof N.length!="number"||He(N.length)?o(0):R(N);if(N.type==="Buffer"&&Array.isArray(N.data))return R(N.data)}function L(N){if(N>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return N|0}function F(N){return+N!=N&&(N=0),u.alloc(+N)}u.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==u.prototype},u.compare=function(m,w){if(Nt(m,Uint8Array)&&(m=u.from(m,m.offset,m.byteLength)),Nt(w,Uint8Array)&&(w=u.from(w,w.offset,w.byteLength)),!u.isBuffer(m)||!u.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===w)return 0;let B=m.length,K=w.length;for(let V=0,Q=Math.min(B,K);V<Q;++V)if(m[V]!==w[V]){B=m[V],K=w[V];break}return B<K?-1:K<B?1:0},u.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(m,w){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return u.alloc(0);let B;if(w===void 0)for(w=0,B=0;B<m.length;++B)w+=m[B].length;const K=u.allocUnsafe(w);let V=0;for(B=0;B<m.length;++B){let Q=m[B];if(Nt(Q,Uint8Array))V+Q.length>K.length?(u.isBuffer(Q)||(Q=u.from(Q)),Q.copy(K,V)):Uint8Array.prototype.set.call(K,Q,V);else if(u.isBuffer(Q))Q.copy(K,V);else throw new TypeError('"list" argument must be an Array of Buffers');V+=Q.length}return K};function M(N,m){if(u.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||Nt(N,ArrayBuffer))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);const w=N.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&w===0)return 0;let K=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return Fe(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return ze(N).length;default:if(K)return B?-1:Fe(N).length;m=(""+m).toLowerCase(),K=!0}}u.byteLength=M;function q(N,m,w){let B=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,m>>>=0,w<=m))return"";for(N||(N="utf8");;)switch(N){case"hex":return _(this,m,w);case"utf8":case"utf-8":return c(this,m,w);case"ascii":return v(this,m,w);case"latin1":case"binary":return k(this,m,w);case"base64":return A(this,m,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,m,w);default:if(B)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),B=!0}}u.prototype._isBuffer=!0;function G(N,m,w){const B=N[m];N[m]=N[w],N[w]=B}u.prototype.swap16=function(){const m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<m;w+=2)G(this,w,w+1);return this},u.prototype.swap32=function(){const m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<m;w+=4)G(this,w,w+3),G(this,w+1,w+2);return this},u.prototype.swap64=function(){const m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<m;w+=8)G(this,w,w+7),G(this,w+1,w+6),G(this,w+2,w+5),G(this,w+3,w+4);return this},u.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?c(this,0,m):q.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(m){if(!u.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:u.compare(this,m)===0},u.prototype.inspect=function(){let m="";const w=r.INSPECT_MAX_BYTES;return m=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(m+=" ... "),"<Buffer "+m+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(m,w,B,K,V){if(Nt(m,Uint8Array)&&(m=u.from(m,m.offset,m.byteLength)),!u.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(w===void 0&&(w=0),B===void 0&&(B=m?m.length:0),K===void 0&&(K=0),V===void 0&&(V=this.length),w<0||B>m.length||K<0||V>this.length)throw new RangeError("out of range index");if(K>=V&&w>=B)return 0;if(K>=V)return-1;if(w>=B)return 1;if(w>>>=0,B>>>=0,K>>>=0,V>>>=0,this===m)return 0;let Q=V-K,Ee=B-w;const we=Math.min(Q,Ee),_e=this.slice(K,V),Ge=m.slice(w,B);for(let me=0;me<we;++me)if(_e[me]!==Ge[me]){Q=_e[me],Ee=Ge[me];break}return Q<Ee?-1:Ee<Q?1:0};function te(N,m,w,B,K){if(N.length===0)return-1;if(typeof w=="string"?(B=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,He(w)&&(w=K?0:N.length-1),w<0&&(w=N.length+w),w>=N.length){if(K)return-1;w=N.length-1}else if(w<0)if(K)w=0;else return-1;if(typeof m=="string"&&(m=u.from(m,B)),u.isBuffer(m))return m.length===0?-1:X(N,m,w,B,K);if(typeof m=="number")return m=m&255,typeof Uint8Array.prototype.indexOf=="function"?K?Uint8Array.prototype.indexOf.call(N,m,w):Uint8Array.prototype.lastIndexOf.call(N,m,w):X(N,[m],w,B,K);throw new TypeError("val must be string, number or Buffer")}function X(N,m,w,B,K){let V=1,Q=N.length,Ee=m.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(N.length<2||m.length<2)return-1;V=2,Q/=2,Ee/=2,w/=2}function we(Ge,me){return V===1?Ge[me]:Ge.readUInt16BE(me*V)}let _e;if(K){let Ge=-1;for(_e=w;_e<Q;_e++)if(we(N,_e)===we(m,Ge===-1?0:_e-Ge)){if(Ge===-1&&(Ge=_e),_e-Ge+1===Ee)return Ge*V}else Ge!==-1&&(_e-=_e-Ge),Ge=-1}else for(w+Ee>Q&&(w=Q-Ee),_e=w;_e>=0;_e--){let Ge=!0;for(let me=0;me<Ee;me++)if(we(N,_e+me)!==we(m,me)){Ge=!1;break}if(Ge)return _e}return-1}u.prototype.includes=function(m,w,B){return this.indexOf(m,w,B)!==-1},u.prototype.indexOf=function(m,w,B){return te(this,m,w,B,!0)},u.prototype.lastIndexOf=function(m,w,B){return te(this,m,w,B,!1)};function ee(N,m,w,B){w=Number(w)||0;const K=N.length-w;B?(B=Number(B),B>K&&(B=K)):B=K;const V=m.length;B>V/2&&(B=V/2);let Q;for(Q=0;Q<B;++Q){const Ee=parseInt(m.substr(Q*2,2),16);if(He(Ee))return Q;N[w+Q]=Ee}return Q}function $(N,m,w,B){return Ue(Fe(m,N.length-w),N,w,B)}function z(N,m,w,B){return Ue(We(m),N,w,B)}function H(N,m,w,B){return Ue(ze(m),N,w,B)}function P(N,m,w,B){return Ue(dr(m,N.length-w),N,w,B)}u.prototype.write=function(m,w,B,K){if(w===void 0)K="utf8",B=this.length,w=0;else if(B===void 0&&typeof w=="string")K=w,B=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(B)?(B=B>>>0,K===void 0&&(K="utf8")):(K=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const V=this.length-w;if((B===void 0||B>V)&&(B=V),m.length>0&&(B<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");let Q=!1;for(;;)switch(K){case"hex":return ee(this,m,w,B);case"utf8":case"utf-8":return $(this,m,w,B);case"ascii":case"latin1":case"binary":return z(this,m,w,B);case"base64":return H(this,m,w,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,m,w,B);default:if(Q)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),Q=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(N,m,w){return m===0&&w===N.length?e.fromByteArray(N):e.fromByteArray(N.slice(m,w))}function c(N,m,w){w=Math.min(N.length,w);const B=[];let K=m;for(;K<w;){const V=N[K];let Q=null,Ee=V>239?4:V>223?3:V>191?2:1;if(K+Ee<=w){let we,_e,Ge,me;switch(Ee){case 1:V<128&&(Q=V);break;case 2:we=N[K+1],(we&192)===128&&(me=(V&31)<<6|we&63,me>127&&(Q=me));break;case 3:we=N[K+1],_e=N[K+2],(we&192)===128&&(_e&192)===128&&(me=(V&15)<<12|(we&63)<<6|_e&63,me>2047&&(me<55296||me>57343)&&(Q=me));break;case 4:we=N[K+1],_e=N[K+2],Ge=N[K+3],(we&192)===128&&(_e&192)===128&&(Ge&192)===128&&(me=(V&15)<<18|(we&63)<<12|(_e&63)<<6|Ge&63,me>65535&&me<1114112&&(Q=me))}}Q===null?(Q=65533,Ee=1):Q>65535&&(Q-=65536,B.push(Q>>>10&1023|55296),Q=56320|Q&1023),B.push(Q),K+=Ee}return b(B)}const p=4096;function b(N){const m=N.length;if(m<=p)return String.fromCharCode.apply(String,N);let w="",B=0;for(;B<m;)w+=String.fromCharCode.apply(String,N.slice(B,B+=p));return w}function v(N,m,w){let B="";w=Math.min(N.length,w);for(let K=m;K<w;++K)B+=String.fromCharCode(N[K]&127);return B}function k(N,m,w){let B="";w=Math.min(N.length,w);for(let K=m;K<w;++K)B+=String.fromCharCode(N[K]);return B}function _(N,m,w){const B=N.length;(!m||m<0)&&(m=0),(!w||w<0||w>B)&&(w=B);let K="";for(let V=m;V<w;++V)K+=qe[N[V]];return K}function d(N,m,w){const B=N.slice(m,w);let K="";for(let V=0;V<B.length-1;V+=2)K+=String.fromCharCode(B[V]+B[V+1]*256);return K}u.prototype.slice=function(m,w){const B=this.length;m=~~m,w=w===void 0?B:~~w,m<0?(m+=B,m<0&&(m=0)):m>B&&(m=B),w<0?(w+=B,w<0&&(w=0)):w>B&&(w=B),w<m&&(w=m);const K=this.subarray(m,w);return Object.setPrototypeOf(K,u.prototype),K};function l(N,m,w){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+m>w)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(m,w,B){m=m>>>0,w=w>>>0,B||l(m,w,this.length);let K=this[m],V=1,Q=0;for(;++Q<w&&(V*=256);)K+=this[m+Q]*V;return K},u.prototype.readUintBE=u.prototype.readUIntBE=function(m,w,B){m=m>>>0,w=w>>>0,B||l(m,w,this.length);let K=this[m+--w],V=1;for(;w>0&&(V*=256);)K+=this[m+--w]*V;return K},u.prototype.readUint8=u.prototype.readUInt8=function(m,w){return m=m>>>0,w||l(m,1,this.length),this[m]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(m,w){return m=m>>>0,w||l(m,2,this.length),this[m]|this[m+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(m,w){return m=m>>>0,w||l(m,2,this.length),this[m]<<8|this[m+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(m,w){return m=m>>>0,w||l(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(m,w){return m=m>>>0,w||l(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},u.prototype.readBigUInt64LE=Ut(function(m){m=m>>>0,rt(m,"offset");const w=this[m],B=this[m+7];(w===void 0||B===void 0)&&Te(m,this.length-8);const K=w+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,V=this[++m]+this[++m]*2**8+this[++m]*2**16+B*2**24;return BigInt(K)+(BigInt(V)<<BigInt(32))}),u.prototype.readBigUInt64BE=Ut(function(m){m=m>>>0,rt(m,"offset");const w=this[m],B=this[m+7];(w===void 0||B===void 0)&&Te(m,this.length-8);const K=w*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],V=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+B;return(BigInt(K)<<BigInt(32))+BigInt(V)}),u.prototype.readIntLE=function(m,w,B){m=m>>>0,w=w>>>0,B||l(m,w,this.length);let K=this[m],V=1,Q=0;for(;++Q<w&&(V*=256);)K+=this[m+Q]*V;return V*=128,K>=V&&(K-=Math.pow(2,8*w)),K},u.prototype.readIntBE=function(m,w,B){m=m>>>0,w=w>>>0,B||l(m,w,this.length);let K=w,V=1,Q=this[m+--K];for(;K>0&&(V*=256);)Q+=this[m+--K]*V;return V*=128,Q>=V&&(Q-=Math.pow(2,8*w)),Q},u.prototype.readInt8=function(m,w){return m=m>>>0,w||l(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},u.prototype.readInt16LE=function(m,w){m=m>>>0,w||l(m,2,this.length);const B=this[m]|this[m+1]<<8;return B&32768?B|4294901760:B},u.prototype.readInt16BE=function(m,w){m=m>>>0,w||l(m,2,this.length);const B=this[m+1]|this[m]<<8;return B&32768?B|4294901760:B},u.prototype.readInt32LE=function(m,w){return m=m>>>0,w||l(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},u.prototype.readInt32BE=function(m,w){return m=m>>>0,w||l(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},u.prototype.readBigInt64LE=Ut(function(m){m=m>>>0,rt(m,"offset");const w=this[m],B=this[m+7];(w===void 0||B===void 0)&&Te(m,this.length-8);const K=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(B<<24);return(BigInt(K)<<BigInt(32))+BigInt(w+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)}),u.prototype.readBigInt64BE=Ut(function(m){m=m>>>0,rt(m,"offset");const w=this[m],B=this[m+7];(w===void 0||B===void 0)&&Te(m,this.length-8);const K=(w<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(K)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+B)}),u.prototype.readFloatLE=function(m,w){return m=m>>>0,w||l(m,4,this.length),t.read(this,m,!0,23,4)},u.prototype.readFloatBE=function(m,w){return m=m>>>0,w||l(m,4,this.length),t.read(this,m,!1,23,4)},u.prototype.readDoubleLE=function(m,w){return m=m>>>0,w||l(m,8,this.length),t.read(this,m,!0,52,8)},u.prototype.readDoubleBE=function(m,w){return m=m>>>0,w||l(m,8,this.length),t.read(this,m,!1,52,8)};function a(N,m,w,B,K,V){if(!u.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>K||m<V)throw new RangeError('"value" argument is out of bounds');if(w+B>N.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(m,w,B,K){if(m=+m,w=w>>>0,B=B>>>0,!K){const Ee=Math.pow(2,8*B)-1;a(this,m,w,B,Ee,0)}let V=1,Q=0;for(this[w]=m&255;++Q<B&&(V*=256);)this[w+Q]=m/V&255;return w+B},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(m,w,B,K){if(m=+m,w=w>>>0,B=B>>>0,!K){const Ee=Math.pow(2,8*B)-1;a(this,m,w,B,Ee,0)}let V=B-1,Q=1;for(this[w+V]=m&255;--V>=0&&(Q*=256);)this[w+V]=m/Q&255;return w+B},u.prototype.writeUint8=u.prototype.writeUInt8=function(m,w,B){return m=+m,w=w>>>0,B||a(this,m,w,1,255,0),this[w]=m&255,w+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(m,w,B){return m=+m,w=w>>>0,B||a(this,m,w,2,65535,0),this[w]=m&255,this[w+1]=m>>>8,w+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(m,w,B){return m=+m,w=w>>>0,B||a(this,m,w,2,65535,0),this[w]=m>>>8,this[w+1]=m&255,w+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(m,w,B){return m=+m,w=w>>>0,B||a(this,m,w,4,4294967295,0),this[w+3]=m>>>24,this[w+2]=m>>>16,this[w+1]=m>>>8,this[w]=m&255,w+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(m,w,B){return m=+m,w=w>>>0,B||a(this,m,w,4,4294967295,0),this[w]=m>>>24,this[w+1]=m>>>16,this[w+2]=m>>>8,this[w+3]=m&255,w+4};function h(N,m,w,B,K){Oe(m,B,K,N,w,7);let V=Number(m&BigInt(4294967295));N[w++]=V,V=V>>8,N[w++]=V,V=V>>8,N[w++]=V,V=V>>8,N[w++]=V;let Q=Number(m>>BigInt(32)&BigInt(4294967295));return N[w++]=Q,Q=Q>>8,N[w++]=Q,Q=Q>>8,N[w++]=Q,Q=Q>>8,N[w++]=Q,w}function E(N,m,w,B,K){Oe(m,B,K,N,w,7);let V=Number(m&BigInt(4294967295));N[w+7]=V,V=V>>8,N[w+6]=V,V=V>>8,N[w+5]=V,V=V>>8,N[w+4]=V;let Q=Number(m>>BigInt(32)&BigInt(4294967295));return N[w+3]=Q,Q=Q>>8,N[w+2]=Q,Q=Q>>8,N[w+1]=Q,Q=Q>>8,N[w]=Q,w+8}u.prototype.writeBigUInt64LE=Ut(function(m,w=0){return h(this,m,w,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Ut(function(m,w=0){return E(this,m,w,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(m,w,B,K){if(m=+m,w=w>>>0,!K){const we=Math.pow(2,8*B-1);a(this,m,w,B,we-1,-we)}let V=0,Q=1,Ee=0;for(this[w]=m&255;++V<B&&(Q*=256);)m<0&&Ee===0&&this[w+V-1]!==0&&(Ee=1),this[w+V]=(m/Q>>0)-Ee&255;return w+B},u.prototype.writeIntBE=function(m,w,B,K){if(m=+m,w=w>>>0,!K){const we=Math.pow(2,8*B-1);a(this,m,w,B,we-1,-we)}let V=B-1,Q=1,Ee=0;for(this[w+V]=m&255;--V>=0&&(Q*=256);)m<0&&Ee===0&&this[w+V+1]!==0&&(Ee=1),this[w+V]=(m/Q>>0)-Ee&255;return w+B},u.prototype.writeInt8=function(m,w,B){return m=+m,w=w>>>0,B||a(this,m,w,1,127,-128),m<0&&(m=255+m+1),this[w]=m&255,w+1},u.prototype.writeInt16LE=function(m,w,B){return m=+m,w=w>>>0,B||a(this,m,w,2,32767,-32768),this[w]=m&255,this[w+1]=m>>>8,w+2},u.prototype.writeInt16BE=function(m,w,B){return m=+m,w=w>>>0,B||a(this,m,w,2,32767,-32768),this[w]=m>>>8,this[w+1]=m&255,w+2},u.prototype.writeInt32LE=function(m,w,B){return m=+m,w=w>>>0,B||a(this,m,w,4,2147483647,-2147483648),this[w]=m&255,this[w+1]=m>>>8,this[w+2]=m>>>16,this[w+3]=m>>>24,w+4},u.prototype.writeInt32BE=function(m,w,B){return m=+m,w=w>>>0,B||a(this,m,w,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[w]=m>>>24,this[w+1]=m>>>16,this[w+2]=m>>>8,this[w+3]=m&255,w+4},u.prototype.writeBigInt64LE=Ut(function(m,w=0){return h(this,m,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Ut(function(m,w=0){return E(this,m,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function C(N,m,w,B,K,V){if(w+B>N.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function D(N,m,w,B,K){return m=+m,w=w>>>0,K||C(N,m,w,4),t.write(N,m,w,B,23,4),w+4}u.prototype.writeFloatLE=function(m,w,B){return D(this,m,w,!0,B)},u.prototype.writeFloatBE=function(m,w,B){return D(this,m,w,!1,B)};function J(N,m,w,B,K){return m=+m,w=w>>>0,K||C(N,m,w,8),t.write(N,m,w,B,52,8),w+8}u.prototype.writeDoubleLE=function(m,w,B){return J(this,m,w,!0,B)},u.prototype.writeDoubleBE=function(m,w,B){return J(this,m,w,!1,B)},u.prototype.copy=function(m,w,B,K){if(!u.isBuffer(m))throw new TypeError("argument should be a Buffer");if(B||(B=0),!K&&K!==0&&(K=this.length),w>=m.length&&(w=m.length),w||(w=0),K>0&&K<B&&(K=B),K===B||m.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),m.length-w<K-B&&(K=m.length-w+B);const V=K-B;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,B,K):Uint8Array.prototype.set.call(m,this.subarray(B,K),w),V},u.prototype.fill=function(m,w,B,K){if(typeof m=="string"){if(typeof w=="string"?(K=w,w=0,B=this.length):typeof B=="string"&&(K=B,B=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!u.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(m.length===1){const Q=m.charCodeAt(0);(K==="utf8"&&Q<128||K==="latin1")&&(m=Q)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(w<0||this.length<w||this.length<B)throw new RangeError("Out of range index");if(B<=w)return this;w=w>>>0,B=B===void 0?this.length:B>>>0,m||(m=0);let V;if(typeof m=="number")for(V=w;V<B;++V)this[V]=m;else{const Q=u.isBuffer(m)?m:u.from(m,K),Ee=Q.length;if(Ee===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(V=0;V<B-w;++V)this[V+w]=Q[V%Ee]}return this};const ie={};function he(N,m,w){ie[N]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${N}]`,this.stack,delete this.name}get code(){return N}set code(K){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:K,writable:!0})}toString(){return`${this.name} [${N}]: ${this.message}`}}}he("ERR_BUFFER_OUT_OF_BOUNDS",function(N){return N?`${N} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(N,m){return`The "${N}" argument must be of type number. Received type ${typeof m}`},TypeError),he("ERR_OUT_OF_RANGE",function(N,m,w){let B=`The value of "${N}" is out of range.`,K=w;return Number.isInteger(w)&&Math.abs(w)>2**32?K=Le(String(w)):typeof w=="bigint"&&(K=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(K=Le(K)),K+="n"),B+=` It must be ${m}. Received ${K}`,B},RangeError);function Le(N){let m="",w=N.length;const B=N[0]==="-"?1:0;for(;w>=B+4;w-=3)m=`_${N.slice(w-3,w)}${m}`;return`${N.slice(0,w)}${m}`}function Re(N,m,w){rt(m,"offset"),(N[m]===void 0||N[m+w]===void 0)&&Te(m,N.length-(w+1))}function Oe(N,m,w,B,K,V){if(N>w||N<m){const Q=typeof m=="bigint"?"n":"";let Ee;throw m===0||m===BigInt(0)?Ee=`>= 0${Q} and < 2${Q} ** ${(V+1)*8}${Q}`:Ee=`>= -(2${Q} ** ${(V+1)*8-1}${Q}) and < 2 ** ${(V+1)*8-1}${Q}`,new ie.ERR_OUT_OF_RANGE("value",Ee,N)}Re(B,K,V)}function rt(N,m){if(typeof N!="number")throw new ie.ERR_INVALID_ARG_TYPE(m,"number",N)}function Te(N,m,w){throw Math.floor(N)!==N?(rt(N,w),new ie.ERR_OUT_OF_RANGE("offset","an integer",N)):m<0?new ie.ERR_BUFFER_OUT_OF_BOUNDS:new ie.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${m}`,N)}const Ce=/[^+/0-9A-Za-z-_]/g;function lr(N){if(N=N.split("=")[0],N=N.trim().replace(Ce,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function Fe(N,m){m=m||1/0;let w;const B=N.length;let K=null;const V=[];for(let Q=0;Q<B;++Q){if(w=N.charCodeAt(Q),w>55295&&w<57344){if(!K){if(w>56319){(m-=3)>-1&&V.push(239,191,189);continue}else if(Q+1===B){(m-=3)>-1&&V.push(239,191,189);continue}K=w;continue}if(w<56320){(m-=3)>-1&&V.push(239,191,189),K=w;continue}w=(K-55296<<10|w-56320)+65536}else K&&(m-=3)>-1&&V.push(239,191,189);if(K=null,w<128){if((m-=1)<0)break;V.push(w)}else if(w<2048){if((m-=2)<0)break;V.push(w>>6|192,w&63|128)}else if(w<65536){if((m-=3)<0)break;V.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((m-=4)<0)break;V.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return V}function We(N){const m=[];for(let w=0;w<N.length;++w)m.push(N.charCodeAt(w)&255);return m}function dr(N,m){let w,B,K;const V=[];for(let Q=0;Q<N.length&&!((m-=2)<0);++Q)w=N.charCodeAt(Q),B=w>>8,K=w%256,V.push(K),V.push(B);return V}function ze(N){return e.toByteArray(lr(N))}function Ue(N,m,w,B){let K;for(K=0;K<B&&!(K+w>=m.length||K>=N.length);++K)m[K+w]=N[K];return K}function Nt(N,m){return N instanceof m||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===m.name}function He(N){return N!==N}const qe=function(){const N="0123456789abcdef",m=new Array(256);for(let w=0;w<16;++w){const B=w*16;for(let K=0;K<16;++K)m[B+K]=N[w]+N[K]}return m}();function Ut(N){return typeof BigInt>"u"?Ve:N}function Ve(){throw new Error("BigInt not supported")}}(no)),no}var fe=ls();function Yi(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Gp(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ui(r,...e){if(!Gp(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Wp(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Yi(r.outputLen),Yi(r.blockLen)}function vr(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Al(r,e){ui(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const hr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function jp(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function ro(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function tn(r,e){return r<<32-e|r>>>e}const gc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Yp(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function mc(r){for(let e=0;e<r.length;e++)r[e]=Yp(r[e])}function Zp(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function ds(r){return typeof r=="string"&&(r=Zp(r)),ui(r),r}function Xp(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];ui(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}class ma{clone(){return this._cloneInto()}}function _a(r){const e=n=>r().update(ds(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function vl(r=32){if(hr&&typeof hr.getRandomValues=="function")return hr.getRandomValues(new Uint8Array(r));if(hr&&typeof hr.randomBytes=="function")return hr.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function Jp(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),u=Number(t&i),f=n?4:0,y=n?0:4;r.setUint32(e+f,o,n),r.setUint32(e+y,u,n)}function Qp(r,e,t){return r&e^~r&t}function e0(r,e,t){return r&e^r&t^e&t}class Il extends ma{constructor(e,t,n,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ro(this.buffer)}update(e){vr(this);const{view:t,buffer:n,blockLen:s}=this;e=ds(e);const i=e.length;for(let o=0;o<i;){const u=Math.min(s-this.pos,i-o);if(u===s){const f=ro(e);for(;s<=i-o;o+=s)this.process(f,o);continue}n.set(e.subarray(o,o+u),this.pos),this.pos+=u,o+=u,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){vr(this),Al(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let S=o;S<s;S++)t[S]=0;Jp(n,s-8,BigInt(this.length*8),i),this.process(n,0);const u=ro(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const y=f/4,g=this.get();if(y>g.length)throw new Error("_sha2: outputLen bigger than state");for(let S=0;S<y;S++)u.setUint32(4*S,g[S],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:u}=this;return e.length=s,e.pos=u,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(n),e}}const Ii=BigInt(2**32-1),Go=BigInt(32);function Ol(r,e=!1){return e?{h:Number(r&Ii),l:Number(r>>Go&Ii)}:{h:Number(r>>Go&Ii)|0,l:Number(r&Ii)|0}}function Sl(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=Ol(r[s],e);[t[s],n[s]]=[i,o]}return[t,n]}const t0=(r,e)=>BigInt(r>>>0)<<Go|BigInt(e>>>0),n0=(r,e,t)=>r>>>t,r0=(r,e,t)=>r<<32-t|e>>>t,i0=(r,e,t)=>r>>>t|e<<32-t,s0=(r,e,t)=>r<<32-t|e>>>t,o0=(r,e,t)=>r<<64-t|e>>>t-32,a0=(r,e,t)=>r>>>t-32|e<<64-t,c0=(r,e)=>e,u0=(r,e)=>r,Tl=(r,e,t)=>r<<t|e>>>32-t,Nl=(r,e,t)=>e<<t|r>>>32-t,kl=(r,e,t)=>e<<t-32|r>>>64-t,xl=(r,e,t)=>r<<t-32|e>>>64-t;function l0(r,e,t,n){const s=(e>>>0)+(n>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const d0=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),h0=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,f0=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),p0=(r,e,t,n,s)=>e+t+n+s+(r/2**32|0)|0,y0=(r,e,t,n,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),g0=(r,e,t,n,s,i)=>e+t+n+s+i+(r/2**32|0)|0,Ae={fromBig:Ol,split:Sl,toBig:t0,shrSH:n0,shrSL:r0,rotrSH:i0,rotrSL:s0,rotrBH:o0,rotrBL:a0,rotr32H:c0,rotr32L:u0,rotlSH:Tl,rotlSL:Nl,rotlBH:kl,rotlBL:xl,add:l0,add3L:d0,add3H:h0,add4L:f0,add4H:p0,add5H:g0,add5L:y0},[m0,_0]=Ae.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),On=new Uint32Array(80),Sn=new Uint32Array(80);class w0 extends Il{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:i,Cl:o,Dh:u,Dl:f,Eh:y,El:g,Fh:S,Fl:I,Gh:R,Gl:T,Hh:x,Hl:O}=this;return[e,t,n,s,i,o,u,f,y,g,S,I,R,T,x,O]}set(e,t,n,s,i,o,u,f,y,g,S,I,R,T,x,O){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=u|0,this.Dl=f|0,this.Eh=y|0,this.El=g|0,this.Fh=S|0,this.Fl=I|0,this.Gh=R|0,this.Gl=T|0,this.Hh=x|0,this.Hl=O|0}process(e,t){for(let M=0;M<16;M++,t+=4)On[M]=e.getUint32(t),Sn[M]=e.getUint32(t+=4);for(let M=16;M<80;M++){const q=On[M-15]|0,G=Sn[M-15]|0,te=Ae.rotrSH(q,G,1)^Ae.rotrSH(q,G,8)^Ae.shrSH(q,G,7),X=Ae.rotrSL(q,G,1)^Ae.rotrSL(q,G,8)^Ae.shrSL(q,G,7),ee=On[M-2]|0,$=Sn[M-2]|0,z=Ae.rotrSH(ee,$,19)^Ae.rotrBH(ee,$,61)^Ae.shrSH(ee,$,6),H=Ae.rotrSL(ee,$,19)^Ae.rotrBL(ee,$,61)^Ae.shrSL(ee,$,6),P=Ae.add4L(X,H,Sn[M-7],Sn[M-16]),A=Ae.add4H(P,te,z,On[M-7],On[M-16]);On[M]=A|0,Sn[M]=P|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:u,Cl:f,Dh:y,Dl:g,Eh:S,El:I,Fh:R,Fl:T,Gh:x,Gl:O,Hh:L,Hl:F}=this;for(let M=0;M<80;M++){const q=Ae.rotrSH(S,I,14)^Ae.rotrSH(S,I,18)^Ae.rotrBH(S,I,41),G=Ae.rotrSL(S,I,14)^Ae.rotrSL(S,I,18)^Ae.rotrBL(S,I,41),te=S&R^~S&x,X=I&T^~I&O,ee=Ae.add5L(F,G,X,_0[M],Sn[M]),$=Ae.add5H(ee,L,q,te,m0[M],On[M]),z=ee|0,H=Ae.rotrSH(n,s,28)^Ae.rotrBH(n,s,34)^Ae.rotrBH(n,s,39),P=Ae.rotrSL(n,s,28)^Ae.rotrBL(n,s,34)^Ae.rotrBL(n,s,39),A=n&i^n&u^i&u,c=s&o^s&f^o&f;L=x|0,F=O|0,x=R|0,O=T|0,R=S|0,T=I|0,{h:S,l:I}=Ae.add(y|0,g|0,$|0,z|0),y=u|0,g=f|0,u=i|0,f=o|0,i=n|0,o=s|0;const p=Ae.add3L(z,P,c);n=Ae.add3H(p,$,H,A),s=p|0}({h:n,l:s}=Ae.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Ae.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:u,l:f}=Ae.add(this.Ch|0,this.Cl|0,u|0,f|0),{h:y,l:g}=Ae.add(this.Dh|0,this.Dl|0,y|0,g|0),{h:S,l:I}=Ae.add(this.Eh|0,this.El|0,S|0,I|0),{h:R,l:T}=Ae.add(this.Fh|0,this.Fl|0,R|0,T|0),{h:x,l:O}=Ae.add(this.Gh|0,this.Gl|0,x|0,O|0),{h:L,l:F}=Ae.add(this.Hh|0,this.Hl|0,L|0,F|0),this.set(n,s,i,o,u,f,y,g,S,I,R,T,x,O,L,F)}roundClean(){On.fill(0),Sn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const b0=_a(()=>new w0);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hs=BigInt(0),fs=BigInt(1),R0=BigInt(2);function er(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function li(r){if(!er(r))throw new Error("Uint8Array expected")}function An(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}const E0=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function tr(r){li(r);let e="";for(let t=0;t<r.length;t++)e+=E0[r[t]];return e}function pr(r){const e=r.toString(16);return e.length&1?"0"+e:e}function wa(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?hs:BigInt("0x"+r)}const hn={_0:48,_9:57,A:65,F:70,a:97,f:102};function _c(r){if(r>=hn._0&&r<=hn._9)return r-hn._0;if(r>=hn.A&&r<=hn.F)return r-(hn.A-10);if(r>=hn.a&&r<=hn.f)return r-(hn.a-10)}function Ir(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=_c(r.charCodeAt(i)),u=_c(r.charCodeAt(i+1));if(o===void 0||u===void 0){const f=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+i)}n[s]=o*16+u}return n}function Qn(r){return wa(tr(r))}function br(r){return li(r),wa(tr(Uint8Array.from(r).reverse()))}function Or(r,e){return Ir(r.toString(16).padStart(e*2,"0"))}function Jr(r,e){return Or(r,e).reverse()}function A0(r){return Ir(pr(r))}function Rt(r,e,t){let n;if(typeof e=="string")try{n=Ir(e)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(er(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return n}function nr(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];li(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}function v0(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function I0(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}const io=r=>typeof r=="bigint"&&hs<=r;function ps(r,e,t){return io(r)&&io(e)&&io(t)&&e<=r&&r<t}function Wt(r,e,t,n){if(!ps(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function Cl(r){let e;for(e=0;r>hs;r>>=fs,e+=1);return e}function O0(r,e){return r>>BigInt(e)&fs}function S0(r,e,t){return r|(t?fs:hs)<<BigInt(e)}const ba=r=>(R0<<BigInt(r-1))-fs,so=r=>new Uint8Array(r),wc=r=>Uint8Array.from(r);function Bl(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=so(r),s=so(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},u=(...S)=>t(s,n,...S),f=(S=so())=>{s=u(wc([0]),S),n=u(),S.length!==0&&(s=u(wc([1]),S),n=u())},y=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let S=0;const I=[];for(;S<e;){n=u();const R=n.slice();I.push(R),S+=n.length}return nr(...I)};return(S,I)=>{o(),f(S);let R;for(;!(R=I(y()));)f();return o(),R}}const T0={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||er(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Mr(r,e,t={}){const n=(s,i,o)=>{const u=T0[i];if(typeof u!="function")throw new Error("invalid validator function");const f=r[s];if(!(o&&f===void 0)&&!u(f,r))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+f)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(t))n(s,i,!0);return r}const N0=()=>{throw new Error("not implemented")};function Qr(r){const e=new WeakMap;return(t,...n)=>{const s=e.get(t);if(s!==void 0)return s;const i=r(t,...n);return e.set(t,i),i}}const k0=Object.freeze(Object.defineProperty({__proto__:null,aInRange:Wt,abool:An,abytes:li,bitGet:O0,bitLen:Cl,bitMask:ba,bitSet:S0,bytesToHex:tr,bytesToNumberBE:Qn,bytesToNumberLE:br,concatBytes:nr,createHmacDrbg:Bl,ensureBytes:Rt,equalBytes:v0,hexToBytes:Ir,hexToNumber:wa,inRange:ps,isBytes:er,memoized:Qr,notImplemented:N0,numberToBytesBE:Or,numberToBytesLE:Jr,numberToHexUnpadded:pr,numberToVarBytesBE:A0,utf8ToBytes:I0,validateObject:Mr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tt=BigInt(0),Xe=BigInt(1),Vn=BigInt(2),x0=BigInt(3),Wo=BigInt(4),bc=BigInt(5),Rc=BigInt(8);function Ye(r,e){const t=r%e;return t>=Tt?t:e+t}function C0(r,e,t){if(e<Tt)throw new Error("invalid exponent, negatives unsupported");if(t<=Tt)throw new Error("invalid modulus");if(t===Xe)return Tt;let n=Xe;for(;e>Tt;)e&Xe&&(n=n*r%t),r=r*r%t,e>>=Xe;return n}function Qe(r,e,t){let n=r;for(;e-- >Tt;)n*=n,n%=t;return n}function jo(r,e){if(r===Tt)throw new Error("invert: expected non-zero number");if(e<=Tt)throw new Error("invert: expected positive modulus, got "+e);let t=Ye(r,e),n=e,s=Tt,i=Xe;for(;t!==Tt;){const u=n/t,f=n%t,y=s-i*u;n=t,t=f,s=i,i=y}if(n!==Xe)throw new Error("invert: does not exist");return Ye(s,e)}function B0(r){const e=(r-Xe)/Vn;let t,n,s;for(t=r-Xe,n=0;t%Vn===Tt;t/=Vn,n++);for(s=Vn;s<r&&C0(s,e,r)!==r-Xe;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(r+Xe)/Wo;return function(f,y){const g=f.pow(y,o);if(!f.eql(f.sqr(g),y))throw new Error("Cannot find square root");return g}}const i=(t+Xe)/Vn;return function(u,f){if(u.pow(f,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let y=n,g=u.pow(u.mul(u.ONE,s),t),S=u.pow(f,i),I=u.pow(f,t);for(;!u.eql(I,u.ONE);){if(u.eql(I,u.ZERO))return u.ZERO;let R=1;for(let x=u.sqr(I);R<y&&!u.eql(x,u.ONE);R++)x=u.sqr(x);const T=u.pow(g,Xe<<BigInt(y-R-1));g=u.sqr(T),S=u.mul(S,T),I=u.mul(I,g),y=R}return S}}function L0(r){if(r%Wo===x0){const e=(r+Xe)/Wo;return function(n,s){const i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%Rc===bc){const e=(r-bc)/Rc;return function(n,s){const i=n.mul(s,Vn),o=n.pow(i,e),u=n.mul(s,o),f=n.mul(n.mul(u,Vn),o),y=n.mul(u,n.sub(f,n.ONE));if(!n.eql(n.sqr(y),s))throw new Error("Cannot find square root");return y}}return B0(r)}const M0=(r,e)=>(Ye(r,e)&Xe)===Xe,P0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function U0(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=P0.reduce((n,s)=>(n[s]="function",n),e);return Mr(r,t)}function D0(r,e,t){if(t<Tt)throw new Error("invalid exponent, negatives unsupported");if(t===Tt)return r.ONE;if(t===Xe)return e;let n=r.ONE,s=e;for(;t>Tt;)t&Xe&&(n=r.mul(n,s)),s=r.sqr(s),t>>=Xe;return n}function H0(r,e){const t=new Array(e.length),n=e.reduce((i,o,u)=>r.is0(o)?i:(t[u]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return e.reduceRight((i,o,u)=>r.is0(o)?i:(t[u]=r.mul(i,t[u]),r.mul(i,o)),s),t}function Ll(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function ys(r,e,t=!1,n={}){if(r<=Tt)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:s,nByteLength:i}=Ll(r,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const u=Object.freeze({ORDER:r,isLE:t,BITS:s,BYTES:i,MASK:ba(s),ZERO:Tt,ONE:Xe,create:f=>Ye(f,r),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return Tt<=f&&f<r},is0:f=>f===Tt,isOdd:f=>(f&Xe)===Xe,neg:f=>Ye(-f,r),eql:(f,y)=>f===y,sqr:f=>Ye(f*f,r),add:(f,y)=>Ye(f+y,r),sub:(f,y)=>Ye(f-y,r),mul:(f,y)=>Ye(f*y,r),pow:(f,y)=>D0(u,f,y),div:(f,y)=>Ye(f*jo(y,r),r),sqrN:f=>f*f,addN:(f,y)=>f+y,subN:(f,y)=>f-y,mulN:(f,y)=>f*y,inv:f=>jo(f,r),sqrt:n.sqrt||(f=>(o||(o=L0(r)),o(u,f))),invertBatch:f=>H0(u,f),cmov:(f,y,g)=>g?y:f,toBytes:f=>t?Jr(f,i):Or(f,i),fromBytes:f=>{if(f.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+f.length);return t?br(f):Qn(f)}});return Object.freeze(u)}function Ml(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function Pl(r){const e=Ml(r);return e+Math.ceil(e/2)}function F0(r,e,t=!1){const n=r.length,s=Ml(e),i=Pl(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=t?br(r):Qn(r),u=Ye(o,e-Xe)+Xe;return t?Jr(u,s):Or(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ec=BigInt(0),Oi=BigInt(1);function oo(r,e){const t=e.negate();return r?t:e}function Ul(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function ao(r,e){Ul(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1);return{windows:t,windowSize:n}}function z0(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function $0(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const co=new WeakMap,Dl=new WeakMap;function uo(r){return Dl.get(r)||1}function Hl(r,e){return{constTimeNegate:oo,hasPrecomputes(t){return uo(t)!==1},unsafeLadder(t,n,s=r.ZERO){let i=t;for(;n>Ec;)n&Oi&&(s=s.add(i)),i=i.double(),n>>=Oi;return s},precomputeWindow(t,n){const{windows:s,windowSize:i}=ao(n,e),o=[];let u=t,f=u;for(let y=0;y<s;y++){f=u,o.push(f);for(let g=1;g<i;g++)f=f.add(u),o.push(f);u=f.double()}return o},wNAF(t,n,s){const{windows:i,windowSize:o}=ao(t,e);let u=r.ZERO,f=r.BASE;const y=BigInt(2**t-1),g=2**t,S=BigInt(t);for(let I=0;I<i;I++){const R=I*o;let T=Number(s&y);s>>=S,T>o&&(T-=g,s+=Oi);const x=R,O=R+Math.abs(T)-1,L=I%2!==0,F=T<0;T===0?f=f.add(oo(L,n[x])):u=u.add(oo(F,n[O]))}return{p:u,f}},wNAFUnsafe(t,n,s,i=r.ZERO){const{windows:o,windowSize:u}=ao(t,e),f=BigInt(2**t-1),y=2**t,g=BigInt(t);for(let S=0;S<o;S++){const I=S*u;if(s===Ec)break;let R=Number(s&f);if(s>>=g,R>u&&(R-=y,s+=Oi),R===0)continue;let T=n[I+Math.abs(R)-1];R<0&&(T=T.negate()),i=i.add(T)}return i},getPrecomputes(t,n,s){let i=co.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&co.set(n,s(i))),i},wNAFCached(t,n,s){const i=uo(t);return this.wNAF(i,this.getPrecomputes(i,t,s),n)},wNAFCachedUnsafe(t,n,s,i){const o=uo(t);return o===1?this.unsafeLadder(t,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),n,i)},setWindowSize(t,n){Ul(n,e),Dl.set(t,n),co.delete(t)}}}function Fl(r,e,t,n){if(z0(t,r),$0(n,e),t.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=r.ZERO,i=Cl(BigInt(t.length)),o=i>12?i-3:i>4?i-2:i?2:1,u=(1<<o)-1,f=new Array(u+1).fill(s),y=Math.floor((e.BITS-1)/o)*o;let g=s;for(let S=y;S>=0;S-=o){f.fill(s);for(let R=0;R<n.length;R++){const T=n[R],x=Number(T>>BigInt(S)&BigInt(u));f[x]=f[x].add(t[R])}let I=s;for(let R=f.length-1,T=s;R>0;R--)T=T.add(f[R]),I=I.add(T);if(g=g.add(I),S!==0)for(let R=0;R<o;R++)g=g.double()}return g}function Ra(r){return U0(r.Fp),Mr(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ll(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xt=BigInt(0),Dt=BigInt(1),Si=BigInt(2),K0=BigInt(8),q0={zip215:!0};function V0(r){const e=Ra(r);return Mr(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function G0(r){const e=V0(r),{Fp:t,n,prehash:s,hash:i,randomBytes:o,nByteLength:u,h:f}=e,y=Si<<BigInt(u*8)-Dt,g=t.create,S=ys(e.n,e.nBitLength),I=e.uvRatio||((b,v)=>{try{return{isValid:!0,value:t.sqrt(b*t.inv(v))}}catch{return{isValid:!1,value:Xt}}}),R=e.adjustScalarBytes||(b=>b),T=e.domain||((b,v,k)=>{if(An("phflag",k),v.length||k)throw new Error("Contexts/pre-hash are not supported");return b});function x(b,v){Wt("coordinate "+b,v,Xt,y)}function O(b){if(!(b instanceof M))throw new Error("ExtendedPoint expected")}const L=Qr((b,v)=>{const{ex:k,ey:_,ez:d}=b,l=b.is0();v==null&&(v=l?K0:t.inv(d));const a=g(k*v),h=g(_*v),E=g(d*v);if(l)return{x:Xt,y:Dt};if(E!==Dt)throw new Error("invZ was invalid");return{x:a,y:h}}),F=Qr(b=>{const{a:v,d:k}=e;if(b.is0())throw new Error("bad point: ZERO");const{ex:_,ey:d,ez:l,et:a}=b,h=g(_*_),E=g(d*d),C=g(l*l),D=g(C*C),J=g(h*v),ie=g(C*g(J+E)),he=g(D+g(k*g(h*E)));if(ie!==he)throw new Error("bad point: equation left != right (1)");const Le=g(_*d),Re=g(l*a);if(Le!==Re)throw new Error("bad point: equation left != right (2)");return!0});class M{constructor(v,k,_,d){this.ex=v,this.ey=k,this.ez=_,this.et=d,x("x",v),x("y",k),x("z",_),x("t",d),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof M)throw new Error("extended point not allowed");const{x:k,y:_}=v||{};return x("x",k),x("y",_),new M(k,_,Dt,g(k*_))}static normalizeZ(v){const k=t.invertBatch(v.map(_=>_.ez));return v.map((_,d)=>_.toAffine(k[d])).map(M.fromAffine)}static msm(v,k){return Fl(M,S,v,k)}_setWindowSize(v){te.setWindowSize(this,v)}assertValidity(){F(this)}equals(v){O(v);const{ex:k,ey:_,ez:d}=this,{ex:l,ey:a,ez:h}=v,E=g(k*h),C=g(l*d),D=g(_*h),J=g(a*d);return E===C&&D===J}is0(){return this.equals(M.ZERO)}negate(){return new M(g(-this.ex),this.ey,this.ez,g(-this.et))}double(){const{a:v}=e,{ex:k,ey:_,ez:d}=this,l=g(k*k),a=g(_*_),h=g(Si*g(d*d)),E=g(v*l),C=k+_,D=g(g(C*C)-l-a),J=E+a,ie=J-h,he=E-a,Le=g(D*ie),Re=g(J*he),Oe=g(D*he),rt=g(ie*J);return new M(Le,Re,rt,Oe)}add(v){O(v);const{a:k,d:_}=e,{ex:d,ey:l,ez:a,et:h}=this,{ex:E,ey:C,ez:D,et:J}=v;if(k===BigInt(-1)){const ze=g((l-d)*(C+E)),Ue=g((l+d)*(C-E)),Nt=g(Ue-ze);if(Nt===Xt)return this.double();const He=g(a*Si*J),qe=g(h*Si*D),Ut=qe+He,Ve=Ue+ze,N=qe-He,m=g(Ut*Nt),w=g(Ve*N),B=g(Ut*N),K=g(Nt*Ve);return new M(m,w,K,B)}const ie=g(d*E),he=g(l*C),Le=g(h*_*J),Re=g(a*D),Oe=g((d+l)*(E+C)-ie-he),rt=Re-Le,Te=Re+Le,Ce=g(he-k*ie),lr=g(Oe*rt),Fe=g(Te*Ce),We=g(Oe*Ce),dr=g(rt*Te);return new M(lr,Fe,dr,We)}subtract(v){return this.add(v.negate())}wNAF(v){return te.wNAFCached(this,v,M.normalizeZ)}multiply(v){const k=v;Wt("scalar",k,Dt,n);const{p:_,f:d}=this.wNAF(k);return M.normalizeZ([_,d])[0]}multiplyUnsafe(v,k=M.ZERO){const _=v;return Wt("scalar",_,Xt,n),_===Xt?G:this.is0()||_===Dt?this:te.wNAFCachedUnsafe(this,_,M.normalizeZ,k)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return te.unsafeLadder(this,n).is0()}toAffine(v){return L(this,v)}clearCofactor(){const{h:v}=e;return v===Dt?this:this.multiplyUnsafe(v)}static fromHex(v,k=!1){const{d:_,a:d}=e,l=t.BYTES;v=Rt("pointHex",v,l),An("zip215",k);const a=v.slice(),h=v[l-1];a[l-1]=h&-129;const E=br(a),C=k?y:t.ORDER;Wt("pointHex.y",E,Xt,C);const D=g(E*E),J=g(D-Dt),ie=g(_*D-d);let{isValid:he,value:Le}=I(J,ie);if(!he)throw new Error("Point.fromHex: invalid y coordinate");const Re=(Le&Dt)===Dt,Oe=(h&128)!==0;if(!k&&Le===Xt&&Oe)throw new Error("Point.fromHex: x=0 and x_0=1");return Oe!==Re&&(Le=g(-Le)),M.fromAffine({x:Le,y:E})}static fromPrivateKey(v){return $(v).point}toRawBytes(){const{x:v,y:k}=this.toAffine(),_=Jr(k,t.BYTES);return _[_.length-1]|=v&Dt?128:0,_}toHex(){return tr(this.toRawBytes())}}M.BASE=new M(e.Gx,e.Gy,Dt,g(e.Gx*e.Gy)),M.ZERO=new M(Xt,Dt,Dt,Xt);const{BASE:q,ZERO:G}=M,te=Hl(M,u*8);function X(b){return Ye(b,n)}function ee(b){return X(br(b))}function $(b){const v=t.BYTES;b=Rt("private key",b,v);const k=Rt("hashed private key",i(b),2*v),_=R(k.slice(0,v)),d=k.slice(v,2*v),l=ee(_),a=q.multiply(l),h=a.toRawBytes();return{head:_,prefix:d,scalar:l,point:a,pointBytes:h}}function z(b){return $(b).pointBytes}function H(b=new Uint8Array,...v){const k=nr(...v);return ee(i(T(k,Rt("context",b),!!s)))}function P(b,v,k={}){b=Rt("message",b),s&&(b=s(b));const{prefix:_,scalar:d,pointBytes:l}=$(v),a=H(k.context,_,b),h=q.multiply(a).toRawBytes(),E=H(k.context,h,l,b),C=X(a+E*d);Wt("signature.s",C,Xt,n);const D=nr(h,Jr(C,t.BYTES));return Rt("result",D,t.BYTES*2)}const A=q0;function c(b,v,k,_=A){const{context:d,zip215:l}=_,a=t.BYTES;b=Rt("signature",b,2*a),v=Rt("message",v),k=Rt("publicKey",k,a),l!==void 0&&An("zip215",l),s&&(v=s(v));const h=br(b.slice(a,2*a));let E,C,D;try{E=M.fromHex(k,l),C=M.fromHex(b.slice(0,a),l),D=q.multiplyUnsafe(h)}catch{return!1}if(!l&&E.isSmallOrder())return!1;const J=H(d,C.toRawBytes(),E.toRawBytes(),v);return C.add(E.multiplyUnsafe(J)).subtract(D).clearCofactor().equals(M.ZERO)}return q._setWindowSize(8),{CURVE:e,getPublicKey:z,sign:P,verify:c,ExtendedPoint:M,utils:{getExtendedPublicKey:$,randomPrivateKey:()=>o(t.BYTES),precompute(b=8,v=M.BASE){return v._setWindowSize(b),v.multiply(BigInt(3)),v}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ea=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ac=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const W0=BigInt(1),vc=BigInt(2);BigInt(3);const j0=BigInt(5),Y0=BigInt(8);function Z0(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),s=BigInt(80),i=Ea,u=r*r%i*r%i,f=Qe(u,vc,i)*u%i,y=Qe(f,W0,i)*r%i,g=Qe(y,j0,i)*y%i,S=Qe(g,e,i)*g%i,I=Qe(S,t,i)*S%i,R=Qe(I,n,i)*I%i,T=Qe(R,s,i)*R%i,x=Qe(T,s,i)*R%i,O=Qe(x,e,i)*g%i;return{pow_p_5_8:Qe(O,vc,i)*r%i,b2:u}}function X0(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function J0(r,e){const t=Ea,n=Ye(e*e*e,t),s=Ye(n*n*e,t),i=Z0(r*s).pow_p_5_8;let o=Ye(r*n*i,t);const u=Ye(e*o*o,t),f=o,y=Ye(o*Ac,t),g=u===r,S=u===Ye(-r,t),I=u===Ye(-r*Ac,t);return g&&(o=f),(S||I)&&(o=y),M0(o,t)&&(o=Ye(-o,t)),{isValid:g||S,value:o}}const Q0=ys(Ea,void 0,!0),ey={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Q0,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Y0,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:b0,randomBytes:vl,adjustScalarBytes:X0,uvRatio:J0},Pr=G0(ey);var Ki={exports:{}},ty=Ki.exports,Ic;function Aa(){return Ic||(Ic=1,function(r){(function(e,t){function n(A,c){if(!A)throw new Error(c||"Assertion failed")}function s(A,c){A.super_=c;var p=function(){};p.prototype=c.prototype,A.prototype=new p,A.prototype.constructor=A}function i(A,c,p){if(i.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((c==="le"||c==="be")&&(p=c,c=10),this._init(A||0,c||10,p||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=al.Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,p){return c.cmp(p)>0?c:p},i.min=function(c,p){return c.cmp(p)<0?c:p},i.prototype._init=function(c,p,b){if(typeof c=="number")return this._initNumber(c,p,b);if(typeof c=="object")return this._initArray(c,p,b);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),c=c.toString().replace(/\s+/g,"");var v=0;c[0]==="-"&&(v++,this.negative=1),v<c.length&&(p===16?this._parseHex(c,v,b):(this._parseBase(c,p,v),b==="le"&&this._initArray(this.toArray(),p,b)))},i.prototype._initNumber=function(c,p,b){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),p,b)},i.prototype._initArray=function(c,p,b){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var k,_,d=0;if(b==="be")for(v=c.length-1,k=0;v>=0;v-=3)_=c[v]|c[v-1]<<8|c[v-2]<<16,this.words[k]|=_<<d&67108863,this.words[k+1]=_>>>26-d&67108863,d+=24,d>=26&&(d-=26,k++);else if(b==="le")for(v=0,k=0;v<c.length;v+=3)_=c[v]|c[v+1]<<8|c[v+2]<<16,this.words[k]|=_<<d&67108863,this.words[k+1]=_>>>26-d&67108863,d+=24,d>=26&&(d-=26,k++);return this._strip()};function u(A,c){var p=A.charCodeAt(c);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+A)}function f(A,c,p){var b=u(A,p);return p-1>=c&&(b|=u(A,p-1)<<4),b}i.prototype._parseHex=function(c,p,b){this.length=Math.ceil((c.length-p)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var k=0,_=0,d;if(b==="be")for(v=c.length-1;v>=p;v-=2)d=f(c,p,v)<<k,this.words[_]|=d&67108863,k>=18?(k-=18,_+=1,this.words[_]|=d>>>26):k+=8;else{var l=c.length-p;for(v=l%2===0?p+1:p;v<c.length;v+=2)d=f(c,p,v)<<k,this.words[_]|=d&67108863,k>=18?(k-=18,_+=1,this.words[_]|=d>>>26):k+=8}this._strip()};function y(A,c,p,b){for(var v=0,k=0,_=Math.min(A.length,p),d=c;d<_;d++){var l=A.charCodeAt(d)-48;v*=b,l>=49?k=l-49+10:l>=17?k=l-17+10:k=l,n(l>=0&&k<b,"Invalid character"),v+=k}return v}i.prototype._parseBase=function(c,p,b){this.words=[0],this.length=1;for(var v=0,k=1;k<=67108863;k*=p)v++;v--,k=k/p|0;for(var _=c.length-b,d=_%v,l=Math.min(_,_-d)+b,a=0,h=b;h<l;h+=v)a=y(c,h,h+v,p),this.imuln(k),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(d!==0){var E=1;for(a=y(c,h,c.length,p),h=0;h<d;h++)E*=p;this.imuln(E),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}this._strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var p=0;p<this.length;p++)c.words[p]=this.words[p];c.length=this.length,c.negative=this.negative,c.red=this.red};function g(A,c){A.words=c.words,A.length=c.length,A.negative=c.negative,A.red=c.red}if(i.prototype._move=function(c){g(c,this)},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=S}catch{i.prototype.inspect=S}else i.prototype.inspect=S;function S(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,p){c=c||10,p=p|0||1;var b;if(c===16||c==="hex"){b="";for(var v=0,k=0,_=0;_<this.length;_++){var d=this.words[_],l=((d<<v|k)&16777215).toString(16);k=d>>>24-v&16777215,v+=2,v>=26&&(v-=26,_--),k!==0||_!==this.length-1?b=I[6-l.length]+l+b:b=l+b}for(k!==0&&(b=k.toString(16)+b);b.length%p!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(c===(c|0)&&c>=2&&c<=36){var a=R[c],h=T[c];b="";var E=this.clone();for(E.negative=0;!E.isZero();){var C=E.modrn(h).toString(c);E=E.idivn(h),E.isZero()?b=C+b:b=I[a-C.length]+C+b}for(this.isZero()&&(b="0"+b);b.length%p!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(c,p){return this.toArrayLike(o,c,p)}),i.prototype.toArray=function(c,p){return this.toArrayLike(Array,c,p)};var x=function(c,p){return c.allocUnsafe?c.allocUnsafe(p):new c(p)};i.prototype.toArrayLike=function(c,p,b){this._strip();var v=this.byteLength(),k=b||Math.max(1,v);n(v<=k,"byte array longer than desired length"),n(k>0,"Requested array length <= 0");var _=x(c,k),d=p==="le"?"LE":"BE";return this["_toArrayLike"+d](_,v),_},i.prototype._toArrayLikeLE=function(c,p){for(var b=0,v=0,k=0,_=0;k<this.length;k++){var d=this.words[k]<<_|v;c[b++]=d&255,b<c.length&&(c[b++]=d>>8&255),b<c.length&&(c[b++]=d>>16&255),_===6?(b<c.length&&(c[b++]=d>>24&255),v=0,_=0):(v=d>>>24,_+=2)}if(b<c.length)for(c[b++]=v;b<c.length;)c[b++]=0},i.prototype._toArrayLikeBE=function(c,p){for(var b=c.length-1,v=0,k=0,_=0;k<this.length;k++){var d=this.words[k]<<_|v;c[b--]=d&255,b>=0&&(c[b--]=d>>8&255),b>=0&&(c[b--]=d>>16&255),_===6?(b>=0&&(c[b--]=d>>24&255),v=0,_=0):(v=d>>>24,_+=2)}if(b>=0)for(c[b--]=v;b>=0;)c[b--]=0},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var p=c,b=0;return p>=4096&&(b+=13,p>>>=13),p>=64&&(b+=7,p>>>=7),p>=8&&(b+=4,p>>>=4),p>=2&&(b+=2,p>>>=2),b+p},i.prototype._zeroBits=function(c){if(c===0)return 26;var p=c,b=0;return(p&8191)===0&&(b+=13,p>>>=13),(p&127)===0&&(b+=7,p>>>=7),(p&15)===0&&(b+=4,p>>>=4),(p&3)===0&&(b+=2,p>>>=2),(p&1)===0&&b++,b},i.prototype.bitLength=function(){var c=this.words[this.length-1],p=this._countBits(c);return(this.length-1)*26+p};function O(A){for(var c=new Array(A.bitLength()),p=0;p<c.length;p++){var b=p/26|0,v=p%26;c[p]=A.words[b]>>>v&1}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,p=0;p<this.length;p++){var b=this._zeroBits(this.words[p]);if(c+=b,b!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var p=0;p<c.length;p++)this.words[p]=this.words[p]|c.words[p];return this._strip()},i.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var p;this.length>c.length?p=c:p=this;for(var b=0;b<p.length;b++)this.words[b]=this.words[b]&c.words[b];return this.length=p.length,this._strip()},i.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var p,b;this.length>c.length?(p=this,b=c):(p=c,b=this);for(var v=0;v<b.length;v++)this.words[v]=p.words[v]^b.words[v];if(this!==p)for(;v<p.length;v++)this.words[v]=p.words[v];return this.length=p.length,this._strip()},i.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var p=Math.ceil(c/26)|0,b=c%26;this._expand(p),b>0&&p--;for(var v=0;v<p;v++)this.words[v]=~this.words[v]&67108863;return b>0&&(this.words[v]=~this.words[v]&67108863>>26-b),this._strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,p){n(typeof c=="number"&&c>=0);var b=c/26|0,v=c%26;return this._expand(b+1),p?this.words[b]=this.words[b]|1<<v:this.words[b]=this.words[b]&~(1<<v),this._strip()},i.prototype.iadd=function(c){var p;if(this.negative!==0&&c.negative===0)return this.negative=0,p=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,p=this.isub(c),c.negative=1,p._normSign();var b,v;this.length>c.length?(b=this,v=c):(b=c,v=this);for(var k=0,_=0;_<v.length;_++)p=(b.words[_]|0)+(v.words[_]|0)+k,this.words[_]=p&67108863,k=p>>>26;for(;k!==0&&_<b.length;_++)p=(b.words[_]|0)+k,this.words[_]=p&67108863,k=p>>>26;if(this.length=b.length,k!==0)this.words[this.length]=k,this.length++;else if(b!==this)for(;_<b.length;_++)this.words[_]=b.words[_];return this},i.prototype.add=function(c){var p;return c.negative!==0&&this.negative===0?(c.negative=0,p=this.sub(c),c.negative^=1,p):c.negative===0&&this.negative!==0?(this.negative=0,p=c.sub(this),this.negative=1,p):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var p=this.iadd(c);return c.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var b=this.cmp(c);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,k;b>0?(v=this,k=c):(v=c,k=this);for(var _=0,d=0;d<k.length;d++)p=(v.words[d]|0)-(k.words[d]|0)+_,_=p>>26,this.words[d]=p&67108863;for(;_!==0&&d<v.length;d++)p=(v.words[d]|0)+_,_=p>>26,this.words[d]=p&67108863;if(_===0&&d<v.length&&v!==this)for(;d<v.length;d++)this.words[d]=v.words[d];return this.length=Math.max(this.length,d),v!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function L(A,c,p){p.negative=c.negative^A.negative;var b=A.length+c.length|0;p.length=b,b=b-1|0;var v=A.words[0]|0,k=c.words[0]|0,_=v*k,d=_&67108863,l=_/67108864|0;p.words[0]=d;for(var a=1;a<b;a++){for(var h=l>>>26,E=l&67108863,C=Math.min(a,c.length-1),D=Math.max(0,a-A.length+1);D<=C;D++){var J=a-D|0;v=A.words[J]|0,k=c.words[D]|0,_=v*k+E,h+=_/67108864|0,E=_&67108863}p.words[a]=E|0,l=h|0}return l!==0?p.words[a]=l|0:p.length--,p._strip()}var F=function(c,p,b){var v=c.words,k=p.words,_=b.words,d=0,l,a,h,E=v[0]|0,C=E&8191,D=E>>>13,J=v[1]|0,ie=J&8191,he=J>>>13,Le=v[2]|0,Re=Le&8191,Oe=Le>>>13,rt=v[3]|0,Te=rt&8191,Ce=rt>>>13,lr=v[4]|0,Fe=lr&8191,We=lr>>>13,dr=v[5]|0,ze=dr&8191,Ue=dr>>>13,Nt=v[6]|0,He=Nt&8191,qe=Nt>>>13,Ut=v[7]|0,Ve=Ut&8191,N=Ut>>>13,m=v[8]|0,w=m&8191,B=m>>>13,K=v[9]|0,V=K&8191,Q=K>>>13,Ee=k[0]|0,we=Ee&8191,_e=Ee>>>13,Ge=k[1]|0,me=Ge&8191,it=Ge>>>13,Wa=k[2]|0,st=Wa&8191,ot=Wa>>>13,ja=k[3]|0,at=ja&8191,ct=ja>>>13,Ya=k[4]|0,ut=Ya&8191,lt=Ya>>>13,Za=k[5]|0,dt=Za&8191,ht=Za>>>13,Xa=k[6]|0,ft=Xa&8191,pt=Xa>>>13,Ja=k[7]|0,yt=Ja&8191,gt=Ja>>>13,Qa=k[8]|0,mt=Qa&8191,_t=Qa>>>13,ec=k[9]|0,wt=ec&8191,bt=ec>>>13;b.negative=c.negative^p.negative,b.length=19,l=Math.imul(C,we),a=Math.imul(C,_e),a=a+Math.imul(D,we)|0,h=Math.imul(D,_e);var Ls=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,l=Math.imul(ie,we),a=Math.imul(ie,_e),a=a+Math.imul(he,we)|0,h=Math.imul(he,_e),l=l+Math.imul(C,me)|0,a=a+Math.imul(C,it)|0,a=a+Math.imul(D,me)|0,h=h+Math.imul(D,it)|0;var Ms=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,l=Math.imul(Re,we),a=Math.imul(Re,_e),a=a+Math.imul(Oe,we)|0,h=Math.imul(Oe,_e),l=l+Math.imul(ie,me)|0,a=a+Math.imul(ie,it)|0,a=a+Math.imul(he,me)|0,h=h+Math.imul(he,it)|0,l=l+Math.imul(C,st)|0,a=a+Math.imul(C,ot)|0,a=a+Math.imul(D,st)|0,h=h+Math.imul(D,ot)|0;var Ps=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,l=Math.imul(Te,we),a=Math.imul(Te,_e),a=a+Math.imul(Ce,we)|0,h=Math.imul(Ce,_e),l=l+Math.imul(Re,me)|0,a=a+Math.imul(Re,it)|0,a=a+Math.imul(Oe,me)|0,h=h+Math.imul(Oe,it)|0,l=l+Math.imul(ie,st)|0,a=a+Math.imul(ie,ot)|0,a=a+Math.imul(he,st)|0,h=h+Math.imul(he,ot)|0,l=l+Math.imul(C,at)|0,a=a+Math.imul(C,ct)|0,a=a+Math.imul(D,at)|0,h=h+Math.imul(D,ct)|0;var Us=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Us>>>26)|0,Us&=67108863,l=Math.imul(Fe,we),a=Math.imul(Fe,_e),a=a+Math.imul(We,we)|0,h=Math.imul(We,_e),l=l+Math.imul(Te,me)|0,a=a+Math.imul(Te,it)|0,a=a+Math.imul(Ce,me)|0,h=h+Math.imul(Ce,it)|0,l=l+Math.imul(Re,st)|0,a=a+Math.imul(Re,ot)|0,a=a+Math.imul(Oe,st)|0,h=h+Math.imul(Oe,ot)|0,l=l+Math.imul(ie,at)|0,a=a+Math.imul(ie,ct)|0,a=a+Math.imul(he,at)|0,h=h+Math.imul(he,ct)|0,l=l+Math.imul(C,ut)|0,a=a+Math.imul(C,lt)|0,a=a+Math.imul(D,ut)|0,h=h+Math.imul(D,lt)|0;var Ds=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Ds>>>26)|0,Ds&=67108863,l=Math.imul(ze,we),a=Math.imul(ze,_e),a=a+Math.imul(Ue,we)|0,h=Math.imul(Ue,_e),l=l+Math.imul(Fe,me)|0,a=a+Math.imul(Fe,it)|0,a=a+Math.imul(We,me)|0,h=h+Math.imul(We,it)|0,l=l+Math.imul(Te,st)|0,a=a+Math.imul(Te,ot)|0,a=a+Math.imul(Ce,st)|0,h=h+Math.imul(Ce,ot)|0,l=l+Math.imul(Re,at)|0,a=a+Math.imul(Re,ct)|0,a=a+Math.imul(Oe,at)|0,h=h+Math.imul(Oe,ct)|0,l=l+Math.imul(ie,ut)|0,a=a+Math.imul(ie,lt)|0,a=a+Math.imul(he,ut)|0,h=h+Math.imul(he,lt)|0,l=l+Math.imul(C,dt)|0,a=a+Math.imul(C,ht)|0,a=a+Math.imul(D,dt)|0,h=h+Math.imul(D,ht)|0;var Hs=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Hs>>>26)|0,Hs&=67108863,l=Math.imul(He,we),a=Math.imul(He,_e),a=a+Math.imul(qe,we)|0,h=Math.imul(qe,_e),l=l+Math.imul(ze,me)|0,a=a+Math.imul(ze,it)|0,a=a+Math.imul(Ue,me)|0,h=h+Math.imul(Ue,it)|0,l=l+Math.imul(Fe,st)|0,a=a+Math.imul(Fe,ot)|0,a=a+Math.imul(We,st)|0,h=h+Math.imul(We,ot)|0,l=l+Math.imul(Te,at)|0,a=a+Math.imul(Te,ct)|0,a=a+Math.imul(Ce,at)|0,h=h+Math.imul(Ce,ct)|0,l=l+Math.imul(Re,ut)|0,a=a+Math.imul(Re,lt)|0,a=a+Math.imul(Oe,ut)|0,h=h+Math.imul(Oe,lt)|0,l=l+Math.imul(ie,dt)|0,a=a+Math.imul(ie,ht)|0,a=a+Math.imul(he,dt)|0,h=h+Math.imul(he,ht)|0,l=l+Math.imul(C,ft)|0,a=a+Math.imul(C,pt)|0,a=a+Math.imul(D,ft)|0,h=h+Math.imul(D,pt)|0;var Fs=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,l=Math.imul(Ve,we),a=Math.imul(Ve,_e),a=a+Math.imul(N,we)|0,h=Math.imul(N,_e),l=l+Math.imul(He,me)|0,a=a+Math.imul(He,it)|0,a=a+Math.imul(qe,me)|0,h=h+Math.imul(qe,it)|0,l=l+Math.imul(ze,st)|0,a=a+Math.imul(ze,ot)|0,a=a+Math.imul(Ue,st)|0,h=h+Math.imul(Ue,ot)|0,l=l+Math.imul(Fe,at)|0,a=a+Math.imul(Fe,ct)|0,a=a+Math.imul(We,at)|0,h=h+Math.imul(We,ct)|0,l=l+Math.imul(Te,ut)|0,a=a+Math.imul(Te,lt)|0,a=a+Math.imul(Ce,ut)|0,h=h+Math.imul(Ce,lt)|0,l=l+Math.imul(Re,dt)|0,a=a+Math.imul(Re,ht)|0,a=a+Math.imul(Oe,dt)|0,h=h+Math.imul(Oe,ht)|0,l=l+Math.imul(ie,ft)|0,a=a+Math.imul(ie,pt)|0,a=a+Math.imul(he,ft)|0,h=h+Math.imul(he,pt)|0,l=l+Math.imul(C,yt)|0,a=a+Math.imul(C,gt)|0,a=a+Math.imul(D,yt)|0,h=h+Math.imul(D,gt)|0;var zs=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(zs>>>26)|0,zs&=67108863,l=Math.imul(w,we),a=Math.imul(w,_e),a=a+Math.imul(B,we)|0,h=Math.imul(B,_e),l=l+Math.imul(Ve,me)|0,a=a+Math.imul(Ve,it)|0,a=a+Math.imul(N,me)|0,h=h+Math.imul(N,it)|0,l=l+Math.imul(He,st)|0,a=a+Math.imul(He,ot)|0,a=a+Math.imul(qe,st)|0,h=h+Math.imul(qe,ot)|0,l=l+Math.imul(ze,at)|0,a=a+Math.imul(ze,ct)|0,a=a+Math.imul(Ue,at)|0,h=h+Math.imul(Ue,ct)|0,l=l+Math.imul(Fe,ut)|0,a=a+Math.imul(Fe,lt)|0,a=a+Math.imul(We,ut)|0,h=h+Math.imul(We,lt)|0,l=l+Math.imul(Te,dt)|0,a=a+Math.imul(Te,ht)|0,a=a+Math.imul(Ce,dt)|0,h=h+Math.imul(Ce,ht)|0,l=l+Math.imul(Re,ft)|0,a=a+Math.imul(Re,pt)|0,a=a+Math.imul(Oe,ft)|0,h=h+Math.imul(Oe,pt)|0,l=l+Math.imul(ie,yt)|0,a=a+Math.imul(ie,gt)|0,a=a+Math.imul(he,yt)|0,h=h+Math.imul(he,gt)|0,l=l+Math.imul(C,mt)|0,a=a+Math.imul(C,_t)|0,a=a+Math.imul(D,mt)|0,h=h+Math.imul(D,_t)|0;var $s=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+($s>>>26)|0,$s&=67108863,l=Math.imul(V,we),a=Math.imul(V,_e),a=a+Math.imul(Q,we)|0,h=Math.imul(Q,_e),l=l+Math.imul(w,me)|0,a=a+Math.imul(w,it)|0,a=a+Math.imul(B,me)|0,h=h+Math.imul(B,it)|0,l=l+Math.imul(Ve,st)|0,a=a+Math.imul(Ve,ot)|0,a=a+Math.imul(N,st)|0,h=h+Math.imul(N,ot)|0,l=l+Math.imul(He,at)|0,a=a+Math.imul(He,ct)|0,a=a+Math.imul(qe,at)|0,h=h+Math.imul(qe,ct)|0,l=l+Math.imul(ze,ut)|0,a=a+Math.imul(ze,lt)|0,a=a+Math.imul(Ue,ut)|0,h=h+Math.imul(Ue,lt)|0,l=l+Math.imul(Fe,dt)|0,a=a+Math.imul(Fe,ht)|0,a=a+Math.imul(We,dt)|0,h=h+Math.imul(We,ht)|0,l=l+Math.imul(Te,ft)|0,a=a+Math.imul(Te,pt)|0,a=a+Math.imul(Ce,ft)|0,h=h+Math.imul(Ce,pt)|0,l=l+Math.imul(Re,yt)|0,a=a+Math.imul(Re,gt)|0,a=a+Math.imul(Oe,yt)|0,h=h+Math.imul(Oe,gt)|0,l=l+Math.imul(ie,mt)|0,a=a+Math.imul(ie,_t)|0,a=a+Math.imul(he,mt)|0,h=h+Math.imul(he,_t)|0,l=l+Math.imul(C,wt)|0,a=a+Math.imul(C,bt)|0,a=a+Math.imul(D,wt)|0,h=h+Math.imul(D,bt)|0;var Ks=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,l=Math.imul(V,me),a=Math.imul(V,it),a=a+Math.imul(Q,me)|0,h=Math.imul(Q,it),l=l+Math.imul(w,st)|0,a=a+Math.imul(w,ot)|0,a=a+Math.imul(B,st)|0,h=h+Math.imul(B,ot)|0,l=l+Math.imul(Ve,at)|0,a=a+Math.imul(Ve,ct)|0,a=a+Math.imul(N,at)|0,h=h+Math.imul(N,ct)|0,l=l+Math.imul(He,ut)|0,a=a+Math.imul(He,lt)|0,a=a+Math.imul(qe,ut)|0,h=h+Math.imul(qe,lt)|0,l=l+Math.imul(ze,dt)|0,a=a+Math.imul(ze,ht)|0,a=a+Math.imul(Ue,dt)|0,h=h+Math.imul(Ue,ht)|0,l=l+Math.imul(Fe,ft)|0,a=a+Math.imul(Fe,pt)|0,a=a+Math.imul(We,ft)|0,h=h+Math.imul(We,pt)|0,l=l+Math.imul(Te,yt)|0,a=a+Math.imul(Te,gt)|0,a=a+Math.imul(Ce,yt)|0,h=h+Math.imul(Ce,gt)|0,l=l+Math.imul(Re,mt)|0,a=a+Math.imul(Re,_t)|0,a=a+Math.imul(Oe,mt)|0,h=h+Math.imul(Oe,_t)|0,l=l+Math.imul(ie,wt)|0,a=a+Math.imul(ie,bt)|0,a=a+Math.imul(he,wt)|0,h=h+Math.imul(he,bt)|0;var qs=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(qs>>>26)|0,qs&=67108863,l=Math.imul(V,st),a=Math.imul(V,ot),a=a+Math.imul(Q,st)|0,h=Math.imul(Q,ot),l=l+Math.imul(w,at)|0,a=a+Math.imul(w,ct)|0,a=a+Math.imul(B,at)|0,h=h+Math.imul(B,ct)|0,l=l+Math.imul(Ve,ut)|0,a=a+Math.imul(Ve,lt)|0,a=a+Math.imul(N,ut)|0,h=h+Math.imul(N,lt)|0,l=l+Math.imul(He,dt)|0,a=a+Math.imul(He,ht)|0,a=a+Math.imul(qe,dt)|0,h=h+Math.imul(qe,ht)|0,l=l+Math.imul(ze,ft)|0,a=a+Math.imul(ze,pt)|0,a=a+Math.imul(Ue,ft)|0,h=h+Math.imul(Ue,pt)|0,l=l+Math.imul(Fe,yt)|0,a=a+Math.imul(Fe,gt)|0,a=a+Math.imul(We,yt)|0,h=h+Math.imul(We,gt)|0,l=l+Math.imul(Te,mt)|0,a=a+Math.imul(Te,_t)|0,a=a+Math.imul(Ce,mt)|0,h=h+Math.imul(Ce,_t)|0,l=l+Math.imul(Re,wt)|0,a=a+Math.imul(Re,bt)|0,a=a+Math.imul(Oe,wt)|0,h=h+Math.imul(Oe,bt)|0;var Vs=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Vs>>>26)|0,Vs&=67108863,l=Math.imul(V,at),a=Math.imul(V,ct),a=a+Math.imul(Q,at)|0,h=Math.imul(Q,ct),l=l+Math.imul(w,ut)|0,a=a+Math.imul(w,lt)|0,a=a+Math.imul(B,ut)|0,h=h+Math.imul(B,lt)|0,l=l+Math.imul(Ve,dt)|0,a=a+Math.imul(Ve,ht)|0,a=a+Math.imul(N,dt)|0,h=h+Math.imul(N,ht)|0,l=l+Math.imul(He,ft)|0,a=a+Math.imul(He,pt)|0,a=a+Math.imul(qe,ft)|0,h=h+Math.imul(qe,pt)|0,l=l+Math.imul(ze,yt)|0,a=a+Math.imul(ze,gt)|0,a=a+Math.imul(Ue,yt)|0,h=h+Math.imul(Ue,gt)|0,l=l+Math.imul(Fe,mt)|0,a=a+Math.imul(Fe,_t)|0,a=a+Math.imul(We,mt)|0,h=h+Math.imul(We,_t)|0,l=l+Math.imul(Te,wt)|0,a=a+Math.imul(Te,bt)|0,a=a+Math.imul(Ce,wt)|0,h=h+Math.imul(Ce,bt)|0;var Gs=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Gs>>>26)|0,Gs&=67108863,l=Math.imul(V,ut),a=Math.imul(V,lt),a=a+Math.imul(Q,ut)|0,h=Math.imul(Q,lt),l=l+Math.imul(w,dt)|0,a=a+Math.imul(w,ht)|0,a=a+Math.imul(B,dt)|0,h=h+Math.imul(B,ht)|0,l=l+Math.imul(Ve,ft)|0,a=a+Math.imul(Ve,pt)|0,a=a+Math.imul(N,ft)|0,h=h+Math.imul(N,pt)|0,l=l+Math.imul(He,yt)|0,a=a+Math.imul(He,gt)|0,a=a+Math.imul(qe,yt)|0,h=h+Math.imul(qe,gt)|0,l=l+Math.imul(ze,mt)|0,a=a+Math.imul(ze,_t)|0,a=a+Math.imul(Ue,mt)|0,h=h+Math.imul(Ue,_t)|0,l=l+Math.imul(Fe,wt)|0,a=a+Math.imul(Fe,bt)|0,a=a+Math.imul(We,wt)|0,h=h+Math.imul(We,bt)|0;var Ws=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Ws>>>26)|0,Ws&=67108863,l=Math.imul(V,dt),a=Math.imul(V,ht),a=a+Math.imul(Q,dt)|0,h=Math.imul(Q,ht),l=l+Math.imul(w,ft)|0,a=a+Math.imul(w,pt)|0,a=a+Math.imul(B,ft)|0,h=h+Math.imul(B,pt)|0,l=l+Math.imul(Ve,yt)|0,a=a+Math.imul(Ve,gt)|0,a=a+Math.imul(N,yt)|0,h=h+Math.imul(N,gt)|0,l=l+Math.imul(He,mt)|0,a=a+Math.imul(He,_t)|0,a=a+Math.imul(qe,mt)|0,h=h+Math.imul(qe,_t)|0,l=l+Math.imul(ze,wt)|0,a=a+Math.imul(ze,bt)|0,a=a+Math.imul(Ue,wt)|0,h=h+Math.imul(Ue,bt)|0;var js=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(js>>>26)|0,js&=67108863,l=Math.imul(V,ft),a=Math.imul(V,pt),a=a+Math.imul(Q,ft)|0,h=Math.imul(Q,pt),l=l+Math.imul(w,yt)|0,a=a+Math.imul(w,gt)|0,a=a+Math.imul(B,yt)|0,h=h+Math.imul(B,gt)|0,l=l+Math.imul(Ve,mt)|0,a=a+Math.imul(Ve,_t)|0,a=a+Math.imul(N,mt)|0,h=h+Math.imul(N,_t)|0,l=l+Math.imul(He,wt)|0,a=a+Math.imul(He,bt)|0,a=a+Math.imul(qe,wt)|0,h=h+Math.imul(qe,bt)|0;var Ys=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Ys>>>26)|0,Ys&=67108863,l=Math.imul(V,yt),a=Math.imul(V,gt),a=a+Math.imul(Q,yt)|0,h=Math.imul(Q,gt),l=l+Math.imul(w,mt)|0,a=a+Math.imul(w,_t)|0,a=a+Math.imul(B,mt)|0,h=h+Math.imul(B,_t)|0,l=l+Math.imul(Ve,wt)|0,a=a+Math.imul(Ve,bt)|0,a=a+Math.imul(N,wt)|0,h=h+Math.imul(N,bt)|0;var Zs=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Zs>>>26)|0,Zs&=67108863,l=Math.imul(V,mt),a=Math.imul(V,_t),a=a+Math.imul(Q,mt)|0,h=Math.imul(Q,_t),l=l+Math.imul(w,wt)|0,a=a+Math.imul(w,bt)|0,a=a+Math.imul(B,wt)|0,h=h+Math.imul(B,bt)|0;var Xs=(d+l|0)+((a&8191)<<13)|0;d=(h+(a>>>13)|0)+(Xs>>>26)|0,Xs&=67108863,l=Math.imul(V,wt),a=Math.imul(V,bt),a=a+Math.imul(Q,wt)|0,h=Math.imul(Q,bt);var Js=(d+l|0)+((a&8191)<<13)|0;return d=(h+(a>>>13)|0)+(Js>>>26)|0,Js&=67108863,_[0]=Ls,_[1]=Ms,_[2]=Ps,_[3]=Us,_[4]=Ds,_[5]=Hs,_[6]=Fs,_[7]=zs,_[8]=$s,_[9]=Ks,_[10]=qs,_[11]=Vs,_[12]=Gs,_[13]=Ws,_[14]=js,_[15]=Ys,_[16]=Zs,_[17]=Xs,_[18]=Js,d!==0&&(_[19]=d,b.length++),b};Math.imul||(F=L);function M(A,c,p){p.negative=c.negative^A.negative,p.length=A.length+c.length;for(var b=0,v=0,k=0;k<p.length-1;k++){var _=v;v=0;for(var d=b&67108863,l=Math.min(k,c.length-1),a=Math.max(0,k-A.length+1);a<=l;a++){var h=k-a,E=A.words[h]|0,C=c.words[a]|0,D=E*C,J=D&67108863;_=_+(D/67108864|0)|0,J=J+d|0,d=J&67108863,_=_+(J>>>26)|0,v+=_>>>26,_&=67108863}p.words[k]=d,b=_,_=v}return b!==0?p.words[k]=b:p.length--,p._strip()}function q(A,c,p){return M(A,c,p)}i.prototype.mulTo=function(c,p){var b,v=this.length+c.length;return this.length===10&&c.length===10?b=F(this,c,p):v<63?b=L(this,c,p):v<1024?b=M(this,c,p):b=q(this,c,p),b},i.prototype.mul=function(c){var p=new i(null);return p.words=new Array(this.length+c.length),this.mulTo(c,p)},i.prototype.mulf=function(c){var p=new i(null);return p.words=new Array(this.length+c.length),q(this,c,p)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){var p=c<0;p&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var b=0,v=0;v<this.length;v++){var k=(this.words[v]|0)*c,_=(k&67108863)+(b&67108863);b>>=26,b+=k/67108864|0,b+=_>>>26,this.words[v]=_&67108863}return b!==0&&(this.words[v]=b,this.length++),p?this.ineg():this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var p=O(c);if(p.length===0)return new i(1);for(var b=this,v=0;v<p.length&&p[v]===0;v++,b=b.sqr());if(++v<p.length)for(var k=b.sqr();v<p.length;v++,k=k.sqr())p[v]!==0&&(b=b.mul(k));return b},i.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var p=c%26,b=(c-p)/26,v=67108863>>>26-p<<26-p,k;if(p!==0){var _=0;for(k=0;k<this.length;k++){var d=this.words[k]&v,l=(this.words[k]|0)-d<<p;this.words[k]=l|_,_=d>>>26-p}_&&(this.words[k]=_,this.length++)}if(b!==0){for(k=this.length-1;k>=0;k--)this.words[k+b]=this.words[k];for(k=0;k<b;k++)this.words[k]=0;this.length+=b}return this._strip()},i.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,p,b){n(typeof c=="number"&&c>=0);var v;p?v=(p-p%26)/26:v=0;var k=c%26,_=Math.min((c-k)/26,this.length),d=67108863^67108863>>>k<<k,l=b;if(v-=_,v=Math.max(0,v),l){for(var a=0;a<_;a++)l.words[a]=this.words[a];l.length=_}if(_!==0)if(this.length>_)for(this.length-=_,a=0;a<this.length;a++)this.words[a]=this.words[a+_];else this.words[0]=0,this.length=1;var h=0;for(a=this.length-1;a>=0&&(h!==0||a>=v);a--){var E=this.words[a]|0;this.words[a]=h<<26-k|E>>>k,h=E&d}return l&&h!==0&&(l.words[l.length++]=h),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(c,p,b){return n(this.negative===0),this.iushrn(c,p,b)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var p=c%26,b=(c-p)/26,v=1<<p;if(this.length<=b)return!1;var k=this.words[b];return!!(k&v)},i.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var p=c%26,b=(c-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(p!==0&&b++,this.length=Math.min(b,this.length),p!==0){var v=67108863^67108863>>>p<<p;this.words[this.length-1]&=v}return this._strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},i.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,p,b){var v=c.length+b,k;this._expand(v);var _,d=0;for(k=0;k<c.length;k++){_=(this.words[k+b]|0)+d;var l=(c.words[k]|0)*p;_-=l&67108863,d=(_>>26)-(l/67108864|0),this.words[k+b]=_&67108863}for(;k<this.length-b;k++)_=(this.words[k+b]|0)+d,d=_>>26,this.words[k+b]=_&67108863;if(d===0)return this._strip();for(n(d===-1),d=0,k=0;k<this.length;k++)_=-(this.words[k]|0)+d,d=_>>26,this.words[k]=_&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(c,p){var b=this.length-c.length,v=this.clone(),k=c,_=k.words[k.length-1]|0,d=this._countBits(_);b=26-d,b!==0&&(k=k.ushln(b),v.iushln(b),_=k.words[k.length-1]|0);var l=v.length-k.length,a;if(p!=="mod"){a=new i(null),a.length=l+1,a.words=new Array(a.length);for(var h=0;h<a.length;h++)a.words[h]=0}var E=v.clone()._ishlnsubmul(k,1,l);E.negative===0&&(v=E,a&&(a.words[l]=1));for(var C=l-1;C>=0;C--){var D=(v.words[k.length+C]|0)*67108864+(v.words[k.length+C-1]|0);for(D=Math.min(D/_|0,67108863),v._ishlnsubmul(k,D,C);v.negative!==0;)D--,v.negative=0,v._ishlnsubmul(k,1,C),v.isZero()||(v.negative^=1);a&&(a.words[C]=D)}return a&&a._strip(),v._strip(),p!=="div"&&b!==0&&v.iushrn(b),{div:a||null,mod:v}},i.prototype.divmod=function(c,p,b){if(n(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,k,_;return this.negative!==0&&c.negative===0?(_=this.neg().divmod(c,p),p!=="mod"&&(v=_.div.neg()),p!=="div"&&(k=_.mod.neg(),b&&k.negative!==0&&k.iadd(c)),{div:v,mod:k}):this.negative===0&&c.negative!==0?(_=this.divmod(c.neg(),p),p!=="mod"&&(v=_.div.neg()),{div:v,mod:_.mod}):(this.negative&c.negative)!==0?(_=this.neg().divmod(c.neg(),p),p!=="div"&&(k=_.mod.neg(),b&&k.negative!==0&&k.isub(c)),{div:_.div,mod:k}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?p==="div"?{div:this.divn(c.words[0]),mod:null}:p==="mod"?{div:null,mod:new i(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modrn(c.words[0]))}:this._wordDiv(c,p)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var p=this.divmod(c);if(p.mod.isZero())return p.div;var b=p.div.negative!==0?p.mod.isub(c):p.mod,v=c.ushrn(1),k=c.andln(1),_=b.cmp(v);return _<0||k===1&&_===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},i.prototype.modrn=function(c){var p=c<0;p&&(c=-c),n(c<=67108863);for(var b=(1<<26)%c,v=0,k=this.length-1;k>=0;k--)v=(b*v+(this.words[k]|0))%c;return p?-v:v},i.prototype.modn=function(c){return this.modrn(c)},i.prototype.idivn=function(c){var p=c<0;p&&(c=-c),n(c<=67108863);for(var b=0,v=this.length-1;v>=0;v--){var k=(this.words[v]|0)+b*67108864;this.words[v]=k/c|0,b=k%c}return this._strip(),p?this.ineg():this},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var p=this,b=c.clone();p.negative!==0?p=p.umod(c):p=p.clone();for(var v=new i(1),k=new i(0),_=new i(0),d=new i(1),l=0;p.isEven()&&b.isEven();)p.iushrn(1),b.iushrn(1),++l;for(var a=b.clone(),h=p.clone();!p.isZero();){for(var E=0,C=1;(p.words[0]&C)===0&&E<26;++E,C<<=1);if(E>0)for(p.iushrn(E);E-- >0;)(v.isOdd()||k.isOdd())&&(v.iadd(a),k.isub(h)),v.iushrn(1),k.iushrn(1);for(var D=0,J=1;(b.words[0]&J)===0&&D<26;++D,J<<=1);if(D>0)for(b.iushrn(D);D-- >0;)(_.isOdd()||d.isOdd())&&(_.iadd(a),d.isub(h)),_.iushrn(1),d.iushrn(1);p.cmp(b)>=0?(p.isub(b),v.isub(_),k.isub(d)):(b.isub(p),_.isub(v),d.isub(k))}return{a:_,b:d,gcd:b.iushln(l)}},i.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var p=this,b=c.clone();p.negative!==0?p=p.umod(c):p=p.clone();for(var v=new i(1),k=new i(0),_=b.clone();p.cmpn(1)>0&&b.cmpn(1)>0;){for(var d=0,l=1;(p.words[0]&l)===0&&d<26;++d,l<<=1);if(d>0)for(p.iushrn(d);d-- >0;)v.isOdd()&&v.iadd(_),v.iushrn(1);for(var a=0,h=1;(b.words[0]&h)===0&&a<26;++a,h<<=1);if(a>0)for(b.iushrn(a);a-- >0;)k.isOdd()&&k.iadd(_),k.iushrn(1);p.cmp(b)>=0?(p.isub(b),v.isub(k)):(b.isub(p),k.isub(v))}var E;return p.cmpn(1)===0?E=v:E=k,E.cmpn(0)<0&&E.iadd(c),E},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var p=this.clone(),b=c.clone();p.negative=0,b.negative=0;for(var v=0;p.isEven()&&b.isEven();v++)p.iushrn(1),b.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;b.isEven();)b.iushrn(1);var k=p.cmp(b);if(k<0){var _=p;p=b,b=_}else if(k===0||b.cmpn(1)===0)break;p.isub(b)}while(!0);return b.iushln(v)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){n(typeof c=="number");var p=c%26,b=(c-p)/26,v=1<<p;if(this.length<=b)return this._expand(b+1),this.words[b]|=v,this;for(var k=v,_=b;k!==0&&_<this.length;_++){var d=this.words[_]|0;d+=k,k=d>>>26,d&=67108863,this.words[_]=d}return k!==0&&(this.words[_]=k,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var p=c<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var b;if(this.length>1)b=1;else{p&&(c=-c),n(c<=67108863,"Number is too big");var v=this.words[0]|0;b=v===c?0:v<c?-1:1}return this.negative!==0?-b|0:b},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var p=this.ucmp(c);return this.negative!==0?-p|0:p},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var p=0,b=this.length-1;b>=0;b--){var v=this.words[b]|0,k=c.words[b]|0;if(v!==k){v<k?p=-1:v>k&&(p=1);break}}return p},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new H(c)},i.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var G={k256:null,p224:null,p192:null,p25519:null};function te(A,c){this.name=A,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}te.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},te.prototype.ireduce=function(c){var p=c,b;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),b=p.bitLength();while(b>this.n);var v=b<this.n?-1:p.ucmp(this.p);return v===0?(p.words[0]=0,p.length=1):v>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},te.prototype.split=function(c,p){c.iushrn(this.n,0,p)},te.prototype.imulK=function(c){return c.imul(this.k)};function X(){te.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(X,te),X.prototype.split=function(c,p){for(var b=4194303,v=Math.min(c.length,9),k=0;k<v;k++)p.words[k]=c.words[k];if(p.length=v,c.length<=9){c.words[0]=0,c.length=1;return}var _=c.words[9];for(p.words[p.length++]=_&b,k=10;k<c.length;k++){var d=c.words[k]|0;c.words[k-10]=(d&b)<<4|_>>>22,_=d}_>>>=22,c.words[k-10]=_,_===0&&c.length>10?c.length-=10:c.length-=9},X.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var p=0,b=0;b<c.length;b++){var v=c.words[b]|0;p+=v*977,c.words[b]=p&67108863,p=v*64+(p/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function ee(){te.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ee,te);function $(){te.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s($,te);function z(){te.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(z,te),z.prototype.imulK=function(c){for(var p=0,b=0;b<c.length;b++){var v=(c.words[b]|0)*19+p,k=v&67108863;v>>>=26,c.words[b]=k,p=v}return p!==0&&(c.words[c.length++]=p),c},i._prime=function(c){if(G[c])return G[c];var p;if(c==="k256")p=new X;else if(c==="p224")p=new ee;else if(c==="p192")p=new $;else if(c==="p25519")p=new z;else throw new Error("Unknown prime "+c);return G[c]=p,p};function H(A){if(typeof A=="string"){var c=i._prime(A);this.m=c.p,this.prime=c}else n(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}H.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},H.prototype._verify2=function(c,p){n((c.negative|p.negative)===0,"red works only with positives"),n(c.red&&c.red===p.red,"red works only with red numbers")},H.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(g(c,c.umod(this.m)._forceRed(this)),c)},H.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},H.prototype.add=function(c,p){this._verify2(c,p);var b=c.add(p);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},H.prototype.iadd=function(c,p){this._verify2(c,p);var b=c.iadd(p);return b.cmp(this.m)>=0&&b.isub(this.m),b},H.prototype.sub=function(c,p){this._verify2(c,p);var b=c.sub(p);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},H.prototype.isub=function(c,p){this._verify2(c,p);var b=c.isub(p);return b.cmpn(0)<0&&b.iadd(this.m),b},H.prototype.shl=function(c,p){return this._verify1(c),this.imod(c.ushln(p))},H.prototype.imul=function(c,p){return this._verify2(c,p),this.imod(c.imul(p))},H.prototype.mul=function(c,p){return this._verify2(c,p),this.imod(c.mul(p))},H.prototype.isqr=function(c){return this.imul(c,c.clone())},H.prototype.sqr=function(c){return this.mul(c,c)},H.prototype.sqrt=function(c){if(c.isZero())return c.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var b=this.m.add(new i(1)).iushrn(2);return this.pow(c,b)}for(var v=this.m.subn(1),k=0;!v.isZero()&&v.andln(1)===0;)k++,v.iushrn(1);n(!v.isZero());var _=new i(1).toRed(this),d=_.redNeg(),l=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,l).cmp(d)!==0;)a.redIAdd(d);for(var h=this.pow(a,v),E=this.pow(c,v.addn(1).iushrn(1)),C=this.pow(c,v),D=k;C.cmp(_)!==0;){for(var J=C,ie=0;J.cmp(_)!==0;ie++)J=J.redSqr();n(ie<D);var he=this.pow(h,new i(1).iushln(D-ie-1));E=E.redMul(he),h=he.redSqr(),C=C.redMul(h),D=ie}return E},H.prototype.invm=function(c){var p=c._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},H.prototype.pow=function(c,p){if(p.isZero())return new i(1).toRed(this);if(p.cmpn(1)===0)return c.clone();var b=4,v=new Array(1<<b);v[0]=new i(1).toRed(this),v[1]=c;for(var k=2;k<v.length;k++)v[k]=this.mul(v[k-1],c);var _=v[0],d=0,l=0,a=p.bitLength()%26;for(a===0&&(a=26),k=p.length-1;k>=0;k--){for(var h=p.words[k],E=a-1;E>=0;E--){var C=h>>E&1;if(_!==v[0]&&(_=this.sqr(_)),C===0&&d===0){l=0;continue}d<<=1,d|=C,l++,!(l!==b&&(k!==0||E!==0))&&(_=this.mul(_,v[d]),l=0,d=0)}a=26}return _},H.prototype.convertTo=function(c){var p=c.umod(this.m);return p===c?p.clone():p},H.prototype.convertFrom=function(c){var p=c.clone();return p.red=null,p},i.mont=function(c){return new P(c)};function P(A){H.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(P,H),P.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},P.prototype.convertFrom=function(c){var p=this.imod(c.mul(this.rinv));return p.red=null,p},P.prototype.imul=function(c,p){if(c.isZero()||p.isZero())return c.words[0]=0,c.length=1,c;var b=c.imul(p),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=b.isub(v).iushrn(this.shift),_=k;return k.cmp(this.m)>=0?_=k.isub(this.m):k.cmpn(0)<0&&(_=k.iadd(this.m)),_._forceRed(this)},P.prototype.mul=function(c,p){if(c.isZero()||p.isZero())return new i(0)._forceRed(this);var b=c.mul(p),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=b.isub(v).iushrn(this.shift),_=k;return k.cmp(this.m)>=0?_=k.isub(this.m):k.cmpn(0)<0&&(_=k.iadd(this.m)),_._forceRed(this)},P.prototype.invm=function(c){var p=this.imod(c._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,ty)}(Ki)),Ki.exports}var ny=Aa();const nt=Br(ny);var Ti={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Oc;function ry(){return Oc||(Oc=1,function(r,e){var t=ls(),n=t.Buffer;function s(o,u){for(var f in o)u[f]=o[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(s(t,e),e.Buffer=i);function i(o,u,f){return n(o,u,f)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,u,f){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,u,f)},i.alloc=function(o,u,f){if(typeof o!="number")throw new TypeError("Argument must be a number");var y=n(o);return u!==void 0?typeof f=="string"?y.fill(u,f):y.fill(u):y.fill(0),y},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(Ti,Ti.exports)),Ti.exports}var lo,Sc;function iy(){if(Sc)return lo;Sc=1;var r=ry().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),u=o.charCodeAt(0);if(n[u]!==255)throw new TypeError(o+" is ambiguous");n[u]=i}var f=t.length,y=t.charAt(0),g=Math.log(f)/Math.log(256),S=Math.log(256)/Math.log(f);function I(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=r.from(x)),!r.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var O=0,L=0,F=0,M=x.length;F!==M&&x[F]===0;)F++,O++;for(var q=(M-F)*S+1>>>0,G=new Uint8Array(q);F!==M;){for(var te=x[F],X=0,ee=q-1;(te!==0||X<L)&&ee!==-1;ee--,X++)te+=256*G[ee]>>>0,G[ee]=te%f>>>0,te=te/f>>>0;if(te!==0)throw new Error("Non-zero carry");L=X,F++}for(var $=q-L;$!==q&&G[$]===0;)$++;for(var z=y.repeat(O);$<q;++$)z+=t.charAt(G[$]);return z}function R(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return r.alloc(0);for(var O=0,L=0,F=0;x[O]===y;)L++,O++;for(var M=(x.length-O)*g+1>>>0,q=new Uint8Array(M);O<x.length;){var G=n[x.charCodeAt(O)];if(G===255)return;for(var te=0,X=M-1;(G!==0||te<F)&&X!==-1;X--,te++)G+=f*q[X]>>>0,q[X]=G%256>>>0,G=G/256>>>0;if(G!==0)throw new Error("Non-zero carry");F=te,O++}for(var ee=M-F;ee!==M&&q[ee]===0;)ee++;var $=r.allocUnsafe(L+(M-ee));$.fill(0,0,L);for(var z=L;ee!==M;)$[z++]=q[ee++];return $}function T(x){var O=R(x);if(O)return O;throw new Error("Non-base"+f+" character")}return{encode:I,decodeUnsafe:R,decode:T}}return lo=e,lo}var ho,Tc;function zl(){if(Tc)return ho;Tc=1;var r=iy(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return ho=r(e),ho}var sy=zl();const et=Br(sy),oy=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Nn=new Uint32Array(64);class ay extends Il{constructor(){super(64,32,8,!1),this.A=Tn[0]|0,this.B=Tn[1]|0,this.C=Tn[2]|0,this.D=Tn[3]|0,this.E=Tn[4]|0,this.F=Tn[5]|0,this.G=Tn[6]|0,this.H=Tn[7]|0}get(){const{A:e,B:t,C:n,D:s,E:i,F:o,G:u,H:f}=this;return[e,t,n,s,i,o,u,f]}set(e,t,n,s,i,o,u,f){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=u|0,this.H=f|0}process(e,t){for(let S=0;S<16;S++,t+=4)Nn[S]=e.getUint32(t,!1);for(let S=16;S<64;S++){const I=Nn[S-15],R=Nn[S-2],T=tn(I,7)^tn(I,18)^I>>>3,x=tn(R,17)^tn(R,19)^R>>>10;Nn[S]=x+Nn[S-7]+T+Nn[S-16]|0}let{A:n,B:s,C:i,D:o,E:u,F:f,G:y,H:g}=this;for(let S=0;S<64;S++){const I=tn(u,6)^tn(u,11)^tn(u,25),R=g+I+Qp(u,f,y)+oy[S]+Nn[S]|0,x=(tn(n,2)^tn(n,13)^tn(n,22))+e0(n,s,i)|0;g=y,y=f,f=u,u=o+R|0,o=i,i=s,s=n,n=R+x|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,u=u+this.E|0,f=f+this.F|0,y=y+this.G|0,g=g+this.H|0,this.set(n,s,i,o,u,f,y,g)}roundClean(){Nn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Yo=_a(()=>new ay);var Pe={};function wn(r,e,t){return e<=r&&r<=t}function gs(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function cy(r){for(var e=String(r),t=e.length,n=0,s=[];n<t;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===t-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var u=i&1023,f=o&1023;s.push(65536+(u<<10)+f),n+=1}else s.push(65533)}n+=1}return s}function uy(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Zi=-1;function va(r){this.tokens=[].slice.call(r)}va.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Zi},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var Sr=-1;function fo(r,e){if(r)throw TypeError("Decoder error");return e||65533}var Xi="utf-8";function Ji(r,e){if(!(this instanceof Ji))return new Ji(r,e);if(r=r!==void 0?String(r).toLowerCase():Xi,r!==Xi)throw new Error("Encoding not supported. Only utf-8 is supported");e=gs(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Ji.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=gs(t),this._streaming||(this._decoder=new ly({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new va(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Sr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Sr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),uy(i)}};function Qi(r,e){if(!(this instanceof Qi))return new Qi(r,e);if(r=r!==void 0?String(r).toLowerCase():Xi,r!==Xi)throw new Error("Encoding not supported. Only utf-8 is supported");e=gs(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Qi.prototype={encode:function(e,t){e=e?String(e):"",t=gs(t),this._streaming||(this._encoder=new dy(this._options)),this._streaming=!!t.stream;for(var n=[],s=new va(cy(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Sr);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Sr;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function ly(r){var e=r.fatal,t=0,n=0,s=0,i=128,o=191;this.handler=function(u,f){if(f===Zi&&s!==0)return s=0,fo(e);if(f===Zi)return Sr;if(s===0){if(wn(f,0,127))return f;if(wn(f,194,223))s=1,t=f-192;else if(wn(f,224,239))f===224&&(i=160),f===237&&(o=159),s=2,t=f-224;else if(wn(f,240,244))f===240&&(i=144),f===244&&(o=143),s=3,t=f-240;else return fo(e);return t=t<<6*s,null}if(!wn(f,i,o))return t=s=n=0,i=128,o=191,u.prepend(f),fo(e);if(i=128,o=191,n+=1,t+=f-128<<6*(s-n),n!==s)return null;var y=t;return t=s=n=0,y}}function dy(r){r.fatal,this.handler=function(e,t){if(t===Zi)return Sr;if(wn(t,0,127))return t;var n,s;wn(t,128,2047)?(n=1,s=192):wn(t,2048,65535)?(n=2,s=224):wn(t,65536,1114111)&&(n=3,s=240);for(var i=[(t>>6*n)+s];n>0;){var o=t>>6*(n-1);i.push(128|o&63),n-=1}return i}}const hy=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Ji,TextEncoder:Qi},Symbol.toStringTag,{value:"Module"})),fy=pa(hy);var Nc;function py(){if(Nc)return Pe;Nc=1;var r=Pe&&Pe.__createBinding||(Object.create?function($,z,H,P){P===void 0&&(P=H),Object.defineProperty($,P,{enumerable:!0,get:function(){return z[H]}})}:function($,z,H,P){P===void 0&&(P=H),$[P]=z[H]}),e=Pe&&Pe.__setModuleDefault||(Object.create?function($,z){Object.defineProperty($,"default",{enumerable:!0,value:z})}:function($,z){$.default=z}),t=Pe&&Pe.__decorate||function($,z,H,P){var A=arguments.length,c=A<3?z:P===null?P=Object.getOwnPropertyDescriptor(z,H):P,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate($,z,H,P);else for(var b=$.length-1;b>=0;b--)(p=$[b])&&(c=(A<3?p(c):A>3?p(z,H,c):p(z,H))||c);return A>3&&c&&Object.defineProperty(z,H,c),c},n=Pe&&Pe.__importStar||function($){if($&&$.__esModule)return $;var z={};if($!=null)for(var H in $)H!=="default"&&Object.hasOwnProperty.call($,H)&&r(z,$,H);return e(z,$),z},s=Pe&&Pe.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.deserializeUnchecked=Pe.deserialize=Pe.serialize=Pe.BinaryReader=Pe.BinaryWriter=Pe.BorshError=Pe.baseDecode=Pe.baseEncode=void 0;const i=s(Aa()),o=s(zl()),u=n(fy),f=typeof TextDecoder!="function"?u.TextDecoder:TextDecoder,y=new f("utf-8",{fatal:!0});function g($){return typeof $=="string"&&($=ye.from($,"utf8")),o.default.encode(ye.from($))}Pe.baseEncode=g;function S($){return ye.from(o.default.decode($))}Pe.baseDecode=S;const I=1024;class R extends Error{constructor(z){super(z),this.fieldPath=[],this.originalMessage=z}addToFieldPath(z){this.fieldPath.splice(0,0,z),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Pe.BorshError=R;class T{constructor(){this.buf=ye.alloc(I),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ye.concat([this.buf,ye.alloc(I)]))}writeU8(z){this.maybeResize(),this.buf.writeUInt8(z,this.length),this.length+=1}writeU16(z){this.maybeResize(),this.buf.writeUInt16LE(z,this.length),this.length+=2}writeU32(z){this.maybeResize(),this.buf.writeUInt32LE(z,this.length),this.length+=4}writeU64(z){this.maybeResize(),this.writeBuffer(ye.from(new i.default(z).toArray("le",8)))}writeU128(z){this.maybeResize(),this.writeBuffer(ye.from(new i.default(z).toArray("le",16)))}writeU256(z){this.maybeResize(),this.writeBuffer(ye.from(new i.default(z).toArray("le",32)))}writeU512(z){this.maybeResize(),this.writeBuffer(ye.from(new i.default(z).toArray("le",64)))}writeBuffer(z){this.buf=ye.concat([ye.from(this.buf.subarray(0,this.length)),z,ye.alloc(I)]),this.length+=z.length}writeString(z){this.maybeResize();const H=ye.from(z,"utf8");this.writeU32(H.length),this.writeBuffer(H)}writeFixedArray(z){this.writeBuffer(ye.from(z))}writeArray(z,H){this.maybeResize(),this.writeU32(z.length);for(const P of z)this.maybeResize(),H(P)}toArray(){return this.buf.subarray(0,this.length)}}Pe.BinaryWriter=T;function x($,z,H){const P=H.value;H.value=function(...A){try{return P.apply(this,A)}catch(c){if(c instanceof RangeError){const p=c.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(p)>=0)throw new R("Reached the end of buffer when deserializing")}throw c}}}class O{constructor(z){this.buf=z,this.offset=0}readU8(){const z=this.buf.readUInt8(this.offset);return this.offset+=1,z}readU16(){const z=this.buf.readUInt16LE(this.offset);return this.offset+=2,z}readU32(){const z=this.buf.readUInt32LE(this.offset);return this.offset+=4,z}readU64(){const z=this.readBuffer(8);return new i.default(z,"le")}readU128(){const z=this.readBuffer(16);return new i.default(z,"le")}readU256(){const z=this.readBuffer(32);return new i.default(z,"le")}readU512(){const z=this.readBuffer(64);return new i.default(z,"le")}readBuffer(z){if(this.offset+z>this.buf.length)throw new R(`Expected buffer length ${z} isn't within bounds`);const H=this.buf.slice(this.offset,this.offset+z);return this.offset+=z,H}readString(){const z=this.readU32(),H=this.readBuffer(z);try{return y.decode(H)}catch(P){throw new R(`Error decoding UTF-8 string: ${P}`)}}readFixedArray(z){return new Uint8Array(this.readBuffer(z))}readArray(z){const H=this.readU32(),P=Array();for(let A=0;A<H;++A)P.push(z());return P}}t([x],O.prototype,"readU8",null),t([x],O.prototype,"readU16",null),t([x],O.prototype,"readU32",null),t([x],O.prototype,"readU64",null),t([x],O.prototype,"readU128",null),t([x],O.prototype,"readU256",null),t([x],O.prototype,"readU512",null),t([x],O.prototype,"readString",null),t([x],O.prototype,"readFixedArray",null),t([x],O.prototype,"readArray",null),Pe.BinaryReader=O;function L($){return $.charAt(0).toUpperCase()+$.slice(1)}function F($,z,H,P,A){try{if(typeof P=="string")A[`write${L(P)}`](H);else if(P instanceof Array)if(typeof P[0]=="number"){if(H.length!==P[0])throw new R(`Expecting byte array of length ${P[0]}, but got ${H.length} bytes`);A.writeFixedArray(H)}else if(P.length===2&&typeof P[1]=="number"){if(H.length!==P[1])throw new R(`Expecting byte array of length ${P[1]}, but got ${H.length} bytes`);for(let c=0;c<P[1];c++)F($,null,H[c],P[0],A)}else A.writeArray(H,c=>{F($,z,c,P[0],A)});else if(P.kind!==void 0)switch(P.kind){case"option":{H==null?A.writeU8(0):(A.writeU8(1),F($,z,H,P.type,A));break}case"map":{A.writeU32(H.size),H.forEach((c,p)=>{F($,z,p,P.key,A),F($,z,c,P.value,A)});break}default:throw new R(`FieldType ${P} unrecognized`)}else M($,H,A)}catch(c){throw c instanceof R&&c.addToFieldPath(z),c}}function M($,z,H){if(typeof z.borshSerialize=="function"){z.borshSerialize(H);return}const P=$.get(z.constructor);if(!P)throw new R(`Class ${z.constructor.name} is missing in schema`);if(P.kind==="struct")P.fields.map(([A,c])=>{F($,A,z[A],c,H)});else if(P.kind==="enum"){const A=z[P.field];for(let c=0;c<P.values.length;++c){const[p,b]=P.values[c];if(p===A){H.writeU8(c),F($,p,z[p],b,H);break}}}else throw new R(`Unexpected schema kind: ${P.kind} for ${z.constructor.name}`)}function q($,z,H=T){const P=new H;return M($,z,P),P.toArray()}Pe.serialize=q;function G($,z,H,P){try{if(typeof H=="string")return P[`read${L(H)}`]();if(H instanceof Array){if(typeof H[0]=="number")return P.readFixedArray(H[0]);if(typeof H[1]=="number"){const A=[];for(let c=0;c<H[1];c++)A.push(G($,null,H[0],P));return A}else return P.readArray(()=>G($,z,H[0],P))}if(H.kind==="option")return P.readU8()?G($,z,H.type,P):void 0;if(H.kind==="map"){let A=new Map;const c=P.readU32();for(let p=0;p<c;p++){const b=G($,z,H.key,P),v=G($,z,H.value,P);A.set(b,v)}return A}return te($,H,P)}catch(A){throw A instanceof R&&A.addToFieldPath(z),A}}function te($,z,H){if(typeof z.borshDeserialize=="function")return z.borshDeserialize(H);const P=$.get(z);if(!P)throw new R(`Class ${z.name} is missing in schema`);if(P.kind==="struct"){const A={};for(const[c,p]of $.get(z).fields)A[c]=G($,c,p,H);return new z(A)}if(P.kind==="enum"){const A=H.readU8();if(A>=P.values.length)throw new R(`Enum index: ${A} is out of range`);const[c,p]=P.values[A],b=G($,c,p,H);return new z({[c]:b})}throw new R(`Unexpected schema kind: ${P.kind} for ${z.constructor.name}`)}function X($,z,H,P=O){const A=new P(H),c=te($,z,A);if(A.offset<H.length)throw new R(`Unexpected ${H.length-A.offset} bytes after deserialized data`);return c}Pe.deserialize=X;function ee($,z,H,P=O){const A=new P(H);return te($,z,A)}return Pe.deserializeUnchecked=ee,Pe}var po=py(),Z={},kc;function yy(){if(kc)return Z;kc=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.s16=Z.s8=Z.nu64be=Z.u48be=Z.u40be=Z.u32be=Z.u24be=Z.u16be=Z.nu64=Z.u48=Z.u40=Z.u32=Z.u24=Z.u16=Z.u8=Z.offset=Z.greedy=Z.Constant=Z.UTF8=Z.CString=Z.Blob=Z.Boolean=Z.BitField=Z.BitStructure=Z.VariantLayout=Z.Union=Z.UnionLayoutDiscriminator=Z.UnionDiscriminator=Z.Structure=Z.Sequence=Z.DoubleBE=Z.Double=Z.FloatBE=Z.Float=Z.NearInt64BE=Z.NearInt64=Z.NearUInt64BE=Z.NearUInt64=Z.IntBE=Z.Int=Z.UIntBE=Z.UInt=Z.OffsetLayout=Z.GreedyCount=Z.ExternalLayout=Z.bindConstructorLayout=Z.nameWithProperty=Z.Layout=Z.uint8ArrayToBuffer=Z.checkUint8Array=void 0,Z.constant=Z.utf8=Z.cstr=Z.blob=Z.unionLayoutDiscriminator=Z.union=Z.seq=Z.bits=Z.struct=Z.f64be=Z.f64=Z.f32be=Z.f32=Z.ns64be=Z.s48be=Z.s40be=Z.s32be=Z.s24be=Z.s16be=Z.ns64=Z.s48=Z.s40=Z.s32=Z.s24=void 0;const r=ls();function e(a){if(!(a instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Z.checkUint8Array=e;function t(a){return e(a),r.Buffer.from(a.buffer,a.byteOffset,a.length)}Z.uint8ArrayToBuffer=t;class n{constructor(h,E){if(!Number.isInteger(h))throw new TypeError("span must be an integer");this.span=h,this.property=E}makeDestinationObject(){return{}}getSpan(h,E){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(h){const E=Object.create(this.constructor.prototype);return Object.assign(E,this),E.property=h,E}fromArray(h){}}Z.Layout=n;function s(a,h){return h.property?a+"["+h.property+"]":a}Z.nameWithProperty=s;function i(a,h){if(typeof a!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(a,"layout_"))throw new Error("Class is already bound to a layout");if(!(h&&h instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(h,"boundConstructor_"))throw new Error("layout is already bound to a constructor");a.layout_=h,h.boundConstructor_=a,h.makeDestinationObject=()=>new a,Object.defineProperty(a.prototype,"encode",{value(E,C){return h.encode(this,E,C)},writable:!0}),Object.defineProperty(a,"decode",{value(E,C){return h.decode(E,C)},writable:!0})}Z.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}Z.ExternalLayout=o;class u extends o{constructor(h=1,E){if(!Number.isInteger(h)||0>=h)throw new TypeError("elementSpan must be a (positive) integer");super(-1,E),this.elementSpan=h}isCount(){return!0}decode(h,E=0){e(h);const C=h.length-E;return Math.floor(C/this.elementSpan)}encode(h,E,C){return 0}}Z.GreedyCount=u;class f extends o{constructor(h,E=0,C){if(!(h instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(E))throw new TypeError("offset must be integer or undefined");super(h.span,C||h.property),this.layout=h,this.offset=E}isCount(){return this.layout instanceof y||this.layout instanceof g}decode(h,E=0){return this.layout.decode(h,E+this.offset)}encode(h,E,C=0){return this.layout.encode(h,E,C+this.offset)}}Z.OffsetLayout=f;class y extends n{constructor(h,E){if(super(h,E),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,E=0){return t(h).readUIntLE(E,this.span)}encode(h,E,C=0){return t(E).writeUIntLE(h,C,this.span),this.span}}Z.UInt=y;class g extends n{constructor(h,E){if(super(h,E),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,E=0){return t(h).readUIntBE(E,this.span)}encode(h,E,C=0){return t(E).writeUIntBE(h,C,this.span),this.span}}Z.UIntBE=g;class S extends n{constructor(h,E){if(super(h,E),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,E=0){return t(h).readIntLE(E,this.span)}encode(h,E,C=0){return t(E).writeIntLE(h,C,this.span),this.span}}Z.Int=S;class I extends n{constructor(h,E){if(super(h,E),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(h,E=0){return t(h).readIntBE(E,this.span)}encode(h,E,C=0){return t(E).writeIntBE(h,C,this.span),this.span}}Z.IntBE=I;const R=Math.pow(2,32);function T(a){const h=Math.floor(a/R),E=a-h*R;return{hi32:h,lo32:E}}function x(a,h){return a*R+h}class O extends n{constructor(h){super(8,h)}decode(h,E=0){const C=t(h),D=C.readUInt32LE(E),J=C.readUInt32LE(E+4);return x(J,D)}encode(h,E,C=0){const D=T(h),J=t(E);return J.writeUInt32LE(D.lo32,C),J.writeUInt32LE(D.hi32,C+4),8}}Z.NearUInt64=O;class L extends n{constructor(h){super(8,h)}decode(h,E=0){const C=t(h),D=C.readUInt32BE(E),J=C.readUInt32BE(E+4);return x(D,J)}encode(h,E,C=0){const D=T(h),J=t(E);return J.writeUInt32BE(D.hi32,C),J.writeUInt32BE(D.lo32,C+4),8}}Z.NearUInt64BE=L;class F extends n{constructor(h){super(8,h)}decode(h,E=0){const C=t(h),D=C.readUInt32LE(E),J=C.readInt32LE(E+4);return x(J,D)}encode(h,E,C=0){const D=T(h),J=t(E);return J.writeUInt32LE(D.lo32,C),J.writeInt32LE(D.hi32,C+4),8}}Z.NearInt64=F;class M extends n{constructor(h){super(8,h)}decode(h,E=0){const C=t(h),D=C.readInt32BE(E),J=C.readUInt32BE(E+4);return x(D,J)}encode(h,E,C=0){const D=T(h),J=t(E);return J.writeInt32BE(D.hi32,C),J.writeUInt32BE(D.lo32,C+4),8}}Z.NearInt64BE=M;class q extends n{constructor(h){super(4,h)}decode(h,E=0){return t(h).readFloatLE(E)}encode(h,E,C=0){return t(E).writeFloatLE(h,C),4}}Z.Float=q;class G extends n{constructor(h){super(4,h)}decode(h,E=0){return t(h).readFloatBE(E)}encode(h,E,C=0){return t(E).writeFloatBE(h,C),4}}Z.FloatBE=G;class te extends n{constructor(h){super(8,h)}decode(h,E=0){return t(h).readDoubleLE(E)}encode(h,E,C=0){return t(E).writeDoubleLE(h,C),8}}Z.Double=te;class X extends n{constructor(h){super(8,h)}decode(h,E=0){return t(h).readDoubleBE(E)}encode(h,E,C=0){return t(E).writeDoubleBE(h,C),8}}Z.DoubleBE=X;class ee extends n{constructor(h,E,C){if(!(h instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(E instanceof o&&E.isCount()||Number.isInteger(E)&&0<=E))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let D=-1;!(E instanceof o)&&0<h.span&&(D=E*h.span),super(D,C),this.elementLayout=h,this.count=E}getSpan(h,E=0){if(0<=this.span)return this.span;let C=0,D=this.count;if(D instanceof o&&(D=D.decode(h,E)),0<this.elementLayout.span)C=D*this.elementLayout.span;else{let J=0;for(;J<D;)C+=this.elementLayout.getSpan(h,E+C),++J}return C}decode(h,E=0){const C=[];let D=0,J=this.count;for(J instanceof o&&(J=J.decode(h,E));D<J;)C.push(this.elementLayout.decode(h,E)),E+=this.elementLayout.getSpan(h,E),D+=1;return C}encode(h,E,C=0){const D=this.elementLayout,J=h.reduce((ie,he)=>ie+D.encode(he,E,C+ie),0);return this.count instanceof o&&this.count.encode(h.length,E,C),J}}Z.Sequence=ee;class $ extends n{constructor(h,E,C){if(!(Array.isArray(h)&&h.reduce((J,ie)=>J&&ie instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof E=="boolean"&&C===void 0&&(C=E,E=void 0);for(const J of h)if(0>J.span&&J.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let D=-1;try{D=h.reduce((J,ie)=>J+ie.getSpan(),0)}catch{}super(D,E),this.fields=h,this.decodePrefixes=!!C}getSpan(h,E=0){if(0<=this.span)return this.span;let C=0;try{C=this.fields.reduce((D,J)=>{const ie=J.getSpan(h,E);return E+=ie,D+ie},0)}catch{throw new RangeError("indeterminate span")}return C}decode(h,E=0){e(h);const C=this.makeDestinationObject();for(const D of this.fields)if(D.property!==void 0&&(C[D.property]=D.decode(h,E)),E+=D.getSpan(h,E),this.decodePrefixes&&h.length===E)break;return C}encode(h,E,C=0){const D=C;let J=0,ie=0;for(const he of this.fields){let Le=he.span;if(ie=0<Le?Le:0,he.property!==void 0){const Re=h[he.property];Re!==void 0&&(ie=he.encode(Re,E,C),0>Le&&(Le=he.getSpan(E,C)))}J=C,C+=Le}return J+ie-D}fromArray(h){const E=this.makeDestinationObject();for(const C of this.fields)C.property!==void 0&&0<h.length&&(E[C.property]=h.shift());return E}layoutFor(h){if(typeof h!="string")throw new TypeError("property must be string");for(const E of this.fields)if(E.property===h)return E}offsetOf(h){if(typeof h!="string")throw new TypeError("property must be string");let E=0;for(const C of this.fields){if(C.property===h)return E;0>C.span?E=-1:0<=E&&(E+=C.span)}}}Z.Structure=$;class z{constructor(h){this.property=h}decode(h,E){throw new Error("UnionDiscriminator is abstract")}encode(h,E,C){throw new Error("UnionDiscriminator is abstract")}}Z.UnionDiscriminator=z;class H extends z{constructor(h,E){if(!(h instanceof o&&h.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(E||h.property||"variant"),this.layout=h}decode(h,E){return this.layout.decode(h,E)}encode(h,E,C){return this.layout.encode(h,E,C)}}Z.UnionLayoutDiscriminator=H;class P extends n{constructor(h,E,C){let D;if(h instanceof y||h instanceof g)D=new H(new f(h));else if(h instanceof o&&h.isCount())D=new H(h);else if(h instanceof z)D=h;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(E===void 0&&(E=null),!(E===null||E instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(E!==null){if(0>E.span)throw new Error("defaultLayout must have constant span");E.property===void 0&&(E=E.replicate("content"))}let J=-1;E&&(J=E.span,0<=J&&(h instanceof y||h instanceof g)&&(J+=D.layout.span)),super(J,C),this.discriminator=D,this.usesPrefixDiscriminator=h instanceof y||h instanceof g,this.defaultLayout=E,this.registry={};let ie=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(he){return ie(he)},this.configGetSourceVariant=function(he){ie=he.bind(this)}}getSpan(h,E=0){if(0<=this.span)return this.span;const C=this.getVariant(h,E);if(!C)throw new Error("unable to determine span for unrecognized variant");return C.getSpan(h,E)}defaultGetSourceVariant(h){if(Object.prototype.hasOwnProperty.call(h,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(h,this.defaultLayout.property))return;const E=this.registry[h[this.discriminator.property]];if(E&&(!E.layout||E.property&&Object.prototype.hasOwnProperty.call(h,E.property)))return E}else for(const E in this.registry){const C=this.registry[E];if(C.property&&Object.prototype.hasOwnProperty.call(h,C.property))return C}throw new Error("unable to infer src variant")}decode(h,E=0){let C;const D=this.discriminator,J=D.decode(h,E),ie=this.registry[J];if(ie===void 0){const he=this.defaultLayout;let Le=0;this.usesPrefixDiscriminator&&(Le=D.layout.span),C=this.makeDestinationObject(),C[D.property]=J,C[he.property]=he.decode(h,E+Le)}else C=ie.decode(h,E);return C}encode(h,E,C=0){const D=this.getSourceVariant(h);if(D===void 0){const J=this.discriminator,ie=this.defaultLayout;let he=0;return this.usesPrefixDiscriminator&&(he=J.layout.span),J.encode(h[J.property],E,C),he+ie.encode(h[ie.property],E,C+he)}return D.encode(h,E,C)}addVariant(h,E,C){const D=new A(this,h,E,C);return this.registry[h]=D,D}getVariant(h,E=0){let C;return h instanceof Uint8Array?C=this.discriminator.decode(h,E):C=h,this.registry[C]}}Z.Union=P;class A extends n{constructor(h,E,C,D){if(!(h instanceof P))throw new TypeError("union must be a Union");if(!Number.isInteger(E)||0>E)throw new TypeError("variant must be a (non-negative) integer");if(typeof C=="string"&&D===void 0&&(D=C,C=null),C){if(!(C instanceof n))throw new TypeError("layout must be a Layout");if(h.defaultLayout!==null&&0<=C.span&&C.span>h.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof D!="string")throw new TypeError("variant must have a String property")}let J=h.span;0>h.span&&(J=C?C.span:0,0<=J&&h.usesPrefixDiscriminator&&(J+=h.discriminator.layout.span)),super(J,D),this.union=h,this.variant=E,this.layout=C||null}getSpan(h,E=0){if(0<=this.span)return this.span;let C=0;this.union.usesPrefixDiscriminator&&(C=this.union.discriminator.layout.span);let D=0;return this.layout&&(D=this.layout.getSpan(h,E+C)),C+D}decode(h,E=0){const C=this.makeDestinationObject();if(this!==this.union.getVariant(h,E))throw new Error("variant mismatch");let D=0;return this.union.usesPrefixDiscriminator&&(D=this.union.discriminator.layout.span),this.layout?C[this.property]=this.layout.decode(h,E+D):this.property?C[this.property]=!0:this.union.usesPrefixDiscriminator&&(C[this.union.discriminator.property]=this.variant),C}encode(h,E,C=0){let D=0;if(this.union.usesPrefixDiscriminator&&(D=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(h,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,E,C);let J=D;if(this.layout&&(this.layout.encode(h[this.property],E,C+D),J+=this.layout.getSpan(E,C+D),0<=this.union.span&&J>this.union.span))throw new Error("encoded variant overruns containing union");return J}fromArray(h){if(this.layout)return this.layout.fromArray(h)}}Z.VariantLayout=A;function c(a){return 0>a&&(a+=4294967296),a}class p extends n{constructor(h,E,C){if(!(h instanceof y||h instanceof g))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof E=="string"&&C===void 0&&(C=E,E=!1),4<h.span)throw new RangeError("word cannot exceed 32 bits");super(h.span,C),this.word=h,this.msb=!!E,this.fields=[];let D=0;this._packedSetValue=function(J){return D=c(J),this},this._packedGetValue=function(){return D}}decode(h,E=0){const C=this.makeDestinationObject(),D=this.word.decode(h,E);this._packedSetValue(D);for(const J of this.fields)J.property!==void 0&&(C[J.property]=J.decode(h));return C}encode(h,E,C=0){const D=this.word.decode(E,C);this._packedSetValue(D);for(const J of this.fields)if(J.property!==void 0){const ie=h[J.property];ie!==void 0&&J.encode(ie)}return this.word.encode(this._packedGetValue(),E,C)}addField(h,E){const C=new b(this,h,E);return this.fields.push(C),C}addBoolean(h){const E=new v(this,h);return this.fields.push(E),E}fieldFor(h){if(typeof h!="string")throw new TypeError("property must be string");for(const E of this.fields)if(E.property===h)return E}}Z.BitStructure=p;class b{constructor(h,E,C){if(!(h instanceof p))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(E)||0>=E)throw new TypeError("bits must be positive integer");const D=8*h.span,J=h.fields.reduce((ie,he)=>ie+he.bits,0);if(E+J>D)throw new Error("bits too long for span remainder ("+(D-J)+" of "+D+" remain)");this.container=h,this.bits=E,this.valueMask=(1<<E)-1,E===32&&(this.valueMask=4294967295),this.start=J,this.container.msb&&(this.start=D-J-E),this.wordMask=c(this.valueMask<<this.start),this.property=C}decode(h,E){const C=this.container._packedGetValue();return c(C&this.wordMask)>>>this.start}encode(h){if(typeof h!="number"||!Number.isInteger(h)||h!==c(h&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const E=this.container._packedGetValue(),C=c(h<<this.start);this.container._packedSetValue(c(E&~this.wordMask)|C)}}Z.BitField=b;class v extends b{constructor(h,E){super(h,1,E)}decode(h,E){return!!super.decode(h,E)}encode(h){typeof h=="boolean"&&(h=+h),super.encode(h)}}Z.Boolean=v;class k extends n{constructor(h,E){if(!(h instanceof o&&h.isCount()||Number.isInteger(h)&&0<=h))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let C=-1;h instanceof o||(C=h),super(C,E),this.length=h}getSpan(h,E){let C=this.span;return 0>C&&(C=this.length.decode(h,E)),C}decode(h,E=0){let C=this.span;return 0>C&&(C=this.length.decode(h,E)),t(h).slice(E,E+C)}encode(h,E,C){let D=this.length;if(this.length instanceof o&&(D=h.length),!(h instanceof Uint8Array&&D===h.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+D+") Uint8Array as src");if(C+D>E.length)throw new RangeError("encoding overruns Uint8Array");const J=t(h);return t(E).write(J.toString("hex"),C,D,"hex"),this.length instanceof o&&this.length.encode(D,E,C),D}}Z.Blob=k;class _ extends n{constructor(h){super(-1,h)}getSpan(h,E=0){e(h);let C=E;for(;C<h.length&&h[C]!==0;)C+=1;return 1+C-E}decode(h,E=0){const C=this.getSpan(h,E);return t(h).slice(E,E+C-1).toString("utf-8")}encode(h,E,C=0){typeof h!="string"&&(h=String(h));const D=r.Buffer.from(h,"utf8"),J=D.length;if(C+J>E.length)throw new RangeError("encoding overruns Buffer");const ie=t(E);return D.copy(ie,C),ie[C+J]=0,J+1}}Z.CString=_;class d extends n{constructor(h,E){if(typeof h=="string"&&E===void 0&&(E=h,h=void 0),h===void 0)h=-1;else if(!Number.isInteger(h))throw new TypeError("maxSpan must be an integer");super(-1,E),this.maxSpan=h}getSpan(h,E=0){return e(h),h.length-E}decode(h,E=0){const C=this.getSpan(h,E);if(0<=this.maxSpan&&this.maxSpan<C)throw new RangeError("text length exceeds maxSpan");return t(h).slice(E,E+C).toString("utf-8")}encode(h,E,C=0){typeof h!="string"&&(h=String(h));const D=r.Buffer.from(h,"utf8"),J=D.length;if(0<=this.maxSpan&&this.maxSpan<J)throw new RangeError("text length exceeds maxSpan");if(C+J>E.length)throw new RangeError("encoding overruns Buffer");return D.copy(t(E),C),J}}Z.UTF8=d;class l extends n{constructor(h,E){super(0,E),this.value=h}decode(h,E){return this.value}encode(h,E,C){return 0}}return Z.Constant=l,Z.greedy=(a,h)=>new u(a,h),Z.offset=(a,h,E)=>new f(a,h,E),Z.u8=a=>new y(1,a),Z.u16=a=>new y(2,a),Z.u24=a=>new y(3,a),Z.u32=a=>new y(4,a),Z.u40=a=>new y(5,a),Z.u48=a=>new y(6,a),Z.nu64=a=>new O(a),Z.u16be=a=>new g(2,a),Z.u24be=a=>new g(3,a),Z.u32be=a=>new g(4,a),Z.u40be=a=>new g(5,a),Z.u48be=a=>new g(6,a),Z.nu64be=a=>new L(a),Z.s8=a=>new S(1,a),Z.s16=a=>new S(2,a),Z.s24=a=>new S(3,a),Z.s32=a=>new S(4,a),Z.s40=a=>new S(5,a),Z.s48=a=>new S(6,a),Z.ns64=a=>new F(a),Z.s16be=a=>new I(2,a),Z.s24be=a=>new I(3,a),Z.s32be=a=>new I(4,a),Z.s40be=a=>new I(5,a),Z.s48be=a=>new I(6,a),Z.ns64be=a=>new M(a),Z.f32=a=>new q(a),Z.f32be=a=>new G(a),Z.f64=a=>new te(a),Z.f64be=a=>new X(a),Z.struct=(a,h,E)=>new $(a,h,E),Z.bits=(a,h,E)=>new p(a,h,E),Z.seq=(a,h,E)=>new ee(a,h,E),Z.union=(a,h,E)=>new P(a,h,E),Z.unionLayoutDiscriminator=(a,h)=>new H(a,h),Z.blob=(a,h)=>new k(a,h),Z.cstr=a=>new _(a),Z.utf8=(a,h)=>new d(a,h),Z.constant=(a,h)=>new l(a,h),Z}var U=yy(),$n={},xc;function gy(){if(xc)return $n;xc=1,Object.defineProperty($n,"__esModule",{value:!0});function r(s){{const i=ye.from(s);i.reverse();const o=i.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}$n.toBigIntLE=r;function e(s){{const i=s.toString("hex");return i.length===0?BigInt(0):BigInt(`0x${i}`)}}$n.toBigIntBE=e;function t(s,i){{const o=s.toString(16),u=ye.from(o.padStart(i*2,"0").slice(0,i*2),"hex");return u.reverse(),u}}$n.toBufferLE=t;function n(s,i){{const o=s.toString(16);return ye.from(o.padStart(i*2,"0").slice(0,i*2),"hex")}}return $n.toBufferBE=n,$n}var Zo=gy();let my=class extends TypeError{constructor(e,t){let n;const{message:s,explanation:i,...o}=e,{path:u}=e,f=u.length===0?s:`At path: ${u.join(".")} -- ${s}`;super(i??f),i!=null&&(this.cause=f),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}};function _y(r){return di(r)&&typeof r[Symbol.iterator]=="function"}function di(r){return typeof r=="object"&&r!=null}function es(r){return di(r)&&!Array.isArray(r)}function Qt(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function wy(r){const{done:e,value:t}=r.next();return e?void 0:t}function by(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=e,{type:o}=t,{refinement:u,message:f=`Expected a value of type \`${o}\`${u?` with refinement \`${u}\``:""}, but received: \`${Qt(n)}\``}=r;return{value:n,type:o,refinement:u,key:s[s.length-1],path:s,branch:i,...r,message:f}}function*Cc(r,e,t,n){_y(r)||(r=[r]);for(const s of r){const i=by(s,e,t,n);i&&(yield i)}}function*Ia(r,e,t={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=t,u={path:n,branch:s,mask:o};i&&(r=e.coercer(r,u));let f="valid";for(const y of e.validator(r,u))y.explanation=t.message,f="not_valid",yield[y,void 0];for(let[y,g,S]of e.entries(r,u)){const I=Ia(g,S,{path:y===void 0?n:[...n,y],branch:y===void 0?s:[...s,g],coerce:i,mask:o,message:t.message});for(const R of I)R[0]?(f=R[0].refinement!=null?"not_refined":"not_valid",yield[R[0],void 0]):i&&(g=R[1],y===void 0?r=g:r instanceof Map?r.set(y,g):r instanceof Set?r.add(g):di(r)&&(g!==void 0||y in r)&&(r[y]=g))}if(f!=="not_valid")for(const y of e.refiner(r,u))y.explanation=t.message,f="not_refined",yield[y,void 0];f==="valid"&&(yield[void 0,r])}let dn=class{constructor(e){const{type:t,schema:n,validator:s,refiner:i,coercer:o=f=>f,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=o,s?this.validator=(f,y)=>{const g=s(f,y);return Cc(g,y,this,f)}:this.validator=()=>[],i?this.refiner=(f,y)=>{const g=i(f,y);return Cc(g,y,this,f)}:this.refiner=()=>[]}assert(e,t){return $l(e,this,t)}create(e,t){return oe(e,this,t)}is(e){return Kl(e,this)}mask(e,t){return Ry(e,this,t)}validate(e,t={}){return hi(e,this,t)}};function $l(r,e,t){const n=hi(r,e,{message:t});if(n[0])throw n[0]}function oe(r,e,t){const n=hi(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function Ry(r,e,t){const n=hi(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function Kl(r,e){return!hi(r,e)[0]}function hi(r,e,t={}){const n=Ia(r,e,t),s=wy(n);return s[0]?[new my(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function or(r,e){return new dn({type:r,schema:null,validator:e})}function Ey(){return or("any",()=>!0)}function ce(r){return new dn({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Qt(e)}`}})}function un(){return or("boolean",r=>typeof r=="boolean")}function Oa(r){return or("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${Qt(e)}`)}function Ze(r){const e=Qt(r),t=typeof r;return new dn({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${Qt(n)}`}})}function Ay(){return or("never",()=>!1)}function ue(r){return new dn({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function W(){return or("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Qt(r)}`)}function ge(r){return new dn({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function ql(r,e){return new dn({type:"record",schema:null,*entries(t){if(di(t))for(const n in t){const s=t[n];yield[n,n,r],yield[n,s,e]}},validator(t){return es(t)||`Expected an object, but received: ${Qt(t)}`},coercer(t){return es(t)?{...t}:t}})}function se(){return or("string",r=>typeof r=="string"||`Expected a string, but received: ${Qt(r)}`)}function Sa(r){const e=Ay();return new dn({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let s=0;s<n;s++)yield[s,t[s],r[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Qt(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function re(r){const e=Object.keys(r);return new dn({type:"type",schema:r,*entries(t){if(di(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return es(t)||`Expected an object, but received: ${Qt(t)}`},coercer(t){return es(t)?{...t}:t}})}function Pt(r){const e=r.map(t=>t.type).join(" | ");return new dn({type:"union",schema:null,coercer(t,n){for(const s of r){const[i,o]=s.validate(t,{coerce:!0,mask:n.mask});if(!i)return o}return t},validator(t,n){const s=[];for(const i of r){const[...o]=Ia(t,i,n),[u]=o;if(u[0])for(const[f]of o)f&&s.push(f);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Qt(t)}`,...s]}})}function Ur(){return or("unknown",()=>!0)}function fi(r,e,t){return new dn({...r,coercer:(n,s)=>Kl(n,e)?r.coercer(t(n,s),s):r.coercer(n,s)})}var Ni,vy=new Uint8Array(16);function Vl(){if(!Ni&&(Ni=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ni))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ni(vy)}const Iy=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ms(r){return typeof r=="string"&&Iy.test(r)}var kt=[];for(var yo=0;yo<256;++yo)kt.push((yo+256).toString(16).substr(1));function _s(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(kt[r[e+0]]+kt[r[e+1]]+kt[r[e+2]]+kt[r[e+3]]+"-"+kt[r[e+4]]+kt[r[e+5]]+"-"+kt[r[e+6]]+kt[r[e+7]]+"-"+kt[r[e+8]]+kt[r[e+9]]+"-"+kt[r[e+10]]+kt[r[e+11]]+kt[r[e+12]]+kt[r[e+13]]+kt[r[e+14]]+kt[r[e+15]]).toLowerCase();if(!ms(t))throw TypeError("Stringified UUID is invalid");return t}var Bc,go,mo=0,_o=0;function Oy(r,e,t){var n=e&&t||0,s=e||new Array(16);r=r||{};var i=r.node||Bc,o=r.clockseq!==void 0?r.clockseq:go;if(i==null||o==null){var u=r.random||(r.rng||Vl)();i==null&&(i=Bc=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),o==null&&(o=go=(u[6]<<8|u[7])&16383)}var f=r.msecs!==void 0?r.msecs:Date.now(),y=r.nsecs!==void 0?r.nsecs:_o+1,g=f-mo+(y-_o)/1e4;if(g<0&&r.clockseq===void 0&&(o=o+1&16383),(g<0||f>mo)&&r.nsecs===void 0&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");mo=f,_o=y,go=o,f+=122192928e5;var S=((f&268435455)*1e4+y)%4294967296;s[n++]=S>>>24&255,s[n++]=S>>>16&255,s[n++]=S>>>8&255,s[n++]=S&255;var I=f/4294967296*1e4&268435455;s[n++]=I>>>8&255,s[n++]=I&255,s[n++]=I>>>24&15|16,s[n++]=I>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var R=0;R<6;++R)s[n+R]=i[R];return e||_s(s)}function Gl(r){if(!ms(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function Sy(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var Ty="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ny="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Wl(r,e,t){function n(s,i,o,u){if(typeof s=="string"&&(s=Sy(s)),typeof i=="string"&&(i=Gl(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+s.length);if(f.set(i),f.set(s,i.length),f=t(f),f[6]=f[6]&15|e,f[8]=f[8]&63|128,o){u=u||0;for(var y=0;y<16;++y)o[u+y]=f[y];return o}return _s(f)}try{n.name=r}catch{}return n.DNS=Ty,n.URL=Ny,n}function ky(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return xy(Cy(By(r),r.length*8))}function xy(r){for(var e=[],t=r.length*32,n="0123456789abcdef",s=0;s<t;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(o)}return e}function jl(r){return(r+64>>>9<<4)+14+1}function Cy(r,e){r[e>>5]|=128<<e%32,r[jl(e)-1]=e;for(var t=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var u=t,f=n,y=s,g=i;t=xt(t,n,s,i,r[o],7,-680876936),i=xt(i,t,n,s,r[o+1],12,-389564586),s=xt(s,i,t,n,r[o+2],17,606105819),n=xt(n,s,i,t,r[o+3],22,-1044525330),t=xt(t,n,s,i,r[o+4],7,-176418897),i=xt(i,t,n,s,r[o+5],12,1200080426),s=xt(s,i,t,n,r[o+6],17,-1473231341),n=xt(n,s,i,t,r[o+7],22,-45705983),t=xt(t,n,s,i,r[o+8],7,1770035416),i=xt(i,t,n,s,r[o+9],12,-1958414417),s=xt(s,i,t,n,r[o+10],17,-42063),n=xt(n,s,i,t,r[o+11],22,-1990404162),t=xt(t,n,s,i,r[o+12],7,1804603682),i=xt(i,t,n,s,r[o+13],12,-40341101),s=xt(s,i,t,n,r[o+14],17,-1502002290),n=xt(n,s,i,t,r[o+15],22,1236535329),t=Ct(t,n,s,i,r[o+1],5,-165796510),i=Ct(i,t,n,s,r[o+6],9,-1069501632),s=Ct(s,i,t,n,r[o+11],14,643717713),n=Ct(n,s,i,t,r[o],20,-373897302),t=Ct(t,n,s,i,r[o+5],5,-701558691),i=Ct(i,t,n,s,r[o+10],9,38016083),s=Ct(s,i,t,n,r[o+15],14,-660478335),n=Ct(n,s,i,t,r[o+4],20,-405537848),t=Ct(t,n,s,i,r[o+9],5,568446438),i=Ct(i,t,n,s,r[o+14],9,-1019803690),s=Ct(s,i,t,n,r[o+3],14,-187363961),n=Ct(n,s,i,t,r[o+8],20,1163531501),t=Ct(t,n,s,i,r[o+13],5,-1444681467),i=Ct(i,t,n,s,r[o+2],9,-51403784),s=Ct(s,i,t,n,r[o+7],14,1735328473),n=Ct(n,s,i,t,r[o+12],20,-1926607734),t=Bt(t,n,s,i,r[o+5],4,-378558),i=Bt(i,t,n,s,r[o+8],11,-2022574463),s=Bt(s,i,t,n,r[o+11],16,1839030562),n=Bt(n,s,i,t,r[o+14],23,-35309556),t=Bt(t,n,s,i,r[o+1],4,-1530992060),i=Bt(i,t,n,s,r[o+4],11,1272893353),s=Bt(s,i,t,n,r[o+7],16,-155497632),n=Bt(n,s,i,t,r[o+10],23,-1094730640),t=Bt(t,n,s,i,r[o+13],4,681279174),i=Bt(i,t,n,s,r[o],11,-358537222),s=Bt(s,i,t,n,r[o+3],16,-722521979),n=Bt(n,s,i,t,r[o+6],23,76029189),t=Bt(t,n,s,i,r[o+9],4,-640364487),i=Bt(i,t,n,s,r[o+12],11,-421815835),s=Bt(s,i,t,n,r[o+15],16,530742520),n=Bt(n,s,i,t,r[o+2],23,-995338651),t=Lt(t,n,s,i,r[o],6,-198630844),i=Lt(i,t,n,s,r[o+7],10,1126891415),s=Lt(s,i,t,n,r[o+14],15,-1416354905),n=Lt(n,s,i,t,r[o+5],21,-57434055),t=Lt(t,n,s,i,r[o+12],6,1700485571),i=Lt(i,t,n,s,r[o+3],10,-1894986606),s=Lt(s,i,t,n,r[o+10],15,-1051523),n=Lt(n,s,i,t,r[o+1],21,-2054922799),t=Lt(t,n,s,i,r[o+8],6,1873313359),i=Lt(i,t,n,s,r[o+15],10,-30611744),s=Lt(s,i,t,n,r[o+6],15,-1560198380),n=Lt(n,s,i,t,r[o+13],21,1309151649),t=Lt(t,n,s,i,r[o+4],6,-145523070),i=Lt(i,t,n,s,r[o+11],10,-1120210379),s=Lt(s,i,t,n,r[o+2],15,718787259),n=Lt(n,s,i,t,r[o+9],21,-343485551),t=xn(t,u),n=xn(n,f),s=xn(s,y),i=xn(i,g)}return[t,n,s,i]}function By(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(jl(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function xn(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function Ly(r,e){return r<<e|r>>>32-e}function ws(r,e,t,n,s,i){return xn(Ly(xn(xn(e,r),xn(n,i)),s),t)}function xt(r,e,t,n,s,i,o){return ws(e&t|~e&n,r,e,s,i,o)}function Ct(r,e,t,n,s,i,o){return ws(e&n|t&~n,r,e,s,i,o)}function Bt(r,e,t,n,s,i,o){return ws(e^t^n,r,e,s,i,o)}function Lt(r,e,t,n,s,i,o){return ws(t^(e|~n),r,e,s,i,o)}var My=Wl("v3",48,ky);function Py(r,e,t){r=r||{};var n=r.random||(r.rng||Vl)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=n[s];return e}return _s(n)}function Uy(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function wo(r,e){return r<<e|r>>>32-e}function Dy(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),u=new Array(o),f=0;f<o;++f){for(var y=new Uint32Array(16),g=0;g<16;++g)y[g]=r[f*64+g*4]<<24|r[f*64+g*4+1]<<16|r[f*64+g*4+2]<<8|r[f*64+g*4+3];u[f]=y}u[o-1][14]=(r.length-1)*8/Math.pow(2,32),u[o-1][14]=Math.floor(u[o-1][14]),u[o-1][15]=(r.length-1)*8&4294967295;for(var S=0;S<o;++S){for(var I=new Uint32Array(80),R=0;R<16;++R)I[R]=u[S][R];for(var T=16;T<80;++T)I[T]=wo(I[T-3]^I[T-8]^I[T-14]^I[T-16],1);for(var x=t[0],O=t[1],L=t[2],F=t[3],M=t[4],q=0;q<80;++q){var G=Math.floor(q/20),te=wo(x,5)+Uy(G,O,L,F)+M+e[G]+I[q]>>>0;M=F,F=L,L=wo(O,30)>>>0,O=x,x=te}t[0]=t[0]+x>>>0,t[1]=t[1]+O>>>0,t[2]=t[2]+L>>>0,t[3]=t[3]+F>>>0,t[4]=t[4]+M>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Hy=Wl("v5",80,Dy);const Fy="00000000-0000-0000-0000-000000000000";function zy(r){if(!ms(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const $y=Object.freeze(Object.defineProperty({__proto__:null,NIL:Fy,parse:Gl,stringify:_s,v1:Oy,v3:My,v4:Py,v5:Hy,validate:ms,version:zy},Symbol.toStringTag,{value:"Module"})),Yl=pa($y);var bo,Lc;function Ky(){if(Lc)return bo;Lc=1;const r=Yl.v4;return bo=function(t,n,s,i){if(typeof t!="string")throw new TypeError(t+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const u={method:t};if(o===2&&(u.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");u.params=n}if(typeof s>"u"){const f=typeof i.generator=="function"?i.generator:function(){return r()};u.id=f(u,i)}else o===2&&s===null?i.notificationIdNull&&(u.id=null):u.id=s;return u},bo}var Ro,Mc;function qy(){if(Mc)return Ro;Mc=1;const r=Yl.v4,e=Ky(),t=function(n,s){if(!(this instanceof t))return new t(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return r()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return Ro=t,t.prototype.request=function(n,s,i,o){const u=this;let f=null;const y=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&y)throw new TypeError("JSON-RPC 1.0 does not support batching");if(y||!y&&n&&typeof n=="object"&&typeof s=="function")o=s,f=n;else{typeof i=="function"&&(o=i,i=void 0);const I=typeof o=="function";try{f=e(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(R){if(I)return o(R);throw R}if(!I)return f}let S;try{S=JSON.stringify(f,this.options.replacer)}catch(I){return o(I)}return this.callServer(S,function(I,R){u._parseResponse(I,R,o)}),f},t.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(u){return i(u)}if(i.length===3)if(Array.isArray(o)){const u=function(y){return typeof y.error<"u"},f=function(y){return!u(y)};return i(null,o.filter(u),o.filter(f))}else return i(null,o.error,o.result);i(null,o)},Ro}var Vy=qy();const Gy=Br(Vy);var Eo={exports:{}},Pc;function Wy(){return Pc||(Pc=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(f,y,g){this.fn=f,this.context=y,this.once=g||!1}function i(f,y,g,S,I){if(typeof g!="function")throw new TypeError("The listener must be a function");var R=new s(g,S||f,I),T=t?t+y:y;return f._events[T]?f._events[T].fn?f._events[T]=[f._events[T],R]:f._events[T].push(R):(f._events[T]=R,f._eventsCount++),f}function o(f,y){--f._eventsCount===0?f._events=new n:delete f._events[y]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var y=[],g,S;if(this._eventsCount===0)return y;for(S in g=this._events)e.call(g,S)&&y.push(t?S.slice(1):S);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(g)):y},u.prototype.listeners=function(y){var g=t?t+y:y,S=this._events[g];if(!S)return[];if(S.fn)return[S.fn];for(var I=0,R=S.length,T=new Array(R);I<R;I++)T[I]=S[I].fn;return T},u.prototype.listenerCount=function(y){var g=t?t+y:y,S=this._events[g];return S?S.fn?1:S.length:0},u.prototype.emit=function(y,g,S,I,R,T){var x=t?t+y:y;if(!this._events[x])return!1;var O=this._events[x],L=arguments.length,F,M;if(O.fn){switch(O.once&&this.removeListener(y,O.fn,void 0,!0),L){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,g),!0;case 3:return O.fn.call(O.context,g,S),!0;case 4:return O.fn.call(O.context,g,S,I),!0;case 5:return O.fn.call(O.context,g,S,I,R),!0;case 6:return O.fn.call(O.context,g,S,I,R,T),!0}for(M=1,F=new Array(L-1);M<L;M++)F[M-1]=arguments[M];O.fn.apply(O.context,F)}else{var q=O.length,G;for(M=0;M<q;M++)switch(O[M].once&&this.removeListener(y,O[M].fn,void 0,!0),L){case 1:O[M].fn.call(O[M].context);break;case 2:O[M].fn.call(O[M].context,g);break;case 3:O[M].fn.call(O[M].context,g,S);break;case 4:O[M].fn.call(O[M].context,g,S,I);break;default:if(!F)for(G=1,F=new Array(L-1);G<L;G++)F[G-1]=arguments[G];O[M].fn.apply(O[M].context,F)}}return!0},u.prototype.on=function(y,g,S){return i(this,y,g,S,!1)},u.prototype.once=function(y,g,S){return i(this,y,g,S,!0)},u.prototype.removeListener=function(y,g,S,I){var R=t?t+y:y;if(!this._events[R])return this;if(!g)return o(this,R),this;var T=this._events[R];if(T.fn)T.fn===g&&(!I||T.once)&&(!S||T.context===S)&&o(this,R);else{for(var x=0,O=[],L=T.length;x<L;x++)(T[x].fn!==g||I&&!T[x].once||S&&T[x].context!==S)&&O.push(T[x]);O.length?this._events[R]=O.length===1?O[0]:O:o(this,R)}return this},u.prototype.removeAllListeners=function(y){var g;return y?(g=t?t+y:y,this._events[g]&&o(this,g)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,r.exports=u}(Eo)),Eo.exports}var jy=Wy();const Zl=Br(jy);var Yy=class extends Zl{constructor(e,t,n){super();It(this,"socket");this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(e,t,n){const s=n||t;try{this.socket.send(e),s()}catch(i){s(i)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,n){this.socket.addEventListener(e,t,n)}};function Zy(r,e){return new Yy(r,e)}var Xy=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Jy=class extends Zl{constructor(e,t="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...u}={},f,y){super();It(this,"address");It(this,"rpc_id");It(this,"queue");It(this,"options");It(this,"autoconnect");It(this,"ready");It(this,"reconnect");It(this,"reconnect_timer_id");It(this,"reconnect_interval");It(this,"max_reconnects");It(this,"rest_options");It(this,"current_reconnects");It(this,"generate_request_id");It(this,"socket");It(this,"webSocketFactory");It(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=u,this.current_reconnects=0,this.generate_request_id=f||(()=>++this.rpc_id),y?this.dataPack=y:this.dataPack=new Xy,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const u=this.generate_request_id(e,t),f={jsonrpc:"2.0",method:e,params:t||void 0,id:u};this.socket.send(this.dataPack.encode(f),s,y=>{if(y)return o(y);this.queue[u]={promise:[i,o]},n&&(this.queue[u].timeout=setTimeout(()=>{delete this.queue[u],o(new Error("reply timeout"))},n))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=fe.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}};const Xl=[],Jl=[],Ql=[],Qy=BigInt(0),qr=BigInt(1),eg=BigInt(2),tg=BigInt(7),ng=BigInt(256),rg=BigInt(113);for(let r=0,e=qr,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],Xl.push(2*(5*n+t)),Jl.push((r+1)*(r+2)/2%64);let s=Qy;for(let i=0;i<7;i++)e=(e<<qr^(e>>tg)*rg)%ng,e&eg&&(s^=qr<<(qr<<BigInt(i))-qr);Ql.push(s)}const[ig,sg]=Sl(Ql,!0),Uc=(r,e,t)=>t>32?kl(r,e,t):Tl(r,e,t),Dc=(r,e,t)=>t>32?xl(r,e,t):Nl(r,e,t);function og(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const u=(o+8)%10,f=(o+2)%10,y=t[f],g=t[f+1],S=Uc(y,g,1)^t[u],I=Dc(y,g,1)^t[u+1];for(let R=0;R<50;R+=10)r[o+R]^=S,r[o+R+1]^=I}let s=r[2],i=r[3];for(let o=0;o<24;o++){const u=Jl[o],f=Uc(s,i,u),y=Dc(s,i,u),g=Xl[o];s=r[g],i=r[g+1],r[g]=f,r[g+1]=y}for(let o=0;o<50;o+=10){for(let u=0;u<10;u++)t[u]=r[o+u];for(let u=0;u<10;u++)r[o+u]^=~t[(u+2)%10]&t[(u+4)%10]}r[0]^=ig[n],r[1]^=sg[n]}t.fill(0)}class Ta extends ma{constructor(e,t,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Yi(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=jp(this.state)}keccak(){gc||mc(this.state32),og(this.state32,this.rounds),gc||mc(this.state32),this.posOut=0,this.pos=0}update(e){vr(this);const{blockLen:t,state:n}=this;e=ds(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let u=0;u<o;u++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,(t&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){vr(this,!1),ui(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Yi(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Al(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Ta(t,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const ag=(r,e,t)=>_a(()=>new Ta(e,r,t)),Hc=ag(1,136,256/8);class ed extends ma{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Wp(e);const n=ds(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return vr(this),this.iHash.update(e),this}digestInto(e){vr(this),ui(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:u}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const td=(r,e,t)=>new ed(r,e).update(t).digest();td.create=(r,e)=>new ed(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fc(r){r.lowS!==void 0&&An("lowS",r.lowS),r.prehash!==void 0&&An("prehash",r.prehash)}function cg(r){const e=Ra(r);Mr(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:s}=e;if(t){if(!n.eql(s,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:ug,hexToBytes:lg}=k0;class dg extends Error{constructor(e=""){super(e)}}const gn={Err:dg,_tlv:{encode:(r,e)=>{const{Err:t}=gn;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,s=pr(n);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=n>127?pr(s.length/2|128):"";return pr(r)+i+s+e},decode(r,e){const{Err:t}=gn;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const f=s&127;if(!f)throw new t("tlv.decode(long): indefinite length not supported");if(f>4)throw new t("tlv.decode(long): byte length is too big");const y=e.subarray(n,n+f);if(y.length!==f)throw new t("tlv.decode: length bytes not complete");if(y[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const g of y)o=o<<8|g;if(n+=f,o<128)throw new t("tlv.decode(long): not minimal encoding")}const u=e.subarray(n,n+o);if(u.length!==o)throw new t("tlv.decode: wrong value length");return{v:u,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=gn;if(r<bn)throw new e("integer: negative integers are not allowed");let t=pr(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=gn;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ug(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=gn,s=typeof r=="string"?lg(r):r;li(s);const{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:u,l:f}=n.decode(2,i),{v:y,l:g}=n.decode(2,f);if(g.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(u),s:t.decode(y)}},hexFromSig(r){const{_tlv:e,_int:t}=gn,n=e.encode(2,t.encode(r.r)),s=e.encode(2,t.encode(r.s)),i=n+s;return e.encode(48,i)}},bn=BigInt(0),Ot=BigInt(1);BigInt(2);const zc=BigInt(3);BigInt(4);function hg(r){const e=cg(r),{Fp:t}=e,n=ys(e.n,e.nBitLength),s=e.toBytes||((x,O,L)=>{const F=O.toAffine();return nr(Uint8Array.from([4]),t.toBytes(F.x),t.toBytes(F.y))}),i=e.fromBytes||(x=>{const O=x.subarray(1),L=t.fromBytes(O.subarray(0,t.BYTES)),F=t.fromBytes(O.subarray(t.BYTES,2*t.BYTES));return{x:L,y:F}});function o(x){const{a:O,b:L}=e,F=t.sqr(x),M=t.mul(F,x);return t.add(t.add(M,t.mul(x,O)),L)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function u(x){return ps(x,Ot,e.n)}function f(x){const{allowedPrivateKeyLengths:O,nByteLength:L,wrapPrivateKey:F,n:M}=e;if(O&&typeof x!="bigint"){if(er(x)&&(x=tr(x)),typeof x!="string"||!O.includes(x.length))throw new Error("invalid private key");x=x.padStart(L*2,"0")}let q;try{q=typeof x=="bigint"?x:Qn(Rt("private key",x,L))}catch{throw new Error("invalid private key, expected hex or "+L+" bytes, got "+typeof x)}return F&&(q=Ye(q,M)),Wt("private key",q,Ot,M),q}function y(x){if(!(x instanceof I))throw new Error("ProjectivePoint expected")}const g=Qr((x,O)=>{const{px:L,py:F,pz:M}=x;if(t.eql(M,t.ONE))return{x:L,y:F};const q=x.is0();O==null&&(O=q?t.ONE:t.inv(M));const G=t.mul(L,O),te=t.mul(F,O),X=t.mul(M,O);if(q)return{x:t.ZERO,y:t.ZERO};if(!t.eql(X,t.ONE))throw new Error("invZ was invalid");return{x:G,y:te}}),S=Qr(x=>{if(x.is0()){if(e.allowInfinityPoint&&!t.is0(x.py))return;throw new Error("bad point: ZERO")}const{x:O,y:L}=x.toAffine();if(!t.isValid(O)||!t.isValid(L))throw new Error("bad point: x or y not FE");const F=t.sqr(L),M=o(O);if(!t.eql(F,M))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class I{constructor(O,L,F){if(this.px=O,this.py=L,this.pz=F,O==null||!t.isValid(O))throw new Error("x required");if(L==null||!t.isValid(L))throw new Error("y required");if(F==null||!t.isValid(F))throw new Error("z required");Object.freeze(this)}static fromAffine(O){const{x:L,y:F}=O||{};if(!O||!t.isValid(L)||!t.isValid(F))throw new Error("invalid affine point");if(O instanceof I)throw new Error("projective point not allowed");const M=q=>t.eql(q,t.ZERO);return M(L)&&M(F)?I.ZERO:new I(L,F,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(O){const L=t.invertBatch(O.map(F=>F.pz));return O.map((F,M)=>F.toAffine(L[M])).map(I.fromAffine)}static fromHex(O){const L=I.fromAffine(i(Rt("pointHex",O)));return L.assertValidity(),L}static fromPrivateKey(O){return I.BASE.multiply(f(O))}static msm(O,L){return Fl(I,n,O,L)}_setWindowSize(O){T.setWindowSize(this,O)}assertValidity(){S(this)}hasEvenY(){const{y:O}=this.toAffine();if(t.isOdd)return!t.isOdd(O);throw new Error("Field doesn't support isOdd")}equals(O){y(O);const{px:L,py:F,pz:M}=this,{px:q,py:G,pz:te}=O,X=t.eql(t.mul(L,te),t.mul(q,M)),ee=t.eql(t.mul(F,te),t.mul(G,M));return X&&ee}negate(){return new I(this.px,t.neg(this.py),this.pz)}double(){const{a:O,b:L}=e,F=t.mul(L,zc),{px:M,py:q,pz:G}=this;let te=t.ZERO,X=t.ZERO,ee=t.ZERO,$=t.mul(M,M),z=t.mul(q,q),H=t.mul(G,G),P=t.mul(M,q);return P=t.add(P,P),ee=t.mul(M,G),ee=t.add(ee,ee),te=t.mul(O,ee),X=t.mul(F,H),X=t.add(te,X),te=t.sub(z,X),X=t.add(z,X),X=t.mul(te,X),te=t.mul(P,te),ee=t.mul(F,ee),H=t.mul(O,H),P=t.sub($,H),P=t.mul(O,P),P=t.add(P,ee),ee=t.add($,$),$=t.add(ee,$),$=t.add($,H),$=t.mul($,P),X=t.add(X,$),H=t.mul(q,G),H=t.add(H,H),$=t.mul(H,P),te=t.sub(te,$),ee=t.mul(H,z),ee=t.add(ee,ee),ee=t.add(ee,ee),new I(te,X,ee)}add(O){y(O);const{px:L,py:F,pz:M}=this,{px:q,py:G,pz:te}=O;let X=t.ZERO,ee=t.ZERO,$=t.ZERO;const z=e.a,H=t.mul(e.b,zc);let P=t.mul(L,q),A=t.mul(F,G),c=t.mul(M,te),p=t.add(L,F),b=t.add(q,G);p=t.mul(p,b),b=t.add(P,A),p=t.sub(p,b),b=t.add(L,M);let v=t.add(q,te);return b=t.mul(b,v),v=t.add(P,c),b=t.sub(b,v),v=t.add(F,M),X=t.add(G,te),v=t.mul(v,X),X=t.add(A,c),v=t.sub(v,X),$=t.mul(z,b),X=t.mul(H,c),$=t.add(X,$),X=t.sub(A,$),$=t.add(A,$),ee=t.mul(X,$),A=t.add(P,P),A=t.add(A,P),c=t.mul(z,c),b=t.mul(H,b),A=t.add(A,c),c=t.sub(P,c),c=t.mul(z,c),b=t.add(b,c),P=t.mul(A,b),ee=t.add(ee,P),P=t.mul(v,b),X=t.mul(p,X),X=t.sub(X,P),P=t.mul(p,A),$=t.mul(v,$),$=t.add($,P),new I(X,ee,$)}subtract(O){return this.add(O.negate())}is0(){return this.equals(I.ZERO)}wNAF(O){return T.wNAFCached(this,O,I.normalizeZ)}multiplyUnsafe(O){const{endo:L,n:F}=e;Wt("scalar",O,bn,F);const M=I.ZERO;if(O===bn)return M;if(this.is0()||O===Ot)return this;if(!L||T.hasPrecomputes(this))return T.wNAFCachedUnsafe(this,O,I.normalizeZ);let{k1neg:q,k1:G,k2neg:te,k2:X}=L.splitScalar(O),ee=M,$=M,z=this;for(;G>bn||X>bn;)G&Ot&&(ee=ee.add(z)),X&Ot&&($=$.add(z)),z=z.double(),G>>=Ot,X>>=Ot;return q&&(ee=ee.negate()),te&&($=$.negate()),$=new I(t.mul($.px,L.beta),$.py,$.pz),ee.add($)}multiply(O){const{endo:L,n:F}=e;Wt("scalar",O,Ot,F);let M,q;if(L){const{k1neg:G,k1:te,k2neg:X,k2:ee}=L.splitScalar(O);let{p:$,f:z}=this.wNAF(te),{p:H,f:P}=this.wNAF(ee);$=T.constTimeNegate(G,$),H=T.constTimeNegate(X,H),H=new I(t.mul(H.px,L.beta),H.py,H.pz),M=$.add(H),q=z.add(P)}else{const{p:G,f:te}=this.wNAF(O);M=G,q=te}return I.normalizeZ([M,q])[0]}multiplyAndAddUnsafe(O,L,F){const M=I.BASE,q=(te,X)=>X===bn||X===Ot||!te.equals(M)?te.multiplyUnsafe(X):te.multiply(X),G=q(this,L).add(q(O,F));return G.is0()?void 0:G}toAffine(O){return g(this,O)}isTorsionFree(){const{h:O,isTorsionFree:L}=e;if(O===Ot)return!0;if(L)return L(I,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:O,clearCofactor:L}=e;return O===Ot?this:L?L(I,this):this.multiplyUnsafe(e.h)}toRawBytes(O=!0){return An("isCompressed",O),this.assertValidity(),s(I,this,O)}toHex(O=!0){return An("isCompressed",O),tr(this.toRawBytes(O))}}I.BASE=new I(e.Gx,e.Gy,t.ONE),I.ZERO=new I(t.ZERO,t.ONE,t.ZERO);const R=e.nBitLength,T=Hl(I,e.endo?Math.ceil(R/2):R);return{CURVE:e,ProjectivePoint:I,normPrivateKeyToScalar:f,weierstrassEquation:o,isWithinCurveOrder:u}}function fg(r){const e=Ra(r);return Mr(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function pg(r){const e=fg(r),{Fp:t,n}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(c){return Ye(c,n)}function u(c){return jo(c,n)}const{ProjectivePoint:f,normPrivateKeyToScalar:y,weierstrassEquation:g,isWithinCurveOrder:S}=hg({...e,toBytes(c,p,b){const v=p.toAffine(),k=t.toBytes(v.x),_=nr;return An("isCompressed",b),b?_(Uint8Array.from([p.hasEvenY()?2:3]),k):_(Uint8Array.from([4]),k,t.toBytes(v.y))},fromBytes(c){const p=c.length,b=c[0],v=c.subarray(1);if(p===s&&(b===2||b===3)){const k=Qn(v);if(!ps(k,Ot,t.ORDER))throw new Error("Point is not on curve");const _=g(k);let d;try{d=t.sqrt(_)}catch(h){const E=h instanceof Error?": "+h.message:"";throw new Error("Point is not on curve"+E)}const l=(d&Ot)===Ot;return(b&1)===1!==l&&(d=t.neg(d)),{x:k,y:d}}else if(p===i&&b===4){const k=t.fromBytes(v.subarray(0,t.BYTES)),_=t.fromBytes(v.subarray(t.BYTES,2*t.BYTES));return{x:k,y:_}}else{const k=s,_=i;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+_+", got "+p)}}}),I=c=>tr(Or(c,e.nByteLength));function R(c){const p=n>>Ot;return c>p}function T(c){return R(c)?o(-c):c}const x=(c,p,b)=>Qn(c.slice(p,b));class O{constructor(p,b,v){this.r=p,this.s=b,this.recovery=v,this.assertValidity()}static fromCompact(p){const b=e.nByteLength;return p=Rt("compactSignature",p,b*2),new O(x(p,0,b),x(p,b,2*b))}static fromDER(p){const{r:b,s:v}=gn.toSig(Rt("DER",p));return new O(b,v)}assertValidity(){Wt("r",this.r,Ot,n),Wt("s",this.s,Ot,n)}addRecoveryBit(p){return new O(this.r,this.s,p)}recoverPublicKey(p){const{r:b,s:v,recovery:k}=this,_=te(Rt("msgHash",p));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const d=k===2||k===3?b+e.n:b;if(d>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=(k&1)===0?"02":"03",a=f.fromHex(l+I(d)),h=u(d),E=o(-_*h),C=o(v*h),D=f.BASE.multiplyAndAddUnsafe(a,E,C);if(!D)throw new Error("point at infinify");return D.assertValidity(),D}hasHighS(){return R(this.s)}normalizeS(){return this.hasHighS()?new O(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Ir(this.toDERHex())}toDERHex(){return gn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ir(this.toCompactHex())}toCompactHex(){return I(this.r)+I(this.s)}}const L={isValidPrivateKey(c){try{return y(c),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const c=Pl(e.n);return F0(e.randomBytes(c),e.n)},precompute(c=8,p=f.BASE){return p._setWindowSize(c),p.multiply(BigInt(3)),p}};function F(c,p=!0){return f.fromPrivateKey(c).toRawBytes(p)}function M(c){const p=er(c),b=typeof c=="string",v=(p||b)&&c.length;return p?v===s||v===i:b?v===2*s||v===2*i:c instanceof f}function q(c,p,b=!0){if(M(c))throw new Error("first arg must be private key");if(!M(p))throw new Error("second arg must be public key");return f.fromHex(p).multiply(y(c)).toRawBytes(b)}const G=e.bits2int||function(c){if(c.length>8192)throw new Error("input is too large");const p=Qn(c),b=c.length*8-e.nBitLength;return b>0?p>>BigInt(b):p},te=e.bits2int_modN||function(c){return o(G(c))},X=ba(e.nBitLength);function ee(c){return Wt("num < 2^"+e.nBitLength,c,bn,X),Or(c,e.nByteLength)}function $(c,p,b=z){if(["recovered","canonical"].some(ie=>ie in b))throw new Error("sign() legacy options not supported");const{hash:v,randomBytes:k}=e;let{lowS:_,prehash:d,extraEntropy:l}=b;_==null&&(_=!0),c=Rt("msgHash",c),Fc(b),d&&(c=Rt("prehashed msgHash",v(c)));const a=te(c),h=y(p),E=[ee(h),ee(a)];if(l!=null&&l!==!1){const ie=l===!0?k(t.BYTES):l;E.push(Rt("extraEntropy",ie))}const C=nr(...E),D=a;function J(ie){const he=G(ie);if(!S(he))return;const Le=u(he),Re=f.BASE.multiply(he).toAffine(),Oe=o(Re.x);if(Oe===bn)return;const rt=o(Le*o(D+Oe*h));if(rt===bn)return;let Te=(Re.x===Oe?0:2)|Number(Re.y&Ot),Ce=rt;return _&&R(rt)&&(Ce=T(rt),Te^=1),new O(Oe,Ce,Te)}return{seed:C,k2sig:J}}const z={lowS:e.lowS,prehash:!1},H={lowS:e.lowS,prehash:!1};function P(c,p,b=z){const{seed:v,k2sig:k}=$(c,p,b),_=e;return Bl(_.hash.outputLen,_.nByteLength,_.hmac)(v,k)}f.BASE._setWindowSize(8);function A(c,p,b,v=H){var Te;const k=c;p=Rt("msgHash",p),b=Rt("publicKey",b);const{lowS:_,prehash:d,format:l}=v;if(Fc(v),"strict"in v)throw new Error("options.strict was renamed to lowS");if(l!==void 0&&l!=="compact"&&l!=="der")throw new Error("format must be compact or der");const a=typeof k=="string"||er(k),h=!a&&!l&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!a&&!h)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let E,C;try{if(h&&(E=new O(k.r,k.s)),a){try{l!=="compact"&&(E=O.fromDER(k))}catch(Ce){if(!(Ce instanceof gn.Err))throw Ce}!E&&l!=="der"&&(E=O.fromCompact(k))}C=f.fromHex(b)}catch{return!1}if(!E||_&&E.hasHighS())return!1;d&&(p=e.hash(p));const{r:D,s:J}=E,ie=te(p),he=u(J),Le=o(ie*he),Re=o(D*he),Oe=(Te=f.BASE.multiplyAndAddUnsafe(C,Le,Re))==null?void 0:Te.toAffine();return Oe?o(Oe.x)===D:!1}return{CURVE:e,getPublicKey:F,getSharedSecret:q,sign:P,verify:A,ProjectivePoint:f,Signature:O,utils:L}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yg(r){return{hash:r,hmac:(e,...t)=>td(r,e,Xp(...t)),randomBytes:vl}}function gg(r,e){const t=n=>pg({...r,...yg(n)});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nd=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),$c=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),mg=BigInt(1),Xo=BigInt(2),Kc=(r,e)=>(r+e/Xo)/e;function _g(r){const e=nd,t=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),u=BigInt(44),f=BigInt(88),y=r*r*r%e,g=y*y*r%e,S=Qe(g,t,e)*g%e,I=Qe(S,t,e)*g%e,R=Qe(I,Xo,e)*y%e,T=Qe(R,s,e)*R%e,x=Qe(T,i,e)*T%e,O=Qe(x,u,e)*x%e,L=Qe(O,f,e)*O%e,F=Qe(L,u,e)*x%e,M=Qe(F,t,e)*g%e,q=Qe(M,o,e)*T%e,G=Qe(q,n,e)*y%e,te=Qe(G,Xo,e);if(!Jo.eql(Jo.sqr(te),r))throw new Error("Cannot find square root");return te}const Jo=ys(nd,void 0,void 0,{sqrt:_g}),bs=gg({a:BigInt(0),b:BigInt(7),Fp:Jo,n:$c,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=$c,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-mg*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),u=Kc(i*r,e),f=Kc(-n*r,e);let y=Ye(r-u*t-f*s,e),g=Ye(-u*n-f*i,e);const S=y>o,I=g>o;if(S&&(y=e-y),I&&(g=e-g),y>o||g>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:S,k1:y,k2neg:I,k2:g}}}},Yo);BigInt(0);bs.ProjectivePoint;const wg=Pr.utils.randomPrivateKey,qc=()=>{const r=Pr.utils.randomPrivateKey(),e=ts(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},ts=Pr.getPublicKey;function Vc(r){try{return Pr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Na=(r,e)=>Pr.sign(r,e.slice(0,32)),bg=Pr.verify,Ie=r=>fe.Buffer.isBuffer(r)?r:r instanceof Uint8Array?fe.Buffer.from(r.buffer,r.byteOffset,r.byteLength):fe.Buffer.from(r);let ka=class{constructor(e){Object.assign(this,e)}encode(){return fe.Buffer.from(po.serialize(Yr,this))}static decode(e){return po.deserialize(Yr,this,e)}static decodeUnchecked(e){return po.deserializeUnchecked(Yr,this,e)}};class Rg extends ka{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const Yr=new Map;var rd;const id=32,cn=32;function Eg(r){return r._bn!==void 0}let Gc=1;class ne extends ka{constructor(e){if(super({}),this._bn=void 0,Eg(e))this._bn=e._bn;else{if(typeof e=="string"){const t=et.decode(e);if(t.length!=cn)throw new Error("Invalid public key input");this._bn=new nt(t)}else this._bn=new nt(e);if(this._bn.byteLength()>cn)throw new Error("Invalid public key input")}}static unique(){const e=new ne(Gc);return Gc+=1,new ne(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return et.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(fe.Buffer);if(e.length===cn)return e;const t=fe.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const s=fe.Buffer.concat([e.toBuffer(),fe.Buffer.from(t),n.toBuffer()]),i=Yo(s);return new ne(i)}static createProgramAddressSync(e,t){let n=fe.Buffer.alloc(0);e.forEach(function(i){if(i.length>id)throw new TypeError("Max seed length exceeded");n=fe.Buffer.concat([n,Ie(i)])}),n=fe.Buffer.concat([n,t.toBuffer(),fe.Buffer.from("ProgramDerivedAddress")]);const s=Yo(n);if(Vc(s))throw new Error("Invalid seeds, address must fall off the curve");return new ne(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,s;for(;n!=0;){try{const i=e.concat(fe.Buffer.from([n]));s=this.createProgramAddressSync(i,t)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ne(e);return Vc(t.toBytes())}}rd=ne;ne.default=new rd("11111111111111111111111111111111");Yr.set(ne,{kind:"struct",fields:[["_bn","u256"]]});class Ag{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=Ie(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=Ie(wg()),this._publicKey=Ie(ts(this._secretKey))}get publicKey(){return new ne(this._publicKey)}get secretKey(){return fe.Buffer.concat([this._secretKey,this._publicKey],64)}}const vg=new ne("BPFLoader1111111111111111111111111111111111"),Bn=1232,Rs=127,ei=64;class xa extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(xa.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ca extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ca.prototype,"name",{value:"TransactionExpiredTimeoutError"});class yr extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(yr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ti{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Se=(r="publicKey")=>U.blob(32,r),Ig=(r="signature")=>U.blob(64,r),Zn=(r="string")=>{const e=U.struct([U.u32("length"),U.u32("lengthPadding"),U.blob(U.offset(U.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,o)=>t(i,o).chars.toString(),s.encode=(i,o,u)=>{const f={chars:fe.Buffer.from(i,"utf8")};return n(f,o,u)},s.alloc=i=>U.u32().span+U.u32().span+fe.Buffer.from(i,"utf8").length,s},Og=(r="authorized")=>U.struct([Se("staker"),Se("withdrawer")],r),Sg=(r="lockup")=>U.struct([U.ns64("unixTimestamp"),U.ns64("epoch"),Se("custodian")],r),Tg=(r="voteInit")=>U.struct([Se("nodePubkey"),Se("authorizedVoter"),Se("authorizedWithdrawer"),U.u8("commission")],r),Ng=(r="voteAuthorizeWithSeedArgs")=>U.struct([U.u32("voteAuthorizationType"),Se("currentAuthorityDerivedKeyOwnerPubkey"),Zn("currentAuthorityDerivedKeySeed"),Se("newAuthorized")],r);function sd(r,e){const t=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*t(s.elementLayout)}else if("fields"in s)return sd({layout:s},e[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=t(s)}),n}function Ht(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function qt(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function Be(r,e){if(!r)throw new Error(e||"Assertion failed")}class Es{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,s=o=>{const u=o.toBase58();let f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},i=s(t);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const u of o.keys){const f=s(u.pubkey);f.isSigner||(f.isSigner=u.isSigner),f.isWritable||(f.isWritable=u.isWritable)}}return new Es(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Be(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),s=e.filter(([,f])=>!f.isSigner&&f.isWritable),i=e.filter(([,f])=>!f.isSigner&&!f.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Be(t.length>0,"Expected at least one writable signer key");const[f]=t[0];Be(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...t.map(([f])=>new ne(f)),...n.map(([f])=>new ne(f)),...s.map(([f])=>new ne(f)),...i.map(([f])=>new ne(f))];return[o,u]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,t){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const u=new ne(i),f=e.findIndex(y=>y.equals(u));f>=0&&(Be(f<256,"Max lookup table index exceeded"),n.push(f),s.push(u),this.keyMetaMap.delete(i))}return[n,s]}}const od="Reached end of buffer unexpectedly";function sn(r){if(r.length===0)throw new Error(od);return r.shift()}function Ft(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(od);return r.splice(...e)}class en{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ne(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:et.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ti(this.staticAccountKeys)}static compile(e){const t=Es.compile(e.instructions,e.payerKey),[n,s]=t.getMessageComponents(),o=new ti(s).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:et.encode(u.data)}));return new en({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,i=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];qt(t,e);const n=this.instructions.map(S=>{const{accounts:I,programIdIndex:R}=S,T=Array.from(et.decode(S.data));let x=[];qt(x,I.length);let O=[];return qt(O,T.length),{programIdIndex:R,keyIndicesCount:fe.Buffer.from(x),keyIndices:I,dataLength:fe.Buffer.from(O),data:T}});let s=[];qt(s,n.length);let i=fe.Buffer.alloc(Bn);fe.Buffer.from(s).copy(i);let o=s.length;n.forEach(S=>{const R=U.struct([U.u8("programIdIndex"),U.blob(S.keyIndicesCount.length,"keyIndicesCount"),U.seq(U.u8("keyIndex"),S.keyIndices.length,"keyIndices"),U.blob(S.dataLength.length,"dataLength"),U.seq(U.u8("userdatum"),S.data.length,"data")]).encode(S,i,o);o+=R}),i=i.slice(0,o);const u=U.struct([U.blob(1,"numRequiredSignatures"),U.blob(1,"numReadonlySignedAccounts"),U.blob(1,"numReadonlyUnsignedAccounts"),U.blob(t.length,"keyCount"),U.seq(Se("key"),e,"keys"),Se("recentBlockhash")]),f={numRequiredSignatures:fe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:fe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:fe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:fe.Buffer.from(t),keys:this.accountKeys.map(S=>Ie(S.toBytes())),recentBlockhash:et.decode(this.recentBlockhash)};let y=fe.Buffer.alloc(2048);const g=u.encode(f,y);return i.copy(y,g),y.slice(0,g+i.length)}static from(e){let t=[...e];const n=sn(t);if(n!==(n&Rs))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=sn(t),i=sn(t),o=Ht(t);let u=[];for(let I=0;I<o;I++){const R=Ft(t,0,cn);u.push(new ne(fe.Buffer.from(R)))}const f=Ft(t,0,cn),y=Ht(t);let g=[];for(let I=0;I<y;I++){const R=sn(t),T=Ht(t),x=Ft(t,0,T),O=Ht(t),L=Ft(t,0,O),F=et.encode(fe.Buffer.from(L));g.push({programIdIndex:R,accounts:x,data:F})}const S={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:et.encode(fe.Buffer.from(f)),accountKeys:u,instructions:g};return new en(S)}}class rr{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ti(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((o,u)=>o+u.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)t.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)t.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Es.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const g of i){const S=t.extractTableLookup(g);if(S!==void 0){const[I,{writable:R,readonly:T}]=S;n.push(I),s.writable.push(...R),s.readonly.push(...T)}}const[o,u]=t.getMessageComponents(),y=new ti(u,s).compileInstructions(e.instructions);return new rr({header:o,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:y,addressTableLookups:n})}serialize(){const e=Array();qt(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();qt(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();qt(i,this.addressTableLookups.length);const o=U.struct([U.u8("prefix"),U.struct([U.u8("numRequiredSignatures"),U.u8("numReadonlySignedAccounts"),U.u8("numReadonlyUnsignedAccounts")],"header"),U.blob(e.length,"staticAccountKeysLength"),U.seq(Se(),this.staticAccountKeys.length,"staticAccountKeys"),Se("recentBlockhash"),U.blob(n.length,"instructionsLength"),U.blob(t.length,"serializedInstructions"),U.blob(i.length,"addressTableLookupsLength"),U.blob(s.length,"serializedAddressTableLookups")]),u=new Uint8Array(Bn),y=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(g=>g.toBytes()),recentBlockhash:et.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},u);return u.slice(0,y)}serializeInstructions(){let e=0;const t=new Uint8Array(Bn);for(const n of this.compiledInstructions){const s=Array();qt(s,n.accountKeyIndexes.length);const i=Array();qt(i,n.data.length);const o=U.struct([U.u8("programIdIndex"),U.blob(s.length,"encodedAccountKeyIndexesLength"),U.seq(U.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),U.blob(i.length,"encodedDataLength"),U.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Bn);for(const n of this.addressTableLookups){const s=Array();qt(s,n.writableIndexes.length);const i=Array();qt(i,n.readonlyIndexes.length);const o=U.struct([Se("accountKey"),U.blob(s.length,"encodedWritableIndexesLength"),U.seq(U.u8(),n.writableIndexes.length,"writableIndexes"),U.blob(i.length,"encodedReadonlyIndexesLength"),U.seq(U.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=sn(t),s=n&Rs;Be(n!==s,"Expected versioned message but received legacy message");const i=s;Be(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:sn(t),numReadonlySignedAccounts:sn(t),numReadonlyUnsignedAccounts:sn(t)},u=[],f=Ht(t);for(let T=0;T<f;T++)u.push(new ne(Ft(t,0,cn)));const y=et.encode(Ft(t,0,cn)),g=Ht(t),S=[];for(let T=0;T<g;T++){const x=sn(t),O=Ht(t),L=Ft(t,0,O),F=Ht(t),M=new Uint8Array(Ft(t,0,F));S.push({programIdIndex:x,accountKeyIndexes:L,data:M})}const I=Ht(t),R=[];for(let T=0;T<I;T++){const x=new ne(Ft(t,0,cn)),O=Ht(t),L=Ft(t,0,O),F=Ht(t),M=Ft(t,0,F);R.push({accountKey:x,writableIndexes:L,readonlyIndexes:M})}return new rr({header:o,staticAccountKeys:u,recentBlockhash:y,compiledInstructions:S,addressTableLookups:R})}}const Ba={deserializeMessageVersion(r){const e=r[0],t=e&Rs;return t===e?"legacy":t},deserialize:r=>{const e=Ba.deserializeMessageVersion(r);if(e==="legacy")return en.from(r);if(e===0)return rr.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let yn=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const kg=fe.Buffer.alloc(ei).fill(0);class De{constructor(e){this.keys=void 0,this.programId=void 0,this.data=fe.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class xe{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new De(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let x=0;x<t.length;x++)if(t[x].programId===void 0)throw new Error(`Transaction instruction index ${x} has undefined program id`);const s=[],i=[];t.forEach(x=>{x.keys.forEach(L=>{i.push({...L})});const O=x.programId.toString();s.includes(O)||s.push(O)}),s.forEach(x=>{i.push({pubkey:new ne(x),isSigner:!1,isWritable:!1})});const o=[];i.forEach(x=>{const O=x.pubkey.toString(),L=o.findIndex(F=>F.pubkey.toString()===O);L>-1?(o[L].isWritable=o[L].isWritable||x.isWritable,o[L].isSigner=o[L].isSigner||x.isSigner):o.push(x)}),o.sort(function(x,O){if(x.isSigner!==O.isSigner)return x.isSigner?-1:1;if(x.isWritable!==O.isWritable)return x.isWritable?-1:1;const L={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return x.pubkey.toBase58().localeCompare(O.pubkey.toBase58(),"en",L)});const u=o.findIndex(x=>x.pubkey.equals(n));if(u>-1){const[x]=o.splice(u,1);x.isSigner=!0,x.isWritable=!0,o.unshift(x)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const x of this.signatures){const O=o.findIndex(L=>L.pubkey.equals(x.publicKey));if(O>-1)o[O].isSigner||(o[O].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${x.publicKey.toString()}`)}let f=0,y=0,g=0;const S=[],I=[];o.forEach(({pubkey:x,isSigner:O,isWritable:L})=>{O?(S.push(x.toString()),f+=1,L||(y+=1)):(I.push(x.toString()),L||(g+=1))});const R=S.concat(I),T=t.map(x=>{const{data:O,programId:L}=x;return{programIdIndex:R.indexOf(L.toString()),accounts:x.keys.map(F=>R.indexOf(F.pubkey.toString())),data:et.encode(O)}});return T.forEach(x=>{Be(x.programIdIndex>=0),x.accounts.forEach(O=>Be(O>=0))}),new en({header:{numRequiredSignatures:f,numReadonlySignedAccounts:y,numReadonlyUnsignedAccounts:g},accountKeys:R,recentBlockhash:e,instructions:T})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,i)=>t[i].equals(s.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const s=n.toString();return t.has(s)?!1:(t.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(s=>{const i=Na(n,s.secretKey);this._addSignature(s.publicKey,Ie(i))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Be(t.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=fe.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?t&&(n.missing||(n.missing=[])).push(i):bg(s,e,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,t);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:t}=this,n=[];qt(n,t.length);const s=n.length+t.length*64+e.length,i=fe.Buffer.alloc(s);return Be(t.length<256),fe.Buffer.from(n).copy(i,0),t.forEach(({signature:o},u)=>{o!==null&&(Be(o.length===64,"signature has invalid length"),fe.Buffer.from(o).copy(i,n.length+u*64))}),e.copy(i,n.length+t.length*64),Be(i.length<=Bn,`Transaction too large: ${i.length} > ${Bn}`),i}get keys(){return Be(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Be(this.instructions.length===1),this.instructions[0].programId}get data(){return Be(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Ht(t);let s=[];for(let i=0;i<n;i++){const o=Ft(t,0,ei);s.push(et.encode(fe.Buffer.from(o)))}return xe.populate(en.from(t),s)}static populate(e,t=[]){const n=new xe;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((s,i)=>{const o={signature:s==et.encode(kg)?null:et.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const u=e.accountKeys[o];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new De({keys:i,programId:e.accountKeys[s.programIdIndex],data:et.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class La{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:s,recentBlockhash:i}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:f}=n,y=o-u;Be(y>0,"Message header is invalid");const g=e.staticAccountKeys.length-o-f;Be(g>=0,"Message header is invalid");const S=e.getAccountKeys(t),I=S.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");const R=[];for(const T of s){const x=[];for(const L of T.accountKeyIndexes){const F=S.get(L);if(F===void 0)throw new Error(`Failed to find key for account key index ${L}`);const M=L<o;let q;M?q=L<y:L<S.staticAccountKeys.length?q=L-o<g:q=L-S.staticAccountKeys.length<S.accountKeysFromLookups.writable.length,x.push({pubkey:F,isSigner:L<n.numRequiredSignatures,isWritable:q})}const O=S.get(T.programIdIndex);if(O===void 0)throw new Error(`Failed to find program id for program id index ${T.programIdIndex}`);R.push(new De({programId:O,data:Ie(T.data),keys:x}))}return new La({payerKey:I,instructions:R,recentBlockhash:i})}compileToLegacyMessage(){return en.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return rr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Ma{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Be(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(ei));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();qt(t,this.signatures.length);const n=U.struct([U.blob(t.length,"encodedSignaturesLength"),U.seq(Ig(),this.signatures.length,"signatures"),U.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let t=[...e];const n=[],s=Ht(t);for(let o=0;o<s;o++)n.push(new Uint8Array(Ft(t,0,ei)));const i=Ba.deserialize(new Uint8Array(t));return new Ma(i,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(o=>o.equals(s.publicKey));Be(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Na(t,s.secretKey)}}addSignature(e,t){Be(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Be(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const xg=160,Cg=64,Bg=xg/Cg,ad=1e3/Bg,rn=new ne("SysvarC1ock11111111111111111111111111111111"),Lg=new ne("SysvarEpochSchedu1e111111111111111111111111"),Mg=new ne("Sysvar1nstructions1111111111111111111111111"),qi=new ne("SysvarRecentB1ockHashes11111111111111111111"),Tr=new ne("SysvarRent111111111111111111111111111111111"),Pg=new ne("SysvarRewards111111111111111111111111111111"),Ug=new ne("SysvarS1otHashes111111111111111111111111111"),Dg=new ne("SysvarS1otHistory11111111111111111111111111"),Vi=new ne("SysvarStakeHistory1111111111111111111111111");class Pn extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let u;switch(e){case"send":u=`Transaction ${t} resulted in an error. 
${n}. `+i+o;break;case"simulate":u=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:u=`Unknown action '${(f=>f)(e)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,t(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}const Hg={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class pe extends Error{constructor({code:e,message:t,data:n},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}async function Qo(r,e,t,n){const s=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},i=await r.sendTransaction(e,t,s);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:i,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:i},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await r.confirmTransaction(i,n&&n.commitment)).value;if(o.err)throw i!=null?new Pn({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function Gn(r){return new Promise(e=>setTimeout(e,r))}function ke(r,e){const t=r.layout.span>=0?r.layout.span:sd(r,e),n=fe.Buffer.alloc(t),s=Object.assign({instruction:r.index},e);return r.layout.encode(s,n),n}function Me(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const cd=U.nu64("lamportsPerSignature"),ud=U.struct([U.u32("version"),U.u32("state"),Se("authorizedPubkey"),Se("nonce"),U.struct([cd],"feeCalculator")]),ea=ud.span;class As{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=ud.decode(Ie(e),0);return new As({authorizedPubkey:new ne(t.authorizedPubkey),nonce:new ne(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const Fg=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},zg=r=>e=>{const t=U.blob(r,e),{encode:n,decode:s}=Fg(t),i=t;return i.decode=(o,u)=>{const f=s(o,u);return Zo.toBigIntLE(fe.Buffer.from(f))},i.encode=(o,u,f)=>{const y=Zo.toBufferLE(o,r);return n(y,u,f)},i},Nr=zg(8);class $g{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=U.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Ke))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:s}=Me(Ke.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new ne(s)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=Me(Ke.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:s}=Me(Ke.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new ne(s)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=Me(Ke.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:s,programId:i}=Me(Ke.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ne(t),seed:n,space:s,programId:new ne(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=Me(Ke.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new ne(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:s}=Me(Ke.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new ne(t),seed:n,programId:new ne(s)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:s,space:i,programId:o}=Me(Ke.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new ne(t),seed:n,lamports:s,space:i,programId:new ne(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=Me(Ke.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new ne(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Me(Ke.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Me(Ke.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=Me(Ke.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new ne(t)}}static checkProgramId(e){if(!e.equals(Et.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ke=Object.freeze({Create:{index:0,layout:U.struct([U.u32("instruction"),U.ns64("lamports"),U.ns64("space"),Se("programId")])},Assign:{index:1,layout:U.struct([U.u32("instruction"),Se("programId")])},Transfer:{index:2,layout:U.struct([U.u32("instruction"),Nr("lamports")])},CreateWithSeed:{index:3,layout:U.struct([U.u32("instruction"),Se("base"),Zn("seed"),U.ns64("lamports"),U.ns64("space"),Se("programId")])},AdvanceNonceAccount:{index:4,layout:U.struct([U.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:U.struct([U.u32("instruction"),Se("authorized")])},AuthorizeNonceAccount:{index:7,layout:U.struct([U.u32("instruction"),Se("authorized")])},Allocate:{index:8,layout:U.struct([U.u32("instruction"),U.ns64("space")])},AllocateWithSeed:{index:9,layout:U.struct([U.u32("instruction"),Se("base"),Zn("seed"),U.ns64("space"),Se("programId")])},AssignWithSeed:{index:10,layout:U.struct([U.u32("instruction"),Se("base"),Zn("seed"),Se("programId")])},TransferWithSeed:{index:11,layout:U.struct([U.u32("instruction"),Nr("lamports"),Zn("seed"),Se("programId")])},UpgradeNonceAccount:{index:12,layout:U.struct([U.u32("instruction")])}});class Et{constructor(){}static createAccount(e){const t=Ke.Create,n=ke(t,{lamports:e.lamports,space:e.space,programId:Ie(e.programId.toBuffer())});return new De({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const s=Ke.TransferWithSeed;t=ke(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ie(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Ke.Transfer;t=ke(s,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new De({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const s=Ke.AssignWithSeed;t=ke(s,{base:Ie(e.basePubkey.toBuffer()),seed:e.seed,programId:Ie(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ke.Assign;t=ke(s,{programId:Ie(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new De({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Ke.CreateWithSeed,n=ke(t,{base:Ie(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ie(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new De({keys:s,programId:this.programId,data:n})}static createNonceAccount(e){const t=new xe;"basePubkey"in e&&"seed"in e?t.add(Et.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ea,programId:this.programId})):t.add(Et.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ea,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Ke.InitializeNonceAccount,n=ke(t,{authorized:Ie(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:Tr,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new De(s)}static nonceAdvance(e){const t=Ke.AdvanceNonceAccount,n=ke(t),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new De(s)}static nonceWithdraw(e){const t=Ke.WithdrawNonceAccount,n=ke(t,{lamports:e.lamports});return new De({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:Tr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Ke.AuthorizeNonceAccount,n=ke(t,{authorized:Ie(e.newAuthorizedPubkey.toBuffer())});return new De({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const s=Ke.AllocateWithSeed;t=ke(s,{base:Ie(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ie(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ke.Allocate;t=ke(s,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new De({keys:n,programId:this.programId,data:t})}}Et.programId=new ne("11111111111111111111111111111111");const Kg=Bn-300;class ir{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/ir.chunkSize)+1+1)}static async load(e,t,n,s,i){{const S=await e.getMinimumBalanceForRentExemption(i.length),I=await e.getAccountInfo(n.publicKey,"confirmed");let R=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==i.length&&(R=R||new xe,R.add(Et.allocate({accountPubkey:n.publicKey,space:i.length}))),I.owner.equals(s)||(R=R||new xe,R.add(Et.assign({accountPubkey:n.publicKey,programId:s}))),I.lamports<S&&(R=R||new xe,R.add(Et.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:S-I.lamports})))}else R=new xe().add(Et.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:S>0?S:1,space:i.length,programId:s}));R!==null&&await Qo(e,R,[t,n],{commitment:"confirmed"})}const o=U.struct([U.u32("instruction"),U.u32("offset"),U.u32("bytesLength"),U.u32("bytesLengthPadding"),U.seq(U.u8("byte"),U.offset(U.u32(),-8),"bytes")]),u=ir.chunkSize;let f=0,y=i,g=[];for(;y.length>0;){const S=y.slice(0,u),I=fe.Buffer.alloc(u+16);o.encode({instruction:0,offset:f,bytes:S,bytesLength:0,bytesLengthPadding:0},I);const R=new xe().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:I});g.push(Qo(e,R,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Gn(1e3/4),f+=u,y=y.slice(u)}await Promise.all(g);{const S=U.struct([U.u32("instruction")]),I=fe.Buffer.alloc(S.span);S.encode({instruction:1},I);const R=new xe().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Tr,isSigner:!1,isWritable:!1}],programId:s,data:I}),T="processed",x=await e.sendTransaction(R,[t,n],{preflightCommitment:T}),{context:O,value:L}=await e.confirmTransaction({signature:x,lastValidBlockHeight:R.lastValidBlockHeight,blockhash:R.recentBlockhash},T);if(L.err)throw new Error(`Transaction ${x} failed (${JSON.stringify(L)})`);for(;;){try{if(await e.getSlot({commitment:T})>O.slot)break}catch{}await new Promise(F=>setTimeout(F,Math.round(ad/2)))}}return!0}}ir.chunkSize=Kg;const qg=new ne("BPFLoader2111111111111111111111111111111111");class Vg{static getMinNumSignatures(e){return ir.getMinNumSignatures(e)}static load(e,t,n,s,i){return ir.load(e,t,n,i,s)}}function Gg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ao,Wc;function Wg(){if(Wc)return Ao;Wc=1;var r=Object.prototype.toString,e=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function t(n,s){var i,o,u,f,y,g,S;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),s);if(S=r.call(n),S==="[object Array]"){for(u="[",o=n.length-1,i=0;i<o;i++)u+=t(n[i],!0)+",";return o>-1&&(u+=t(n[i],!0)),u+"]"}else if(S==="[object Object]"){for(f=e(n).sort(),o=f.length,u="",i=0;i<o;)y=f[i],g=t(n[y],!1),g!==void 0&&(u&&(u+=","),u+=JSON.stringify(y)+":"+g),i++;return"{"+u+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Ao=function(n){var s=t(n,!1);if(s!==void 0)return""+s},Ao}var jg=Wg(),jc=Gg(jg);const Vr=32;function vo(r){let e=0;for(;r>1;)r/=2,e++;return e}function Yg(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class ld{constructor(e,t,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=vo(Yg(e+Vr+1))-vo(Vr)-1,n=this.getSlotsInEpoch(t),s=e-(n-Vr);return[t,s]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=t%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Vr:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+vo(Vr)):this.slotsPerEpoch}}var Zg=globalThis.fetch;class Xg extends Jy{constructor(e,t,n){const s=i=>{const o=Zy(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function Jg(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const Yc=56;class ta{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=Jg(Qg,e),n=e.length-Yc;Be(n>=0,"lookup table is invalid"),Be(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=U.struct([U.seq(Se(),s,"addresses")]).decode(e.slice(Yc));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new ne(t.authority[0]):void 0,addresses:i.map(o=>new ne(o))}}}const Qg={index:1,layout:U.struct([U.u32("typeIndex"),Nr("deactivationSlot"),U.nu64("lastExtendedSlot"),U.u8("lastExtendedStartIndex"),U.u8(),U.seq(Se(),U.offset(U.u8(),-1),"authority")])},e1=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function t1(r){const e=r.match(e1);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,s,i]=e,o=r.startsWith("https:")?"wss:":"ws:",u=s==null?null:parseInt(s.slice(1),10),f=u==null?"":`:${u+1}`;return`${o}//${n}${f}${i}`}const Je=fi(Oa(ne),se(),r=>new ne(r)),dd=Sa([se(),Ze("base64")]),Pa=fi(Oa(fe.Buffer),dd,r=>fe.Buffer.from(r[0],"base64")),hd=30*1e3;function n1(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function $e(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...s}=r;e=n,t=s}return{commitment:e,config:t}}function Zc(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function fd(r){return Pt([re({jsonrpc:Ze("2.0"),id:se(),result:r}),re({jsonrpc:Ze("2.0"),id:se(),error:re({code:Ur(),message:se(),data:ge(Ey())})})])}const r1=fd(Ur());function ve(r){return fi(fd(r),r1,e=>"error"in e?e:{...e,result:oe(e.result,r)})}function tt(r){return ve(re({context:re({slot:W()}),value:r}))}function vs(r){return re({context:re({slot:W()}),value:r})}function Io(r,e){return r===0?new rr({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new ne(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:et.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new en(e)}const i1=re({foundation:W(),foundationTerm:W(),initial:W(),taper:W(),terminal:W()}),s1=ve(ce(ue(re({epoch:W(),effectiveSlot:W(),amount:W(),postBalance:W(),commission:ge(ue(W()))})))),o1=ce(re({slot:W(),prioritizationFee:W()})),a1=re({total:W(),validator:W(),foundation:W(),epoch:W()}),c1=re({epoch:W(),slotIndex:W(),slotsInEpoch:W(),absoluteSlot:W(),blockHeight:ge(W()),transactionCount:ge(W())}),u1=re({slotsPerEpoch:W(),leaderScheduleSlotOffset:W(),warmup:un(),firstNormalEpoch:W(),firstNormalSlot:W()}),l1=ql(se(),ce(W())),ar=ue(Pt([re({}),se()])),d1=re({err:ar}),h1=Ze("receivedSignature"),f1=re({"solana-core":se(),"feature-set":ge(W())}),p1=re({program:se(),programId:Je,parsed:Ur()}),y1=re({programId:Je,accounts:ce(Je),data:se()}),Xc=tt(re({err:ue(Pt([re({}),se()])),logs:ue(ce(se())),accounts:ge(ue(ce(ue(re({executable:un(),owner:se(),lamports:W(),data:ce(se()),rentEpoch:ge(W())}))))),unitsConsumed:ge(W()),returnData:ge(ue(re({programId:se(),data:Sa([se(),Ze("base64")])}))),innerInstructions:ge(ue(ce(re({index:W(),instructions:ce(Pt([p1,y1]))}))))})),g1=tt(re({byIdentity:ql(se(),ce(W())),range:re({firstSlot:W(),lastSlot:W()})}));function m1(r,e,t,n,s,i){const o=t||Zg;let u;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return n&&(f=async(g,S)=>{const I=await new Promise((R,T)=>{try{n(g,S,(x,O)=>R([x,O]))}catch(x){T(x)}});return await o(...I)}),new Gy(async(g,S)=>{const I={method:"POST",body:g,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},mm)};try{let R=5,T,x=500;for(;f?T=await f(r,I):T=await o(r,I),!(T.status!==429||s===!0||(R-=1,R===0));)console.error(`Server responded with ${T.status} ${T.statusText}.  Retrying after ${x}ms delay...`),await Gn(x),x*=2;const O=await T.text();T.ok?S(null,O):S(new Error(`${T.status} ${T.statusText}: ${O}`))}catch(R){R instanceof Error&&S(R)}},{})}function _1(r){return(e,t)=>new Promise((n,s)=>{r.request(e,t,(i,o)=>{if(i){s(i);return}n(o)})})}function w1(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const s=e.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}t(o)})})}const b1=ve(i1),R1=ve(a1),E1=ve(o1),A1=ve(c1),v1=ve(u1),I1=ve(l1),O1=ve(W()),S1=tt(re({total:W(),circulating:W(),nonCirculating:W(),nonCirculatingAccounts:ce(Je)})),na=re({amount:se(),uiAmount:ue(W()),decimals:W(),uiAmountString:ge(se())}),T1=tt(ce(re({address:Je,amount:se(),uiAmount:ue(W()),decimals:W(),uiAmountString:ge(se())}))),N1=tt(ce(re({pubkey:Je,account:re({executable:un(),owner:Je,lamports:W(),data:Pa,rentEpoch:W()})}))),ra=re({program:se(),parsed:Ur(),space:W()}),k1=tt(ce(re({pubkey:Je,account:re({executable:un(),owner:Je,lamports:W(),data:ra,rentEpoch:W()})}))),x1=tt(ce(re({lamports:W(),address:Je}))),ni=re({executable:un(),owner:Je,lamports:W(),data:Pa,rentEpoch:W()}),C1=re({pubkey:Je,account:ni}),B1=fi(Pt([Oa(fe.Buffer),ra]),Pt([dd,ra]),r=>Array.isArray(r)?oe(r,Pa):r),ia=re({executable:un(),owner:Je,lamports:W(),data:B1,rentEpoch:W()}),L1=re({pubkey:Je,account:ia}),M1=re({state:Pt([Ze("active"),Ze("inactive"),Ze("activating"),Ze("deactivating")]),active:W(),inactive:W()}),P1=ve(ce(re({signature:se(),slot:W(),err:ar,memo:ue(se()),blockTime:ge(ue(W()))}))),U1=ve(ce(re({signature:se(),slot:W(),err:ar,memo:ue(se()),blockTime:ge(ue(W()))}))),D1=re({subscription:W(),result:vs(ni)}),H1=re({pubkey:Je,account:ni}),F1=re({subscription:W(),result:vs(H1)}),z1=re({parent:W(),slot:W(),root:W()}),$1=re({subscription:W(),result:z1}),K1=Pt([re({type:Pt([Ze("firstShredReceived"),Ze("completed"),Ze("optimisticConfirmation"),Ze("root")]),slot:W(),timestamp:W()}),re({type:Ze("createdBank"),parent:W(),slot:W(),timestamp:W()}),re({type:Ze("frozen"),slot:W(),timestamp:W(),stats:re({numTransactionEntries:W(),numSuccessfulTransactions:W(),numFailedTransactions:W(),maxTransactionsPerEntry:W()})}),re({type:Ze("dead"),slot:W(),timestamp:W(),err:se()})]),q1=re({subscription:W(),result:K1}),V1=re({subscription:W(),result:vs(Pt([d1,h1]))}),G1=re({subscription:W(),result:W()}),W1=re({pubkey:se(),gossip:ue(se()),tpu:ue(se()),rpc:ue(se()),version:ue(se())}),Jc=re({votePubkey:se(),nodePubkey:se(),activatedStake:W(),epochVoteAccount:un(),epochCredits:ce(Sa([W(),W(),W()])),commission:W(),lastVote:W(),rootSlot:ue(W())}),j1=ve(re({current:ce(Jc),delinquent:ce(Jc)})),Y1=Pt([Ze("processed"),Ze("confirmed"),Ze("finalized")]),Z1=re({slot:W(),confirmations:ue(W()),err:ar,confirmationStatus:ge(Y1)}),X1=tt(ce(ue(Z1))),J1=ve(W()),pd=re({accountKey:Je,writableIndexes:ce(W()),readonlyIndexes:ce(W())}),Ua=re({signatures:ce(se()),message:re({accountKeys:ce(se()),header:re({numRequiredSignatures:W(),numReadonlySignedAccounts:W(),numReadonlyUnsignedAccounts:W()}),instructions:ce(re({accounts:ce(W()),data:se(),programIdIndex:W()})),recentBlockhash:se(),addressTableLookups:ge(ce(pd))})}),yd=re({pubkey:Je,signer:un(),writable:un(),source:ge(Pt([Ze("transaction"),Ze("lookupTable")]))}),gd=re({accountKeys:ce(yd),signatures:ce(se())}),md=re({parsed:Ur(),program:se(),programId:Je}),_d=re({accounts:ce(Je),data:se(),programId:Je}),Q1=Pt([_d,md]),em=Pt([re({parsed:Ur(),program:se(),programId:se()}),re({accounts:ce(se()),data:se(),programId:se()})]),wd=fi(Q1,em,r=>"accounts"in r?oe(r,_d):oe(r,md)),bd=re({signatures:ce(se()),message:re({accountKeys:ce(yd),instructions:ce(wd),recentBlockhash:se(),addressTableLookups:ge(ue(ce(pd)))})}),ns=re({accountIndex:W(),mint:se(),owner:ge(se()),programId:ge(se()),uiTokenAmount:na}),Rd=re({writable:ce(Je),readonly:ce(Je)}),Is=re({err:ar,fee:W(),innerInstructions:ge(ue(ce(re({index:W(),instructions:ce(re({accounts:ce(W()),data:se(),programIdIndex:W()}))})))),preBalances:ce(W()),postBalances:ce(W()),logMessages:ge(ue(ce(se()))),preTokenBalances:ge(ue(ce(ns))),postTokenBalances:ge(ue(ce(ns))),loadedAddresses:ge(Rd),computeUnitsConsumed:ge(W())}),Da=re({err:ar,fee:W(),innerInstructions:ge(ue(ce(re({index:W(),instructions:ce(wd)})))),preBalances:ce(W()),postBalances:ce(W()),logMessages:ge(ue(ce(se()))),preTokenBalances:ge(ue(ce(ns))),postTokenBalances:ge(ue(ce(ns))),loadedAddresses:ge(Rd),computeUnitsConsumed:ge(W())}),Dr=Pt([Ze(0),Ze("legacy")]),cr=re({pubkey:se(),lamports:W(),postBalance:ue(W()),rewardType:ue(se()),commission:ge(ue(W()))}),tm=ve(ue(re({blockhash:se(),previousBlockhash:se(),parentSlot:W(),transactions:ce(re({transaction:Ua,meta:ue(Is),version:ge(Dr)})),rewards:ge(ce(cr)),blockTime:ue(W()),blockHeight:ue(W())}))),nm=ve(ue(re({blockhash:se(),previousBlockhash:se(),parentSlot:W(),rewards:ge(ce(cr)),blockTime:ue(W()),blockHeight:ue(W())}))),rm=ve(ue(re({blockhash:se(),previousBlockhash:se(),parentSlot:W(),transactions:ce(re({transaction:gd,meta:ue(Is),version:ge(Dr)})),rewards:ge(ce(cr)),blockTime:ue(W()),blockHeight:ue(W())}))),im=ve(ue(re({blockhash:se(),previousBlockhash:se(),parentSlot:W(),transactions:ce(re({transaction:bd,meta:ue(Da),version:ge(Dr)})),rewards:ge(ce(cr)),blockTime:ue(W()),blockHeight:ue(W())}))),sm=ve(ue(re({blockhash:se(),previousBlockhash:se(),parentSlot:W(),transactions:ce(re({transaction:gd,meta:ue(Da),version:ge(Dr)})),rewards:ge(ce(cr)),blockTime:ue(W()),blockHeight:ue(W())}))),om=ve(ue(re({blockhash:se(),previousBlockhash:se(),parentSlot:W(),rewards:ge(ce(cr)),blockTime:ue(W()),blockHeight:ue(W())}))),am=ve(ue(re({blockhash:se(),previousBlockhash:se(),parentSlot:W(),transactions:ce(re({transaction:Ua,meta:ue(Is)})),rewards:ge(ce(cr)),blockTime:ue(W())}))),Qc=ve(ue(re({blockhash:se(),previousBlockhash:se(),parentSlot:W(),signatures:ce(se()),blockTime:ue(W())}))),Oo=ve(ue(re({slot:W(),meta:ue(Is),blockTime:ge(ue(W())),transaction:Ua,version:ge(Dr)}))),ki=ve(ue(re({slot:W(),transaction:bd,meta:ue(Da),blockTime:ge(ue(W())),version:ge(Dr)}))),cm=tt(re({blockhash:se(),lastValidBlockHeight:W()})),um=tt(un()),lm=re({slot:W(),numTransactions:W(),numSlots:W(),samplePeriodSecs:W()}),dm=ve(ce(lm)),hm=tt(ue(re({feeCalculator:re({lamportsPerSignature:W()})}))),fm=ve(se()),pm=ve(se()),ym=re({err:ar,logs:ce(se()),signature:se()}),gm=re({result:vs(ym),subscription:W()}),mm={"solana-client":"js/1.0.0-maintenance"};class Ed{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const y={};return async g=>{const{commitment:S,config:I}=$e(g),R=this._buildArgs([],S,void 0,I),T=jc(R);return y[T]=y[T]??(async()=>{try{const x=await this._rpcRequest("getBlockHeight",R),O=oe(x,ve(W()));if("error"in O)throw new pe(O.error,"failed to get block height information");return O.result}finally{delete y[T]}})(),await y[T]}})();let n,s,i,o,u,f;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,s=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,u=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=n1(e),this._rpcWsEndpoint=n||t1(e),this._rpcClient=m1(e,s,i,o,u,f),this._rpcRequest=_1(this._rpcClient),this._rpcBatchRequest=w1(this._rpcClient),this._rpcWebSocket=new Xg(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:s}=$e(t),i=this._buildArgs([e.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),u=oe(o,tt(W()));if("error"in u)throw new pe(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=oe(t,ve(ue(W())));if("error"in n)throw new pe(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=oe(e,ve(W()));if("error"in t)throw new pe(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=oe(e,O1);if("error"in t)throw new pe(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),s=oe(n,S1);if("error"in s)throw new pe(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",n),i=oe(s,tt(na));if("error"in i)throw new pe(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",n),i=oe(s,tt(na));if("error"in i)throw new pe(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,n){const{commitment:s,config:i}=$e(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const u=this._buildArgs(o,s,"base64",i),f=await this._rpcRequest("getTokenAccountsByOwner",u),y=oe(f,N1);if("error"in y)throw new pe(y.error,`failed to get token accounts owned by account ${e.toBase58()}`);return y.result}async getParsedTokenAccountsByOwner(e,t,n){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),u=oe(o,k1);if("error"in u)throw new pe(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",n),i=oe(s,x1);if("error"in i)throw new pe(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",n),i=oe(s,T1);if("error"in i)throw new pe(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:s}=$e(t),i=this._buildArgs([e.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),u=oe(o,tt(ue(ni)));if("error"in u)throw new pe(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,t){const{commitment:n,config:s}=$e(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),u=oe(o,tt(ue(ia)));if("error"in u)throw new pe(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:s}=$e(t),i=e.map(y=>y.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),u=await this._rpcRequest("getMultipleAccounts",o),f=oe(u,tt(ce(ue(ia))));if("error"in f)throw new pe(f.error,`failed to get info for accounts ${i}`);return f.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:s}=$e(t),i=e.map(y=>y.toBase58()),o=this._buildArgs([i],n,"base64",s),u=await this._rpcRequest("getMultipleAccounts",o),f=oe(u,tt(ce(ue(ni))));if("error"in f)throw new pe(f.error,`failed to get info for accounts ${i}`);return f.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:s,config:i}=$e(t),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),u=await this._rpcRequest("getStakeActivation",o),f=oe(u,ve(M1));if("error"in f)throw new pe(f.error,`failed to get Stake Activation ${e.toBase58()}`);return f.result}async getProgramAccounts(e,t){const{commitment:n,config:s}=$e(t),{encoding:i,...o}=s||{},u=this._buildArgs([e.toBase58()],n,i||"base64",{...o,...o.filters?{filters:Zc(o.filters)}:null}),f=await this._rpcRequest("getProgramAccounts",u),y=ce(C1),g=o.withContext===!0?oe(f,tt(y)):oe(f,ve(y));if("error"in g)throw new pe(g.error,`failed to get accounts owned by program ${e.toBase58()}`);return g.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:s}=$e(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),u=oe(o,ve(ce(L1)));if("error"in u)throw new pe(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,t){var i;let n;if(typeof e=="string")n=e;else{const o=e;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=et.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Be(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,s,i=!1;const o=new Promise((f,y)=>{try{n=this.onSignature(t,(S,I)=>{n=void 0;const R={context:I,value:S};f({__type:yn.PROCESSED,response:R})},e);const g=new Promise(S=>{n==null?S():s=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&S()})});(async()=>{if(await g,i)return;const S=await this.getSignatureStatus(t);if(i||S==null)return;const{context:I,value:R}=S;if(R!=null)if(R!=null&&R.err)y(R.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(R.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(R.confirmationStatus==="processed"||R.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,f({__type:yn.PROCESSED,response:{context:I,value:R}})}})()}catch(g){y(g)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(S=>{const I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let R=await I();if(!i){for(;R<=n;)if(await Gn(1e3),i||(R=await I(),i))return;S({__type:yn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),y=this.getCancellationPromise(t);let g;try{const S=await Promise.race([y,f,o]);if(S.__type===yn.PROCESSED)g=S.response;else throw new xa(s)}finally{i=!0,u()}return g}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let u=!1;const f=new Promise(R=>{let T=i,x=null;const O=async()=>{try{const{context:L,value:F}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:n});return x=L.slot,F==null?void 0:F.nonce}catch{return T}};(async()=>{if(T=await O(),!u)for(;;){if(i!==T){R({__type:yn.NONCE_INVALID,slotInWhichNonceDidAdvance:x});return}if(await Gn(2e3),u||(T=await O(),u))return}})()}),{abortConfirmation:y,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),S=this.getCancellationPromise(t);let I;try{const R=await Promise.race([S,g,f]);if(R.__type===yn.PROCESSED)I=R.response;else{let T;for(;;){const x=await this.getSignatureStatus(o);if(x==null)break;if(x.context.slot<(R.slotInWhichNonceDidAdvance??n)){await Gn(400);continue}T=x;break}if(T!=null&&T.value){const x=e||"finalized",{confirmationStatus:O}=T.value;switch(x){case"processed":case"recent":if(O!=="processed"&&O!=="confirmed"&&O!=="finalized")throw new yr(o);break;case"confirmed":case"single":case"singleGossip":if(O!=="confirmed"&&O!=="finalized")throw new yr(o);break;case"finalized":case"max":case"root":if(O!=="finalized")throw new yr(o);break;default:}I={context:T.context,value:{err:T.value.err}}}else throw new yr(o)}}finally{u=!0,y()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const s=new Promise(f=>{let y=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{y=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:yn.TIMED_OUT,timeoutMs:y}),y)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let u;try{const f=await Promise.race([o,s]);if(f.__type===yn.PROCESSED)u=f.response;else throw new Ca(t,f.timeoutMs/1e3)}finally{clearTimeout(n),i()}return u}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=oe(e,ve(ce(W1)));if("error"in t)throw new pe(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),s=oe(n,j1);if("error"in s)throw new pe(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:n}=$e(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlot",s),o=oe(i,ve(W()));if("error"in o)throw new pe(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=$e(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=oe(i,ve(se()));if("error"in o)throw new pe(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],s=await this._rpcRequest("getSlotLeaders",n),i=oe(s,ve(ce(Je)));if("error"in i)throw new pe(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:n,value:s}=await this.getSignatureStatuses([e],t);Be(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const s=await this._rpcRequest("getSignatureStatuses",n),i=oe(s,X1);if("error"in i)throw new pe(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:n}=$e(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=oe(i,ve(W()));if("error"in o)throw new pe(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),s=oe(n,b1);if("error"in s)throw new pe(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,n){const{commitment:s,config:i}=$e(n),o=this._buildArgs([e.map(y=>y.toBase58())],s,void 0,{...i,epoch:t??(i==null?void 0:i.epoch)}),u=await this._rpcRequest("getInflationReward",o),f=oe(u,s1);if("error"in f)throw new pe(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=oe(e,R1);if("error"in t)throw new pe(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=$e(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=oe(i,A1);if("error"in o)throw new pe(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=oe(e,v1);if("error"in t)throw new pe(t.error,"failed to get epoch schedule");const n=t.result;return new ld(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=oe(e,I1);if("error"in t)throw new pe(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=oe(s,J1);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=oe(t,dm);if("error"in n)throw new pe(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=oe(s,hm);if("error"in i)throw new pe(i.error,"failed to get fee calculator");const{context:o,value:u}=i.result;return{context:o,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,t){const n=Ie(e.serialize()).toString("base64"),s=this._buildArgs([n],t),i=await this._rpcRequest("getFeeForMessage",s),o=oe(i,tt(ue(W())));if("error"in o)throw new pe(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const t=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(u=>u.toBase58()),n=t!=null&&t.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=oe(s,E1);if("error"in i)throw new pe(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=$e(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=oe(i,cm);if("error"in o)throw new pe(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:s}=$e(t),i=this._buildArgs([e],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),u=oe(o,um);if("error"in u)throw new pe(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=oe(e,ve(f1));if("error"in t)throw new pe(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=oe(e,ve(se()));if("error"in t)throw new pe(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:s}=$e(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const u=oe(o,rm);if("error"in u)throw u.error;return u.result}case"none":{const u=oe(o,nm);if("error"in u)throw u.error;return u.result}default:{const u=oe(o,tm);if("error"in u)throw u.error;const{result:f}=u;return f?{...f,transactions:f.transactions.map(({transaction:y,meta:g,version:S})=>({meta:g,transaction:{...y,message:Io(S,y.message)},version:S}))}:null}}}catch(u){throw new pe(u,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:s}=$e(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const u=oe(o,sm);if("error"in u)throw u.error;return u.result}case"none":{const u=oe(o,om);if("error"in u)throw u.error;return u.result}default:{const u=oe(o,im);if("error"in u)throw u.error;return u.result}}}catch(u){throw new pe(u,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:u,...f}=e;n=u,t=f}const s=this._buildArgs([],n,"base64",t),i=await this._rpcRequest("getBlockProduction",s),o=oe(i,g1);if("error"in o)throw new pe(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:s}=$e(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getTransaction",i),u=oe(o,Oo);if("error"in u)throw new pe(u.error,"failed to get transaction");const f=u.result;return f&&{...f,transaction:{...f.transaction,message:Io(f.version,f.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:s}=$e(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),u=oe(o,ki);if("error"in u)throw new pe(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,t){const{commitment:n,config:s}=$e(t),i=e.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(f=>{const y=oe(f,ki);if("error"in y)throw new pe(y.error,"failed to get transactions");return y.result})}async getTransactions(e,t){const{commitment:n,config:s}=$e(t),i=e.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(f=>{const y=oe(f,Oo);if("error"in y)throw new pe(y.error,"failed to get transactions");const g=y.result;return g&&{...g,transaction:{...g.transaction,message:Io(g.version,g.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",n),i=oe(s,am);if("error"in i)throw new pe(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const u={...o,transactions:o.transactions.map(({transaction:f,meta:y})=>{const g=new en(f.message);return{meta:y,transaction:{...f,message:g}}})};return{...u,transactions:u.transactions.map(({transaction:f,meta:y})=>({meta:y,transaction:xe.populate(f.message,f.signatures)}))}}async getBlocks(e,t,n){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),i=await this._rpcRequest("getBlocks",s),o=oe(i,ve(ce(W())));if("error"in o)throw new pe(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=oe(s,Qc);if("error"in i)throw new pe(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=oe(s,Qc);if("error"in i)throw new pe(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",n),i=oe(s,Oo);if("error"in i)throw new pe(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const u=new en(o.transaction.message),f=o.transaction.signatures;return{...o,transaction:xe.populate(u,f)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=oe(s,ki);if("error"in i)throw new pe(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const u=oe(o,ki);if("error"in u)throw new pe(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,t,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<i));)try{const f=await this.getConfirmedBlockSignatures(t,"finalized");f.signatures.length>0&&(s.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const f=await this.getConfirmedBlockSignatures(n);f.signatures.length>0&&(s.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=oe(i,P1);if("error"in o)throw new pe(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",s),o=oe(i,U1);if("error"in o)throw new pe(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=new ta({key:e,state:ta.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=As.fromAccountData(s.data)),{context:n,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=oe(n,fm);if("error"in s)throw new pe(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Gn(100);const n=Date.now()-this._blockhashInfo.lastFetch>=hd;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Gn(ad/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=$e(e),s=this._buildArgs([],t,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=oe(i,tt(W()));if("error"in o)throw new pe(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const x=e.serialize(),O=fe.Buffer.from(x).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const L=t||{};L.encoding="base64","commitment"in L||(L.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(L.innerInstructions=t.innerInstructions);const F=[O,L],M=await this._rpcRequest("simulateTransaction",F),q=oe(M,Xc);if("error"in q)throw new Error("failed to simulate transaction: "+q.error.message);return q.result}let s;if(e instanceof xe){let T=e;s=new xe,s.feePayer=T.feePayer,s.instructions=e.instructions,s.nonceInfo=T.nonceInfo,s.signatures=T.signatures}else s=xe.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(s.nonceInfo&&i)s.sign(...i);else{let T=this._disableBlockhashCaching;for(;;){const x=await this._blockhashWithExpiryBlockHeight(T);if(s.lastValidBlockHeight=x.lastValidBlockHeight,s.recentBlockhash=x.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const O=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(O)&&!this._blockhashInfo.transactionSignatures.includes(O)){this._blockhashInfo.simulatedSignatures.push(O);break}else T=!0}}const o=s._compile(),u=o.serialize(),y=s._serialize(u).toString("base64"),g={encoding:"base64",commitment:this.commitment};if(n){const T=(Array.isArray(n)?n:o.nonProgramIds()).map(x=>x.toBase58());g.accounts={encoding:"base64",addresses:T}}i&&(g.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(g.innerInstructions=t.innerInstructions);const S=[y,g],I=await this._rpcRequest("simulateTransaction",S),R=oe(I,Xc);if("error"in R){let T;if("data"in R.error&&(T=R.error.data.logs,T&&Array.isArray(T))){const x=`
    `,O=x+T.join(x);console.error(R.error.message,O)}throw new Pn({action:"simulate",signature:"",transactionMessage:R.error.message,logs:T})}return R.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const u=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const f=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))o=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const i=e.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(e,t){const n=Ie(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},s=t&&t.skipPreflight,i=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[e,n],u=await this._rpcRequest("sendTransaction",o),f=oe(u,pm);if("error"in f){let y;throw"data"in f.error&&(y=f.error.data.logs),new Pn({action:s?"send":"simulate",signature:"",transactionMessage:f.error.message,logs:y})}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var s;const n=(s=this._subscriptionsByHash[e])==null?void 0:s.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var i;const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const u=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=s.callbacks,await this._updateSubscriptions()}catch(u){if(console.error(`Received ${u instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:u}),!t())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(u){if(u instanceof Error&&console.error(`${o} error:`,u.message),!t())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(s=>{try{s(...t)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=oe(e,D1);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,s=jc([e.method,t]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Be(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:s,config:i}=$e(n),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=oe(e,F1);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,s){const{commitment:i,config:o}=$e(n),u=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Zc(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=oe(e,gm);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=oe(e,$1);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=oe(e,q1);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,s){const i=t||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,s){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,s)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=oe(e,V1);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const s=this._buildArgs([e],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,u)=>{if(o.type==="status"){t(o.result,u);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,t,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),u=this._makeSubscription({callback:(f,y)=>{t(f,y);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=oe(e,G1);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Rr{constructor(e){this._keypair=void 0,this._keypair=e??qc()}static generate(){return new Rr(qc())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const s=e.slice(0,32),i=ts(s);for(let o=0;o<32;o++)if(n[o]!==i[o])throw new Error("provided secretKey is invalid")}return new Rr({publicKey:n,secretKey:e})}static fromSeed(e){const t=ts(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Rr({publicKey:t,secretKey:n})}get publicKey(){return new ne(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Rn=Object.freeze({CreateLookupTable:{index:0,layout:U.struct([U.u32("instruction"),Nr("recentSlot"),U.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:U.struct([U.u32("instruction")])},ExtendLookupTable:{index:2,layout:U.struct([U.u32("instruction"),Nr(),U.seq(Se(),U.offset(U.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:U.struct([U.u32("instruction")])},CloseLookupTable:{index:4,layout:U.struct([U.u32("instruction")])}});class _m{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=U.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Rn))if(o.index==n){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=Me(Rn.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=Me(Rn.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new ne(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Ha.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Ha{constructor(){}static createLookupTable(e){const[t,n]=ne.findProgramAddressSync([e.authority.toBuffer(),Zo.toBufferLE(BigInt(e.recentSlot),8)],this.programId),s=Rn.CreateLookupTable,i=ke(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Et.programId,isSigner:!1,isWritable:!1}];return[new De({programId:this.programId,keys:o,data:i}),t]}static freezeLookupTable(e){const t=Rn.FreezeLookupTable,n=ke(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new De({programId:this.programId,keys:s,data:n})}static extendLookupTable(e){const t=Rn.ExtendLookupTable,n=ke(t,{addresses:e.addresses.map(i=>i.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Et.programId,isSigner:!1,isWritable:!1}),new De({programId:this.programId,keys:s,data:n})}static deactivateLookupTable(e){const t=Rn.DeactivateLookupTable,n=ke(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new De({programId:this.programId,keys:s,data:n})}static closeLookupTable(e){const t=Rn.CloseLookupTable,n=ke(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new De({programId:this.programId,keys:s,data:n})}}Ha.programId=new ne("AddressLookupTab1e1111111111111111111111111");class wm{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=U.u8("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(on))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=Me(on.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=Me(on.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=Me(on.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=Me(on.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Fa.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const on=Object.freeze({RequestUnits:{index:0,layout:U.struct([U.u8("instruction"),U.u32("units"),U.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:U.struct([U.u8("instruction"),U.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:U.struct([U.u8("instruction"),U.u32("units")])},SetComputeUnitPrice:{index:3,layout:U.struct([U.u8("instruction"),Nr("microLamports")])}});class Fa{constructor(){}static requestUnits(e){const t=on.RequestUnits,n=ke(t,e);return new De({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=on.RequestHeapFrame,n=ke(t,e);return new De({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=on.SetComputeUnitLimit,n=ke(t,e);return new De({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=on.SetComputeUnitPrice,n=ke(t,{microLamports:BigInt(e.microLamports)});return new De({keys:[],programId:this.programId,data:n})}}Fa.programId=new ne("ComputeBudget111111111111111111111111111111");const eu=64,tu=32,nu=64,ru=U.struct([U.u8("numSignatures"),U.u8("padding"),U.u16("signatureOffset"),U.u16("signatureInstructionIndex"),U.u16("publicKeyOffset"),U.u16("publicKeyInstructionIndex"),U.u16("messageDataOffset"),U.u16("messageDataSize"),U.u16("messageInstructionIndex")]);class Os{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,instructionIndex:i}=e;Be(t.length===tu,`Public Key must be ${tu} bytes but received ${t.length} bytes`),Be(s.length===nu,`Signature must be ${nu} bytes but received ${s.length} bytes`);const o=ru.span,u=o+t.length,f=u+s.length,y=1,g=fe.Buffer.alloc(f+n.length),S=i??65535;return ru.encode({numSignatures:y,padding:0,signatureOffset:u,signatureInstructionIndex:S,publicKeyOffset:o,publicKeyInstructionIndex:S,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:S},g),g.fill(t,o),g.fill(s,u),g.fill(n,f),new De({keys:[],programId:Os.programId,data:g})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Be(t.length===eu,`Private key must be ${eu} bytes but received ${t.length} bytes`);try{const i=Rr.fromSecretKey(t),o=i.publicKey.toBytes(),u=Na(n,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:u,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Os.programId=new ne("Ed25519SigVerify111111111111111111111111111");const bm=(r,e)=>{const t=bs.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};bs.utils.isValidPrivateKey;const Rm=bs.getPublicKey,iu=32,So=20,su=64,Em=11,To=U.struct([U.u8("numSignatures"),U.u16("signatureOffset"),U.u8("signatureInstructionIndex"),U.u16("ethAddressOffset"),U.u8("ethAddressInstructionIndex"),U.u16("messageDataOffset"),U.u16("messageDataSize"),U.u8("messageInstructionIndex"),U.blob(20,"ethAddress"),U.blob(64,"signature"),U.u8("recoveryId")]);class Er{constructor(){}static publicKeyToEthAddress(e){Be(e.length===su,`Public key must be ${su} bytes but received ${e.length} bytes`);try{return fe.Buffer.from(Hc(Ie(e))).slice(-So)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,recoveryId:i,instructionIndex:o}=e;return Er.createInstructionWithEthAddress({ethAddress:Er.publicKeyToEthAddress(t),message:n,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:s,recoveryId:i,instructionIndex:o=0}=e;let u;typeof t=="string"?t.startsWith("0x")?u=fe.Buffer.from(t.substr(2),"hex"):u=fe.Buffer.from(t,"hex"):u=t,Be(u.length===So,`Address must be ${So} bytes but received ${u.length} bytes`);const f=1+Em,y=f,g=f+u.length,S=g+s.length+1,I=1,R=fe.Buffer.alloc(To.span+n.length);return To.encode({numSignatures:I,signatureOffset:g,signatureInstructionIndex:o,ethAddressOffset:y,ethAddressInstructionIndex:o,messageDataOffset:S,messageDataSize:n.length,messageInstructionIndex:o,signature:Ie(s),ethAddress:Ie(u),recoveryId:i},R),R.fill(Ie(n),To.span),new De({keys:[],programId:Er.programId,data:R})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Be(t.length===iu,`Private key must be ${iu} bytes but received ${t.length} bytes`);try{const i=Ie(t),o=Rm(i,!1).slice(1),u=fe.Buffer.from(Hc(Ie(n))),[f,y]=bm(u,i);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:f,recoveryId:y,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Er.programId=new ne("KeccakSecp256k11111111111111111111111111111");var Ad;const vd=new ne("StakeConfig11111111111111111111111111111111");class Id{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class pi{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}Ad=pi;pi.default=new Ad(0,0,ne.default);class Am{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=U.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(St))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=Me(St.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Id(new ne(t.staker),new ne(t.withdrawer)),lockup:new pi(n.unixTimestamp,n.epoch,new ne(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Me(St.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=Me(St.Authorize,e.data),s={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ne(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:s,authorityOwner:i}=Me(St.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:s,authorityOwner:new ne(i),newAuthorizedPubkey:new ne(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Me(St.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Me(St.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Me(St.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Me(St.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Ss.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const St=Object.freeze({Initialize:{index:0,layout:U.struct([U.u32("instruction"),Og(),Sg()])},Authorize:{index:1,layout:U.struct([U.u32("instruction"),Se("newAuthorized"),U.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:U.struct([U.u32("instruction")])},Split:{index:3,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},Withdraw:{index:4,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},Deactivate:{index:5,layout:U.struct([U.u32("instruction")])},Merge:{index:7,layout:U.struct([U.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:U.struct([U.u32("instruction"),Se("newAuthorized"),U.u32("stakeAuthorizationType"),Zn("authoritySeed"),Se("authorityOwner")])}}),vm=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Ss{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:s}=e,i=s||pi.default,o=St.Initialize,u=ke(o,{authorized:{staker:Ie(n.staker.toBuffer()),withdrawer:Ie(n.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:Ie(i.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Tr,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new De(f)}static createAccountWithSeed(e){const t=new xe;t.add(Et.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static createAccount(e){const t=new xe;t.add(Et.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:s}=e,i=St.Delegate,o=ke(i);return new xe().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:rn,isSigner:!1,isWritable:!1},{pubkey:Vi,isSigner:!1,isWritable:!1},{pubkey:vd,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=e,u=St.Authorize,f=ke(u,{newAuthorized:Ie(s.toBuffer()),stakeAuthorizationType:i.index}),y=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&y.push({pubkey:o,isSigner:!0,isWritable:!1}),new xe().add({keys:y,programId:this.programId,data:f})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:u,custodianPubkey:f}=e,y=St.AuthorizeWithSeed,g=ke(y,{newAuthorized:Ie(o.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:s,authorityOwner:Ie(i.toBuffer())}),S=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:rn,isSigner:!1,isWritable:!1}];return f&&S.push({pubkey:f,isSigner:!0,isWritable:!1}),new xe().add({keys:S,programId:this.programId,data:g})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:s,lamports:i}=e,o=St.Split,u=ke(o,{lamports:i});return new De({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e,t){const n=new xe;return n.add(Et.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:u,lamports:f}=e,y=new xe;return y.add(Et.allocate({accountPubkey:i,basePubkey:o,seed:u,space:this.space,programId:this.programId})),t&&t>0&&y.add(Et.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),y.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,lamports:f}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:s}=e,i=St.Merge,o=ke(i);return new xe().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!1},{pubkey:Vi,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:s,lamports:i,custodianPubkey:o}=e,u=St.Withdraw,f=ke(u,{lamports:i}),y=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!1},{pubkey:Vi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&y.push({pubkey:o,isSigner:!0,isWritable:!1}),new xe().add({keys:y,programId:this.programId,data:f})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,s=St.Deactivate,i=ke(s);return new xe().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Ss.programId=new ne("Stake11111111111111111111111111111111111111");Ss.space=200;class Od{constructor(e,t,n,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=s}}class Im{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=U.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(an))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=Me(an.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Od(new ne(t.nodePubkey),new ne(t.authorizedVoter),new ne(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=Me(an.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new ne(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:s,voteAuthorizationType:i}}=Me(an.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ne(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new ne(s),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Me(an.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Hr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const an=Object.freeze({InitializeAccount:{index:0,layout:U.struct([U.u32("instruction"),Tg()])},Authorize:{index:1,layout:U.struct([U.u32("instruction"),Se("newAuthorized"),U.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:U.struct([U.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:U.struct([U.u32("instruction"),Ng()])}}),Om=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Hr{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:s}=e,i=an.InitializeAccount,o=ke(i,{voteInit:{nodePubkey:Ie(s.nodePubkey.toBuffer()),authorizedVoter:Ie(s.authorizedVoter.toBuffer()),authorizedWithdrawer:Ie(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Tr,isSigner:!1,isWritable:!1},{pubkey:rn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new De(u)}static createAccount(e){const t=new xe;return t.add(Et.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,voteAuthorizationType:i}=e,o=an.Authorize,u=ke(o,{newAuthorized:Ie(s.toBuffer()),voteAuthorizationType:i.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new xe().add({keys:f,programId:this.programId,data:u})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:u}=e,f=an.AuthorizeWithSeed,y=ke(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Ie(n.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:Ie(i.toBuffer()),voteAuthorizationType:o.index}}),g=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:rn,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new xe().add({keys:g,programId:this.programId,data:y})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:s,toPubkey:i}=e,o=an.Withdraw,u=ke(o,{lamports:s}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new xe().add({keys:f,programId:this.programId,data:u})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return Hr.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:s}=e,i=an.UpdateValidatorIdentity,o=ke(i),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new xe().add({keys:u,programId:this.programId,data:o})}}Hr.programId=new ne("Vote111111111111111111111111111111111111111");Hr.space=3762;const Sd=new ne("Va1idator1nfo111111111111111111111111111111"),Sm=re({name:se(),website:ge(se()),details:ge(se()),iconUrl:ge(se()),keybaseUsername:ge(se())});class za{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(Ht(t)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new ne(Ft(t,0,cn)),u=sn(t)===1;s.push({publicKey:o,isSigner:u})}if(s[0].publicKey.equals(Sd)&&s[1].isSigner){const i=Zn().decode(fe.Buffer.from(t)),o=JSON.parse(i);return $l(o,Sm),new za(s[1].publicKey,o)}return null}}const Tm=new ne("Vote111111111111111111111111111111111111111"),Nm=U.struct([Se("nodePubkey"),Se("authorizedWithdrawer"),U.u8("commission"),U.nu64(),U.seq(U.struct([U.nu64("slot"),U.u32("confirmationCount")]),U.offset(U.u32(),-8),"votes"),U.u8("rootSlotValid"),U.nu64("rootSlot"),U.nu64(),U.seq(U.struct([U.nu64("epoch"),Se("authorizedVoter")]),U.offset(U.u32(),-8),"authorizedVoters"),U.struct([U.seq(U.struct([Se("authorizedPubkey"),U.nu64("epochOfLastAuthorizedSwitch"),U.nu64("targetEpoch")]),32,"buf"),U.nu64("idx"),U.u8("isEmpty")],"priorVoters"),U.nu64(),U.seq(U.struct([U.nu64("epoch"),U.nu64("credits"),U.nu64("prevCredits")]),U.offset(U.u32(),-8),"epochCredits"),U.struct([U.nu64("slot"),U.nu64("timestamp")],"lastTimestamp")]);class $a{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=Nm.decode(Ie(e),4);let s=n.rootSlot;return n.rootSlotValid||(s=null),new $a({nodePubkey:new ne(n.nodePubkey),authorizedWithdrawer:new ne(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:s,authorizedVoters:n.authorizedVoters.map(km),priorVoters:xm(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function km({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new ne(r)}}function ou({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new ne(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function xm({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(ou),...r.slice(0,e).map(ou)]}const au={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Cm(r,e){const t=e===!1?"http":"https";if(!r)return au[t].devnet;const n=au[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function Bm(r,e,t,n){let s,i;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(s=t,i=n):i=t;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},u=await r.sendRawTransaction(e,o),f=i&&i.commitment,g=(await(s?r.confirmTransaction(s,f):r.confirmTransaction(u,f))).value;if(g.err)throw u!=null?new Pn({action:o!=null&&o.skipPreflight?"send":"simulate",signature:u,transactionMessage:`Status: (${JSON.stringify(g)})`}):new Error(`Raw transaction ${u} failed (${JSON.stringify(g)})`);return u}const Lm=1e9,Mm=Object.freeze(Object.defineProperty({__proto__:null,Account:Ag,AddressLookupTableAccount:ta,AddressLookupTableInstruction:_m,AddressLookupTableProgram:Ha,Authorized:Id,BLOCKHASH_CACHE_TIMEOUT_MS:hd,BPF_LOADER_DEPRECATED_PROGRAM_ID:vg,BPF_LOADER_PROGRAM_ID:qg,BpfLoader:Vg,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:on,ComputeBudgetInstruction:wm,ComputeBudgetProgram:Fa,Connection:Ed,Ed25519Program:Os,Enum:Rg,EpochSchedule:ld,FeeCalculatorLayout:cd,Keypair:Rr,LAMPORTS_PER_SOL:Lm,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Rn,Loader:ir,Lockup:pi,MAX_SEED_LENGTH:id,Message:en,MessageAccountKeys:ti,MessageV0:rr,NONCE_ACCOUNT_LENGTH:ea,NonceAccount:As,PACKET_DATA_SIZE:Bn,PUBLIC_KEY_LENGTH:cn,PublicKey:ne,SIGNATURE_LENGTH_IN_BYTES:ei,SOLANA_SCHEMA:Yr,STAKE_CONFIG_ID:vd,STAKE_INSTRUCTION_LAYOUTS:St,SYSTEM_INSTRUCTION_LAYOUTS:Ke,SYSVAR_CLOCK_PUBKEY:rn,SYSVAR_EPOCH_SCHEDULE_PUBKEY:Lg,SYSVAR_INSTRUCTIONS_PUBKEY:Mg,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:qi,SYSVAR_RENT_PUBKEY:Tr,SYSVAR_REWARDS_PUBKEY:Pg,SYSVAR_SLOT_HASHES_PUBKEY:Ug,SYSVAR_SLOT_HISTORY_PUBKEY:Dg,SYSVAR_STAKE_HISTORY_PUBKEY:Vi,Secp256k1Program:Er,SendTransactionError:Pn,SolanaJSONRPCError:pe,SolanaJSONRPCErrorCode:Hg,StakeAuthorizationLayout:vm,StakeInstruction:Am,StakeProgram:Ss,Struct:ka,SystemInstruction:$g,SystemProgram:Et,Transaction:xe,TransactionExpiredBlockheightExceededError:xa,TransactionExpiredNonceInvalidError:yr,TransactionExpiredTimeoutError:Ca,TransactionInstruction:De,TransactionMessage:La,TransactionStatus:yn,VALIDATOR_INFO_KEY:Sd,VERSION_PREFIX_MASK:Rs,VOTE_PROGRAM_ID:Tm,ValidatorInfo:za,VersionedMessage:Ba,VersionedTransaction:Ma,VoteAccount:$a,VoteAuthorizationLayout:Om,VoteInit:Od,VoteInstruction:Im,VoteProgram:Hr,clusterApiUrl:Cm,sendAndConfirmRawTransaction:Bm,sendAndConfirmTransaction:Qo},Symbol.toStringTag,{value:"Module"}));var xi={exports:{}},cu;function Pm(){if(cu)return xi.exports;cu=1;const r=/[\p{Lu}]/u,e=/[\p{Ll}]/u,t=/^[\p{Lu}](?![\p{Lu}])/gu,n=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,i=new RegExp("^"+s.source),o=new RegExp(s.source+n.source,"gu"),u=new RegExp("\\d+"+n.source,"gu"),f=(I,R,T)=>{let x=!1,O=!1,L=!1;for(let F=0;F<I.length;F++){const M=I[F];x&&r.test(M)?(I=I.slice(0,F)+"-"+I.slice(F),x=!1,L=O,O=!0,F++):O&&L&&e.test(M)?(I=I.slice(0,F-1)+"-"+I.slice(F-1),L=O,O=!1,x=!0):(x=R(M)===M&&T(M)!==M,L=O,O=T(M)===M&&R(M)!==M)}return I},y=(I,R)=>(t.lastIndex=0,I.replace(t,T=>R(T))),g=(I,R)=>(o.lastIndex=0,u.lastIndex=0,I.replace(o,(T,x)=>R(x)).replace(u,T=>R(T))),S=(I,R)=>{if(!(typeof I=="string"||Array.isArray(I)))throw new TypeError("Expected the input to be `string | string[]`");if(R={pascalCase:!1,preserveConsecutiveUppercase:!1,...R},Array.isArray(I)?I=I.map(L=>L.trim()).filter(L=>L.length).join("-"):I=I.trim(),I.length===0)return"";const T=R.locale===!1?L=>L.toLowerCase():L=>L.toLocaleLowerCase(R.locale),x=R.locale===!1?L=>L.toUpperCase():L=>L.toLocaleUpperCase(R.locale);return I.length===1?R.pascalCase?x(I):T(I):(I!==T(I)&&(I=f(I,T,x)),I=I.replace(i,""),R.preserveConsecutiveUppercase?I=y(I,T):I=T(I),R.pascalCase&&(I=x(I.charAt(0))+I.slice(1)),g(I,x))};return xi.exports=S,xi.exports.default=S,xi.exports}var Um=Pm();const Dm=Br(Um);var Gr={},de={},uu;function lu(){if(uu)return de;uu=1;class r{constructor(d,l){if(!Number.isInteger(d))throw new TypeError("span must be an integer");this.span=d,this.property=l}makeDestinationObject(){return{}}decode(d,l){throw new Error("Layout is abstract")}encode(d,l,a){throw new Error("Layout is abstract")}getSpan(d,l){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(d){const l=Object.create(this.constructor.prototype);return Object.assign(l,this),l.property=d,l}fromArray(d){}}de.Layout=r;function e(_,d){return d.property?_+"["+d.property+"]":_}de.nameWithProperty=e;function t(_,d){if(typeof _!="function")throw new TypeError("Class must be constructor");if(_.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(d&&d instanceof r))throw new TypeError("layout must be a Layout");if(d.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");_.layout_=d,d.boundConstructor_=_,d.makeDestinationObject=()=>new _,Object.defineProperty(_.prototype,"encode",{value:function(l,a){return d.encode(this,l,a)},writable:!0}),Object.defineProperty(_,"decode",{value:function(l,a){return d.decode(l,a)},writable:!0})}de.bindConstructorLayout=t;class n extends r{isCount(){throw new Error("ExternalLayout is abstract")}}class s extends n{constructor(d,l){if(d===void 0&&(d=1),!Number.isInteger(d)||0>=d)throw new TypeError("elementSpan must be a (positive) integer");super(-1,l),this.elementSpan=d}isCount(){return!0}decode(d,l){l===void 0&&(l=0);const a=d.length-l;return Math.floor(a/this.elementSpan)}encode(d,l,a){return 0}}class i extends n{constructor(d,l,a){if(!(d instanceof r))throw new TypeError("layout must be a Layout");if(l===void 0)l=0;else if(!Number.isInteger(l))throw new TypeError("offset must be integer or undefined");super(d.span,a||d.property),this.layout=d,this.offset=l}isCount(){return this.layout instanceof o||this.layout instanceof u}decode(d,l){return l===void 0&&(l=0),this.layout.decode(d,l+this.offset)}encode(d,l,a){return a===void 0&&(a=0),this.layout.encode(d,l,a+this.offset)}}class o extends r{constructor(d,l){if(super(d,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,l){return l===void 0&&(l=0),d.readUIntLE(l,this.span)}encode(d,l,a){return a===void 0&&(a=0),l.writeUIntLE(d,a,this.span),this.span}}class u extends r{constructor(d,l){if(super(d,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,l){return l===void 0&&(l=0),d.readUIntBE(l,this.span)}encode(d,l,a){return a===void 0&&(a=0),l.writeUIntBE(d,a,this.span),this.span}}class f extends r{constructor(d,l){if(super(d,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,l){return l===void 0&&(l=0),d.readIntLE(l,this.span)}encode(d,l,a){return a===void 0&&(a=0),l.writeIntLE(d,a,this.span),this.span}}class y extends r{constructor(d,l){if(super(d,l),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(d,l){return l===void 0&&(l=0),d.readIntBE(l,this.span)}encode(d,l,a){return a===void 0&&(a=0),l.writeIntBE(d,a,this.span),this.span}}const g=Math.pow(2,32);function S(_){const d=Math.floor(_/g),l=_-d*g;return{hi32:d,lo32:l}}function I(_,d){return _*g+d}class R extends r{constructor(d){super(8,d)}decode(d,l){l===void 0&&(l=0);const a=d.readUInt32LE(l),h=d.readUInt32LE(l+4);return I(h,a)}encode(d,l,a){a===void 0&&(a=0);const h=S(d);return l.writeUInt32LE(h.lo32,a),l.writeUInt32LE(h.hi32,a+4),8}}class T extends r{constructor(d){super(8,d)}decode(d,l){l===void 0&&(l=0);const a=d.readUInt32BE(l),h=d.readUInt32BE(l+4);return I(a,h)}encode(d,l,a){a===void 0&&(a=0);const h=S(d);return l.writeUInt32BE(h.hi32,a),l.writeUInt32BE(h.lo32,a+4),8}}class x extends r{constructor(d){super(8,d)}decode(d,l){l===void 0&&(l=0);const a=d.readUInt32LE(l),h=d.readInt32LE(l+4);return I(h,a)}encode(d,l,a){a===void 0&&(a=0);const h=S(d);return l.writeUInt32LE(h.lo32,a),l.writeInt32LE(h.hi32,a+4),8}}class O extends r{constructor(d){super(8,d)}decode(d,l){l===void 0&&(l=0);const a=d.readInt32BE(l),h=d.readUInt32BE(l+4);return I(a,h)}encode(d,l,a){a===void 0&&(a=0);const h=S(d);return l.writeInt32BE(h.hi32,a),l.writeUInt32BE(h.lo32,a+4),8}}class L extends r{constructor(d){super(4,d)}decode(d,l){return l===void 0&&(l=0),d.readFloatLE(l)}encode(d,l,a){return a===void 0&&(a=0),l.writeFloatLE(d,a),4}}class F extends r{constructor(d){super(4,d)}decode(d,l){return l===void 0&&(l=0),d.readFloatBE(l)}encode(d,l,a){return a===void 0&&(a=0),l.writeFloatBE(d,a),4}}class M extends r{constructor(d){super(8,d)}decode(d,l){return l===void 0&&(l=0),d.readDoubleLE(l)}encode(d,l,a){return a===void 0&&(a=0),l.writeDoubleLE(d,a),8}}class q extends r{constructor(d){super(8,d)}decode(d,l){return l===void 0&&(l=0),d.readDoubleBE(l)}encode(d,l,a){return a===void 0&&(a=0),l.writeDoubleBE(d,a),8}}class G extends r{constructor(d,l,a){if(!(d instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(l instanceof n&&l.isCount()||Number.isInteger(l)&&0<=l))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let h=-1;!(l instanceof n)&&0<d.span&&(h=l*d.span),super(h,a),this.elementLayout=d,this.count=l}getSpan(d,l){if(0<=this.span)return this.span;l===void 0&&(l=0);let a=0,h=this.count;if(h instanceof n&&(h=h.decode(d,l)),0<this.elementLayout.span)a=h*this.elementLayout.span;else{let E=0;for(;E<h;)a+=this.elementLayout.getSpan(d,l+a),++E}return a}decode(d,l){l===void 0&&(l=0);const a=[];let h=0,E=this.count;for(E instanceof n&&(E=E.decode(d,l));h<E;)a.push(this.elementLayout.decode(d,l)),l+=this.elementLayout.getSpan(d,l),h+=1;return a}encode(d,l,a){a===void 0&&(a=0);const h=this.elementLayout,E=d.reduce((C,D)=>C+h.encode(D,l,a+C),0);return this.count instanceof n&&this.count.encode(d.length,l,a),E}}class te extends r{constructor(d,l,a){if(!(Array.isArray(d)&&d.reduce((E,C)=>E&&C instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof l=="boolean"&&a===void 0&&(a=l,l=void 0);for(const E of d)if(0>E.span&&E.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let h=-1;try{h=d.reduce((E,C)=>E+C.getSpan(),0)}catch{}super(h,l),this.fields=d,this.decodePrefixes=!!a}getSpan(d,l){if(0<=this.span)return this.span;l===void 0&&(l=0);let a=0;try{a=this.fields.reduce((h,E)=>{const C=E.getSpan(d,l);return l+=C,h+C},0)}catch{throw new RangeError("indeterminate span")}return a}decode(d,l){l===void 0&&(l=0);const a=this.makeDestinationObject();for(const h of this.fields)if(h.property!==void 0&&(a[h.property]=h.decode(d,l)),l+=h.getSpan(d,l),this.decodePrefixes&&d.length===l)break;return a}encode(d,l,a){a===void 0&&(a=0);const h=a;let E=0,C=0;for(const D of this.fields){let J=D.span;if(C=0<J?J:0,D.property!==void 0){const ie=d[D.property];ie!==void 0&&(C=D.encode(ie,l,a),0>J&&(J=D.getSpan(l,a)))}E=a,a+=J}return E+C-h}fromArray(d){const l=this.makeDestinationObject();for(const a of this.fields)a.property!==void 0&&0<d.length&&(l[a.property]=d.shift());return l}layoutFor(d){if(typeof d!="string")throw new TypeError("property must be string");for(const l of this.fields)if(l.property===d)return l}offsetOf(d){if(typeof d!="string")throw new TypeError("property must be string");let l=0;for(const a of this.fields){if(a.property===d)return l;0>a.span?l=-1:0<=l&&(l+=a.span)}}}class X{constructor(d){this.property=d}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class ee extends X{constructor(d,l){if(!(d instanceof n&&d.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(l||d.property||"variant"),this.layout=d}decode(d,l){return this.layout.decode(d,l)}encode(d,l,a){return this.layout.encode(d,l,a)}}class $ extends r{constructor(d,l,a){const h=d instanceof o||d instanceof u;if(h)d=new ee(new i(d));else if(d instanceof n&&d.isCount())d=new ee(d);else if(!(d instanceof X))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(l===void 0&&(l=null),!(l===null||l instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(l!==null){if(0>l.span)throw new Error("defaultLayout must have constant span");l.property===void 0&&(l=l.replicate("content"))}let E=-1;l&&(E=l.span,0<=E&&h&&(E+=d.layout.span)),super(E,a),this.discriminator=d,this.usesPrefixDiscriminator=h,this.defaultLayout=l,this.registry={};let C=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(D){return C(D)},this.configGetSourceVariant=function(D){C=D.bind(this)}}getSpan(d,l){if(0<=this.span)return this.span;l===void 0&&(l=0);const a=this.getVariant(d,l);if(!a)throw new Error("unable to determine span for unrecognized variant");return a.getSpan(d,l)}defaultGetSourceVariant(d){if(d.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&d.hasOwnProperty(this.defaultLayout.property))return;const l=this.registry[d[this.discriminator.property]];if(l&&(!l.layout||d.hasOwnProperty(l.property)))return l}else for(const l in this.registry){const a=this.registry[l];if(d.hasOwnProperty(a.property))return a}throw new Error("unable to infer src variant")}decode(d,l){l===void 0&&(l=0);let a;const h=this.discriminator,E=h.decode(d,l);let C=this.registry[E];if(C===void 0){let D=0;C=this.defaultLayout,this.usesPrefixDiscriminator&&(D=h.layout.span),a=this.makeDestinationObject(),a[h.property]=E,a[C.property]=this.defaultLayout.decode(d,l+D)}else a=C.decode(d,l);return a}encode(d,l,a){a===void 0&&(a=0);const h=this.getSourceVariant(d);if(h===void 0){const E=this.discriminator,C=this.defaultLayout;let D=0;return this.usesPrefixDiscriminator&&(D=E.layout.span),E.encode(d[E.property],l,a),D+C.encode(d[C.property],l,a+D)}return h.encode(d,l,a)}addVariant(d,l,a){const h=new z(this,d,l,a);return this.registry[d]=h,h}getVariant(d,l){let a=d;return ye.isBuffer(d)&&(l===void 0&&(l=0),a=this.discriminator.decode(d,l)),this.registry[a]}}class z extends r{constructor(d,l,a,h){if(!(d instanceof $))throw new TypeError("union must be a Union");if(!Number.isInteger(l)||0>l)throw new TypeError("variant must be a (non-negative) integer");if(typeof a=="string"&&h===void 0&&(h=a,a=null),a){if(!(a instanceof r))throw new TypeError("layout must be a Layout");if(d.defaultLayout!==null&&0<=a.span&&a.span>d.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof h!="string")throw new TypeError("variant must have a String property")}let E=d.span;0>d.span&&(E=a?a.span:0,0<=E&&d.usesPrefixDiscriminator&&(E+=d.discriminator.layout.span)),super(E,h),this.union=d,this.variant=l,this.layout=a||null}getSpan(d,l){if(0<=this.span)return this.span;l===void 0&&(l=0);let a=0;return this.union.usesPrefixDiscriminator&&(a=this.union.discriminator.layout.span),a+this.layout.getSpan(d,l+a)}decode(d,l){const a=this.makeDestinationObject();if(l===void 0&&(l=0),this!==this.union.getVariant(d,l))throw new Error("variant mismatch");let h=0;return this.union.usesPrefixDiscriminator&&(h=this.union.discriminator.layout.span),this.layout?a[this.property]=this.layout.decode(d,l+h):this.property?a[this.property]=!0:this.union.usesPrefixDiscriminator&&(a[this.union.discriminator.property]=this.variant),a}encode(d,l,a){a===void 0&&(a=0);let h=0;if(this.union.usesPrefixDiscriminator&&(h=this.union.discriminator.layout.span),this.layout&&!d.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,l,a);let E=h;if(this.layout&&(this.layout.encode(d[this.property],l,a+h),E+=this.layout.getSpan(l,a+h),0<=this.union.span&&E>this.union.span))throw new Error("encoded variant overruns containing union");return E}fromArray(d){if(this.layout)return this.layout.fromArray(d)}}function H(_){return 0>_&&(_+=4294967296),_}class P extends r{constructor(d,l,a){if(!(d instanceof o||d instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof l=="string"&&a===void 0&&(a=l,l=void 0),4<d.span)throw new RangeError("word cannot exceed 32 bits");super(d.span,a),this.word=d,this.msb=!!l,this.fields=[];let h=0;this._packedSetValue=function(E){return h=H(E),this},this._packedGetValue=function(){return h}}decode(d,l){const a=this.makeDestinationObject();l===void 0&&(l=0);const h=this.word.decode(d,l);this._packedSetValue(h);for(const E of this.fields)E.property!==void 0&&(a[E.property]=E.decode(h));return a}encode(d,l,a){a===void 0&&(a=0);const h=this.word.decode(l,a);this._packedSetValue(h);for(const E of this.fields)if(E.property!==void 0){const C=d[E.property];C!==void 0&&E.encode(C)}return this.word.encode(this._packedGetValue(),l,a)}addField(d,l){const a=new A(this,d,l);return this.fields.push(a),a}addBoolean(d){const l=new c(this,d);return this.fields.push(l),l}fieldFor(d){if(typeof d!="string")throw new TypeError("property must be string");for(const l of this.fields)if(l.property===d)return l}}class A{constructor(d,l,a){if(!(d instanceof P))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(l)||0>=l)throw new TypeError("bits must be positive integer");const h=8*d.span,E=d.fields.reduce((C,D)=>C+D.bits,0);if(l+E>h)throw new Error("bits too long for span remainder ("+(h-E)+" of "+h+" remain)");this.container=d,this.bits=l,this.valueMask=(1<<l)-1,l===32&&(this.valueMask=4294967295),this.start=E,this.container.msb&&(this.start=h-E-l),this.wordMask=H(this.valueMask<<this.start),this.property=a}decode(){const d=this.container._packedGetValue();return H(d&this.wordMask)>>>this.start}encode(d){if(!Number.isInteger(d)||d!==H(d&this.valueMask))throw new TypeError(e("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const l=this.container._packedGetValue(),a=H(d<<this.start);this.container._packedSetValue(H(l&~this.wordMask)|a)}}class c extends A{constructor(d,l){super(d,1,l)}decode(d,l){return!!A.prototype.decode.call(this,d,l)}encode(d){return typeof d=="boolean"&&(d=+d),A.prototype.encode.call(this,d)}}class p extends r{constructor(d,l){if(!(d instanceof n&&d.isCount()||Number.isInteger(d)&&0<=d))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let a=-1;d instanceof n||(a=d),super(a,l),this.length=d}getSpan(d,l){let a=this.span;return 0>a&&(a=this.length.decode(d,l)),a}decode(d,l){l===void 0&&(l=0);let a=this.span;return 0>a&&(a=this.length.decode(d,l)),d.slice(l,l+a)}encode(d,l,a){let h=this.length;if(this.length instanceof n&&(h=d.length),!(ye.isBuffer(d)&&h===d.length))throw new TypeError(e("Blob.encode",this)+" requires (length "+h+") Buffer as src");if(a+h>l.length)throw new RangeError("encoding overruns Buffer");return l.write(d.toString("hex"),a,h,"hex"),this.length instanceof n&&this.length.encode(h,l,a),h}}class b extends r{constructor(d){super(-1,d)}getSpan(d,l){if(!ye.isBuffer(d))throw new TypeError("b must be a Buffer");l===void 0&&(l=0);let a=l;for(;a<d.length&&d[a]!==0;)a+=1;return 1+a-l}decode(d,l,a){l===void 0&&(l=0);let h=this.getSpan(d,l);return d.slice(l,l+h-1).toString("utf-8")}encode(d,l,a){a===void 0&&(a=0),typeof d!="string"&&(d=d.toString());const h=new ye(d,"utf8"),E=h.length;if(a+E>l.length)throw new RangeError("encoding overruns Buffer");return h.copy(l,a),l[a+E]=0,E+1}}class v extends r{constructor(d,l){if(typeof d=="string"&&l===void 0&&(l=d,d=void 0),d===void 0)d=-1;else if(!Number.isInteger(d))throw new TypeError("maxSpan must be an integer");super(-1,l),this.maxSpan=d}getSpan(d,l){if(!ye.isBuffer(d))throw new TypeError("b must be a Buffer");return l===void 0&&(l=0),d.length-l}decode(d,l,a){l===void 0&&(l=0);let h=this.getSpan(d,l);if(0<=this.maxSpan&&this.maxSpan<h)throw new RangeError("text length exceeds maxSpan");return d.slice(l,l+h).toString("utf-8")}encode(d,l,a){a===void 0&&(a=0),typeof d!="string"&&(d=d.toString());const h=new ye(d,"utf8"),E=h.length;if(0<=this.maxSpan&&this.maxSpan<E)throw new RangeError("text length exceeds maxSpan");if(a+E>l.length)throw new RangeError("encoding overruns Buffer");return h.copy(l,a),E}}class k extends r{constructor(d,l){super(0,l),this.value=d}decode(d,l,a){return this.value}encode(d,l,a){return 0}}return de.ExternalLayout=n,de.GreedyCount=s,de.OffsetLayout=i,de.UInt=o,de.UIntBE=u,de.Int=f,de.IntBE=y,de.Float=L,de.FloatBE=F,de.Double=M,de.DoubleBE=q,de.Sequence=G,de.Structure=te,de.UnionDiscriminator=X,de.UnionLayoutDiscriminator=ee,de.Union=$,de.VariantLayout=z,de.BitStructure=P,de.BitField=A,de.Boolean=c,de.Blob=p,de.CString=b,de.UTF8=v,de.Constant=k,de.greedy=(_,d)=>new s(_,d),de.offset=(_,d,l)=>new i(_,d,l),de.u8=_=>new o(1,_),de.u16=_=>new o(2,_),de.u24=_=>new o(3,_),de.u32=_=>new o(4,_),de.u40=_=>new o(5,_),de.u48=_=>new o(6,_),de.nu64=_=>new R(_),de.u16be=_=>new u(2,_),de.u24be=_=>new u(3,_),de.u32be=_=>new u(4,_),de.u40be=_=>new u(5,_),de.u48be=_=>new u(6,_),de.nu64be=_=>new T(_),de.s8=_=>new f(1,_),de.s16=_=>new f(2,_),de.s24=_=>new f(3,_),de.s32=_=>new f(4,_),de.s40=_=>new f(5,_),de.s48=_=>new f(6,_),de.ns64=_=>new x(_),de.s16be=_=>new y(2,_),de.s24be=_=>new y(3,_),de.s32be=_=>new y(4,_),de.s40be=_=>new y(5,_),de.s48be=_=>new y(6,_),de.ns64be=_=>new O(_),de.f32=_=>new L(_),de.f32be=_=>new F(_),de.f64=_=>new M(_),de.f64be=_=>new q(_),de.struct=(_,d,l)=>new te(_,d,l),de.bits=(_,d,l)=>new P(_,d,l),de.seq=(_,d,l)=>new G(_,d,l),de.union=(_,d,l)=>new $(_,d,l),de.unionLayoutDiscriminator=(_,d)=>new ee(_,d),de.blob=(_,d)=>new p(_,d),de.cstr=_=>new b(_),de.utf8=(_,d)=>new v(_,d),de.const=(_,d)=>new k(_,d),de}const Td=pa(Mm);var du;function Hm(){return du||(du=1,function(r){var e=Gr&&Gr.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(r,"__esModule",{value:!0}),r.map=r.array=r.rustEnum=r.str=r.vecU8=r.tagged=r.vec=r.bool=r.option=r.publicKey=r.i256=r.u256=r.i128=r.u128=r.i64=r.u64=r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0;const t=lu(),n=Td,s=e(Aa());var i=lu();Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return i.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return i.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return i.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return i.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return i.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return i.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return i.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return i.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return i.struct}});class o extends t.Layout{constructor(A,c,p){super(A,p),this.blob=(0,t.blob)(A),this.signed=c}decode(A,c=0){const p=new s.default(this.blob.decode(A,c),10,"le");return this.signed?p.fromTwos(this.span*8).clone():p}encode(A,c,p=0){return this.signed&&(A=A.toTwos(this.span*8)),this.blob.encode(A.toArrayLike(ye,"le",this.span),c,p)}}function u(P){return new o(8,!1,P)}r.u64=u;function f(P){return new o(8,!0,P)}r.i64=f;function y(P){return new o(16,!1,P)}r.u128=y;function g(P){return new o(16,!0,P)}r.i128=g;function S(P){return new o(32,!1,P)}r.u256=S;function I(P){return new o(32,!0,P)}r.i256=I;class R extends t.Layout{constructor(A,c,p,b){super(A.span,b),this.layout=A,this.decoder=c,this.encoder=p}decode(A,c){return this.decoder(this.layout.decode(A,c))}encode(A,c,p){return this.layout.encode(this.encoder(A),c,p)}getSpan(A,c){return this.layout.getSpan(A,c)}}function T(P){return new R((0,t.blob)(32),A=>new n.PublicKey(A),A=>A.toBuffer(),P)}r.publicKey=T;class x extends t.Layout{constructor(A,c){super(-1,c),this.layout=A,this.discriminator=(0,t.u8)()}encode(A,c,p=0){return A==null?this.discriminator.encode(0,c,p):(this.discriminator.encode(1,c,p),this.layout.encode(A,c,p+1)+1)}decode(A,c=0){const p=this.discriminator.decode(A,c);if(p===0)return null;if(p===1)return this.layout.decode(A,c+1);throw new Error("Invalid option "+this.property)}getSpan(A,c=0){const p=this.discriminator.decode(A,c);if(p===0)return 1;if(p===1)return this.layout.getSpan(A,c+1)+1;throw new Error("Invalid option "+this.property)}}function O(P,A){return new x(P,A)}r.option=O;function L(P){return new R((0,t.u8)(),F,M,P)}r.bool=L;function F(P){if(P===0)return!1;if(P===1)return!0;throw new Error("Invalid bool: "+P)}function M(P){return P?1:0}function q(P,A){const c=(0,t.u32)("length"),p=(0,t.struct)([c,(0,t.seq)(P,(0,t.offset)(c,-c.span),"values")]);return new R(p,({values:b})=>b,b=>({values:b}),A)}r.vec=q;function G(P,A,c){const p=(0,t.struct)([u("tag"),A.replicate("data")]);function b({tag:v,data:k}){if(!v.eq(P))throw new Error("Invalid tag, expected: "+P.toString("hex")+", got: "+v.toString("hex"));return k}return new R(p,b,v=>({tag:P,data:v}),c)}r.tagged=G;function te(P){const A=(0,t.u32)("length"),c=(0,t.struct)([A,(0,t.blob)((0,t.offset)(A,-A.span),"data")]);return new R(c,({data:p})=>p,p=>({data:p}),P)}r.vecU8=te;function X(P){return new R(te(),A=>A.toString("utf-8"),A=>ye.from(A,"utf-8"),P)}r.str=X;function ee(P,A,c){const p=(0,t.union)(c??(0,t.u8)(),A);return P.forEach((b,v)=>p.addVariant(v,b,b.property)),p}r.rustEnum=ee;function $(P,A,c){const p=(0,t.struct)([(0,t.seq)(P,A,"values")]);return new R(p,({values:b})=>b,b=>({values:b}),c)}r.array=$;class z extends t.Layout{constructor(A,c,p){super(A.span+c.span,p),this.keyLayout=A,this.valueLayout=c}decode(A,c){c=c||0;const p=this.keyLayout.decode(A,c),b=this.valueLayout.decode(A,c+this.keyLayout.getSpan(A,c));return[p,b]}encode(A,c,p){p=p||0;const b=this.keyLayout.encode(A[0],c,p),v=this.valueLayout.encode(A[1],c,p+b);return b+v}getSpan(A,c){return this.keyLayout.getSpan(A,c)+this.valueLayout.getSpan(A,c)}}function H(P,A,c){const p=(0,t.u32)("length"),b=(0,t.struct)([p,(0,t.seq)(new z(P,A),(0,t.offset)(p,-p.span),"values")]);return new R(b,({values:v})=>new Map(v),v=>({values:Array.from(v.entries())}),c)}r.map=H}(Gr)),Gr}var be=Hm();function Fr(r){let e=r.length;for(;--e>=0;)r[e]=0}const Fm=3,zm=258,Nd=29,$m=256,Km=$m+1+Nd,kd=30,qm=512,Vm=new Array((Km+2)*2);Fr(Vm);const Gm=new Array(kd*2);Fr(Gm);const Wm=new Array(qm);Fr(Wm);const jm=new Array(zm-Fm+1);Fr(jm);const Ym=new Array(Nd);Fr(Ym);const Zm=new Array(kd);Fr(Zm);const Xm=(r,e,t,n)=>{let s=r&65535|0,i=r>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do s=s+e[n++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0};var sa=Xm;const Jm=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},Qm=new Uint32Array(Jm()),e_=(r,e,t,n)=>{const s=Qm,i=n+t;r^=-1;for(let o=n;o<i;o++)r=r>>>8^s[(r^e[o])&255];return r^-1};var nn=e_,oa={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},xd={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const t_=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var n_=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)t_(t,n)&&(r[n]=t[n])}}return r},r_=r=>{let e=0;for(let n=0,s=r.length;n<s;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,s=0,i=r.length;n<i;n++){let o=r[n];t.set(o,s),s+=o.length}return t},Cd={assign:n_,flattenChunks:r_};let Bd=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Bd=!1}const ri=new Uint8Array(256);for(let r=0;r<256;r++)ri[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;ri[254]=ri[254]=1;var i_=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,s,i,o=r.length,u=0;for(s=0;s<o;s++)t=r.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=r.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),u+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(u),i=0,s=0;i<u;s++)t=r.charCodeAt(s),(t&64512)===55296&&s+1<o&&(n=r.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?e[i++]=t:t<2048?(e[i++]=192|t>>>6,e[i++]=128|t&63):t<65536?(e[i++]=224|t>>>12,e[i++]=128|t>>>6&63,e[i++]=128|t&63):(e[i++]=240|t>>>18,e[i++]=128|t>>>12&63,e[i++]=128|t>>>6&63,e[i++]=128|t&63);return e};const s_=(r,e)=>{if(e<65534&&r.subarray&&Bd)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var o_=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,s;const i=new Array(t*2);for(s=0,n=0;n<t;){let o=r[n++];if(o<128){i[s++]=o;continue}let u=ri[o];if(u>4){i[s++]=65533,n+=u-1;continue}for(o&=u===2?31:u===3?15:7;u>1&&n<t;)o=o<<6|r[n++]&63,u--;if(u>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return s_(i,s)},a_=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+ri[r[t]]>e?t:e},aa={string2buf:i_,buf2string:o_,utf8border:a_};function c_(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var u_=c_;const Ci=16209,l_=16191;var d_=function(e,t){let n,s,i,o,u,f,y,g,S,I,R,T,x,O,L,F,M,q,G,te,X,ee,$,z;const H=e.state;n=e.next_in,$=e.input,s=n+(e.avail_in-5),i=e.next_out,z=e.output,o=i-(t-e.avail_out),u=i+(e.avail_out-257),f=H.dmax,y=H.wsize,g=H.whave,S=H.wnext,I=H.window,R=H.hold,T=H.bits,x=H.lencode,O=H.distcode,L=(1<<H.lenbits)-1,F=(1<<H.distbits)-1;e:do{T<15&&(R+=$[n++]<<T,T+=8,R+=$[n++]<<T,T+=8),M=x[R&L];t:for(;;){if(q=M>>>24,R>>>=q,T-=q,q=M>>>16&255,q===0)z[i++]=M&65535;else if(q&16){G=M&65535,q&=15,q&&(T<q&&(R+=$[n++]<<T,T+=8),G+=R&(1<<q)-1,R>>>=q,T-=q),T<15&&(R+=$[n++]<<T,T+=8,R+=$[n++]<<T,T+=8),M=O[R&F];n:for(;;){if(q=M>>>24,R>>>=q,T-=q,q=M>>>16&255,q&16){if(te=M&65535,q&=15,T<q&&(R+=$[n++]<<T,T+=8,T<q&&(R+=$[n++]<<T,T+=8)),te+=R&(1<<q)-1,te>f){e.msg="invalid distance too far back",H.mode=Ci;break e}if(R>>>=q,T-=q,q=i-o,te>q){if(q=te-q,q>g&&H.sane){e.msg="invalid distance too far back",H.mode=Ci;break e}if(X=0,ee=I,S===0){if(X+=y-q,q<G){G-=q;do z[i++]=I[X++];while(--q);X=i-te,ee=z}}else if(S<q){if(X+=y+S-q,q-=S,q<G){G-=q;do z[i++]=I[X++];while(--q);if(X=0,S<G){q=S,G-=q;do z[i++]=I[X++];while(--q);X=i-te,ee=z}}}else if(X+=S-q,q<G){G-=q;do z[i++]=I[X++];while(--q);X=i-te,ee=z}for(;G>2;)z[i++]=ee[X++],z[i++]=ee[X++],z[i++]=ee[X++],G-=3;G&&(z[i++]=ee[X++],G>1&&(z[i++]=ee[X++]))}else{X=i-te;do z[i++]=z[X++],z[i++]=z[X++],z[i++]=z[X++],G-=3;while(G>2);G&&(z[i++]=z[X++],G>1&&(z[i++]=z[X++]))}}else if((q&64)===0){M=O[(M&65535)+(R&(1<<q)-1)];continue n}else{e.msg="invalid distance code",H.mode=Ci;break e}break}}else if((q&64)===0){M=x[(M&65535)+(R&(1<<q)-1)];continue t}else if(q&32){H.mode=l_;break e}else{e.msg="invalid literal/length code",H.mode=Ci;break e}break}}while(n<s&&i<u);G=T>>3,n-=G,T-=G<<3,R&=(1<<T)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<u?257+(u-i):257-(i-u),H.hold=R,H.bits=T};const fr=15,hu=852,fu=592,pu=0,No=1,yu=2,h_=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),f_=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),p_=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),y_=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),g_=(r,e,t,n,s,i,o,u)=>{const f=u.bits;let y=0,g=0,S=0,I=0,R=0,T=0,x=0,O=0,L=0,F=0,M,q,G,te,X,ee=null,$;const z=new Uint16Array(fr+1),H=new Uint16Array(fr+1);let P=null,A,c,p;for(y=0;y<=fr;y++)z[y]=0;for(g=0;g<n;g++)z[e[t+g]]++;for(R=f,I=fr;I>=1&&z[I]===0;I--);if(R>I&&(R=I),I===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,u.bits=1,0;for(S=1;S<I&&z[S]===0;S++);for(R<S&&(R=S),O=1,y=1;y<=fr;y++)if(O<<=1,O-=z[y],O<0)return-1;if(O>0&&(r===pu||I!==1))return-1;for(H[1]=0,y=1;y<fr;y++)H[y+1]=H[y]+z[y];for(g=0;g<n;g++)e[t+g]!==0&&(o[H[e[t+g]]++]=g);if(r===pu?(ee=P=o,$=20):r===No?(ee=h_,P=f_,$=257):(ee=p_,P=y_,$=0),F=0,g=0,y=S,X=i,T=R,x=0,G=-1,L=1<<R,te=L-1,r===No&&L>hu||r===yu&&L>fu)return 1;for(;;){A=y-x,o[g]+1<$?(c=0,p=o[g]):o[g]>=$?(c=P[o[g]-$],p=ee[o[g]-$]):(c=96,p=0),M=1<<y-x,q=1<<T,S=q;do q-=M,s[X+(F>>x)+q]=A<<24|c<<16|p|0;while(q!==0);for(M=1<<y-1;F&M;)M>>=1;if(M!==0?(F&=M-1,F+=M):F=0,g++,--z[y]===0){if(y===I)break;y=e[t+o[g]]}if(y>R&&(F&te)!==G){for(x===0&&(x=R),X+=S,T=y-x,O=1<<T;T+x<I&&(O-=z[T+x],!(O<=0));)T++,O<<=1;if(L+=1<<T,r===No&&L>hu||r===yu&&L>fu)return 1;G=F&te,s[G]=R<<24|T<<16|X-i|0}}return F!==0&&(s[X+F]=y-x<<24|64<<16|0),u.bits=R,0};var Zr=g_;const m_=0,Ld=1,Md=2,{Z_FINISH:gu,Z_BLOCK:__,Z_TREES:Bi,Z_OK:sr,Z_STREAM_END:w_,Z_NEED_DICT:b_,Z_STREAM_ERROR:Yt,Z_DATA_ERROR:Pd,Z_MEM_ERROR:Ud,Z_BUF_ERROR:R_,Z_DEFLATED:mu}=xd,Ts=16180,_u=16181,wu=16182,bu=16183,Ru=16184,Eu=16185,Au=16186,vu=16187,Iu=16188,Ou=16189,rs=16190,fn=16191,ko=16192,Su=16193,xo=16194,Tu=16195,Nu=16196,ku=16197,xu=16198,Li=16199,Mi=16200,Cu=16201,Bu=16202,Lu=16203,Mu=16204,Pu=16205,Co=16206,Uu=16207,Du=16208,je=16209,Dd=16210,Hd=16211,E_=852,A_=592,v_=15,I_=v_,Hu=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function O_(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ur=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Ts||e.mode>Hd?1:0},Fd=r=>{if(ur(r))return Yt;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Ts,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(E_),e.distcode=e.distdyn=new Int32Array(A_),e.sane=1,e.back=-1,sr},zd=r=>{if(ur(r))return Yt;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Fd(r)},$d=(r,e)=>{let t;if(ur(r))return Yt;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Yt:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,zd(r))},Kd=(r,e)=>{if(!r)return Yt;const t=new O_;r.state=t,t.strm=r,t.window=null,t.mode=Ts;const n=$d(r,e);return n!==sr&&(r.state=null),n},S_=r=>Kd(r,I_);let Fu=!0,Bo,Lo;const T_=r=>{if(Fu){Bo=new Int32Array(512),Lo=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Zr(Ld,r.lens,0,288,Bo,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Zr(Md,r.lens,0,32,Lo,0,r.work,{bits:5}),Fu=!1}r.lencode=Bo,r.lenbits=9,r.distcode=Lo,r.distbits=5},qd=(r,e,t,n)=>{let s;const i=r.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(t-i.wsize,t),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(t-n,t-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(t-n,t),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},N_=(r,e)=>{let t,n,s,i,o,u,f,y,g,S,I,R,T,x,O=0,L,F,M,q,G,te,X,ee;const $=new Uint8Array(4);let z,H;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ur(r)||!r.output||!r.input&&r.avail_in!==0)return Yt;t=r.state,t.mode===fn&&(t.mode=ko),o=r.next_out,s=r.output,f=r.avail_out,i=r.next_in,n=r.input,u=r.avail_in,y=t.hold,g=t.bits,S=u,I=f,ee=sr;e:for(;;)switch(t.mode){case Ts:if(t.wrap===0){t.mode=ko;break}for(;g<16;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}if(t.wrap&2&&y===35615){t.wbits===0&&(t.wbits=15),t.check=0,$[0]=y&255,$[1]=y>>>8&255,t.check=nn(t.check,$,2,0),y=0,g=0,t.mode=_u;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((y&255)<<8)+(y>>8))%31){r.msg="incorrect header check",t.mode=je;break}if((y&15)!==mu){r.msg="unknown compression method",t.mode=je;break}if(y>>>=4,g-=4,X=(y&15)+8,t.wbits===0&&(t.wbits=X),X>15||X>t.wbits){r.msg="invalid window size",t.mode=je;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=y&512?Ou:fn,y=0,g=0;break;case _u:for(;g<16;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}if(t.flags=y,(t.flags&255)!==mu){r.msg="unknown compression method",t.mode=je;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=je;break}t.head&&(t.head.text=y>>8&1),t.flags&512&&t.wrap&4&&($[0]=y&255,$[1]=y>>>8&255,t.check=nn(t.check,$,2,0)),y=0,g=0,t.mode=wu;case wu:for(;g<32;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}t.head&&(t.head.time=y),t.flags&512&&t.wrap&4&&($[0]=y&255,$[1]=y>>>8&255,$[2]=y>>>16&255,$[3]=y>>>24&255,t.check=nn(t.check,$,4,0)),y=0,g=0,t.mode=bu;case bu:for(;g<16;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}t.head&&(t.head.xflags=y&255,t.head.os=y>>8),t.flags&512&&t.wrap&4&&($[0]=y&255,$[1]=y>>>8&255,t.check=nn(t.check,$,2,0)),y=0,g=0,t.mode=Ru;case Ru:if(t.flags&1024){for(;g<16;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}t.length=y,t.head&&(t.head.extra_len=y),t.flags&512&&t.wrap&4&&($[0]=y&255,$[1]=y>>>8&255,t.check=nn(t.check,$,2,0)),y=0,g=0}else t.head&&(t.head.extra=null);t.mode=Eu;case Eu:if(t.flags&1024&&(R=t.length,R>u&&(R=u),R&&(t.head&&(X=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(i,i+R),X)),t.flags&512&&t.wrap&4&&(t.check=nn(t.check,n,R,i)),u-=R,i+=R,t.length-=R),t.length))break e;t.length=0,t.mode=Au;case Au:if(t.flags&2048){if(u===0)break e;R=0;do X=n[i+R++],t.head&&X&&t.length<65536&&(t.head.name+=String.fromCharCode(X));while(X&&R<u);if(t.flags&512&&t.wrap&4&&(t.check=nn(t.check,n,R,i)),u-=R,i+=R,X)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=vu;case vu:if(t.flags&4096){if(u===0)break e;R=0;do X=n[i+R++],t.head&&X&&t.length<65536&&(t.head.comment+=String.fromCharCode(X));while(X&&R<u);if(t.flags&512&&t.wrap&4&&(t.check=nn(t.check,n,R,i)),u-=R,i+=R,X)break e}else t.head&&(t.head.comment=null);t.mode=Iu;case Iu:if(t.flags&512){for(;g<16;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}if(t.wrap&4&&y!==(t.check&65535)){r.msg="header crc mismatch",t.mode=je;break}y=0,g=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=fn;break;case Ou:for(;g<32;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}r.adler=t.check=Hu(y),y=0,g=0,t.mode=rs;case rs:if(t.havedict===0)return r.next_out=o,r.avail_out=f,r.next_in=i,r.avail_in=u,t.hold=y,t.bits=g,b_;r.adler=t.check=1,t.mode=fn;case fn:if(e===__||e===Bi)break e;case ko:if(t.last){y>>>=g&7,g-=g&7,t.mode=Co;break}for(;g<3;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}switch(t.last=y&1,y>>>=1,g-=1,y&3){case 0:t.mode=Su;break;case 1:if(T_(t),t.mode=Li,e===Bi){y>>>=2,g-=2;break e}break;case 2:t.mode=Nu;break;case 3:r.msg="invalid block type",t.mode=je}y>>>=2,g-=2;break;case Su:for(y>>>=g&7,g-=g&7;g<32;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}if((y&65535)!==(y>>>16^65535)){r.msg="invalid stored block lengths",t.mode=je;break}if(t.length=y&65535,y=0,g=0,t.mode=xo,e===Bi)break e;case xo:t.mode=Tu;case Tu:if(R=t.length,R){if(R>u&&(R=u),R>f&&(R=f),R===0)break e;s.set(n.subarray(i,i+R),o),u-=R,i+=R,f-=R,o+=R,t.length-=R;break}t.mode=fn;break;case Nu:for(;g<14;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}if(t.nlen=(y&31)+257,y>>>=5,g-=5,t.ndist=(y&31)+1,y>>>=5,g-=5,t.ncode=(y&15)+4,y>>>=4,g-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=je;break}t.have=0,t.mode=ku;case ku:for(;t.have<t.ncode;){for(;g<3;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}t.lens[P[t.have++]]=y&7,y>>>=3,g-=3}for(;t.have<19;)t.lens[P[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,z={bits:t.lenbits},ee=Zr(m_,t.lens,0,19,t.lencode,0,t.work,z),t.lenbits=z.bits,ee){r.msg="invalid code lengths set",t.mode=je;break}t.have=0,t.mode=xu;case xu:for(;t.have<t.nlen+t.ndist;){for(;O=t.lencode[y&(1<<t.lenbits)-1],L=O>>>24,F=O>>>16&255,M=O&65535,!(L<=g);){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}if(M<16)y>>>=L,g-=L,t.lens[t.have++]=M;else{if(M===16){for(H=L+2;g<H;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}if(y>>>=L,g-=L,t.have===0){r.msg="invalid bit length repeat",t.mode=je;break}X=t.lens[t.have-1],R=3+(y&3),y>>>=2,g-=2}else if(M===17){for(H=L+3;g<H;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}y>>>=L,g-=L,X=0,R=3+(y&7),y>>>=3,g-=3}else{for(H=L+7;g<H;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}y>>>=L,g-=L,X=0,R=11+(y&127),y>>>=7,g-=7}if(t.have+R>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=je;break}for(;R--;)t.lens[t.have++]=X}}if(t.mode===je)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=je;break}if(t.lenbits=9,z={bits:t.lenbits},ee=Zr(Ld,t.lens,0,t.nlen,t.lencode,0,t.work,z),t.lenbits=z.bits,ee){r.msg="invalid literal/lengths set",t.mode=je;break}if(t.distbits=6,t.distcode=t.distdyn,z={bits:t.distbits},ee=Zr(Md,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,z),t.distbits=z.bits,ee){r.msg="invalid distances set",t.mode=je;break}if(t.mode=Li,e===Bi)break e;case Li:t.mode=Mi;case Mi:if(u>=6&&f>=258){r.next_out=o,r.avail_out=f,r.next_in=i,r.avail_in=u,t.hold=y,t.bits=g,d_(r,I),o=r.next_out,s=r.output,f=r.avail_out,i=r.next_in,n=r.input,u=r.avail_in,y=t.hold,g=t.bits,t.mode===fn&&(t.back=-1);break}for(t.back=0;O=t.lencode[y&(1<<t.lenbits)-1],L=O>>>24,F=O>>>16&255,M=O&65535,!(L<=g);){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}if(F&&(F&240)===0){for(q=L,G=F,te=M;O=t.lencode[te+((y&(1<<q+G)-1)>>q)],L=O>>>24,F=O>>>16&255,M=O&65535,!(q+L<=g);){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}y>>>=q,g-=q,t.back+=q}if(y>>>=L,g-=L,t.back+=L,t.length=M,F===0){t.mode=Pu;break}if(F&32){t.back=-1,t.mode=fn;break}if(F&64){r.msg="invalid literal/length code",t.mode=je;break}t.extra=F&15,t.mode=Cu;case Cu:if(t.extra){for(H=t.extra;g<H;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}t.length+=y&(1<<t.extra)-1,y>>>=t.extra,g-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Bu;case Bu:for(;O=t.distcode[y&(1<<t.distbits)-1],L=O>>>24,F=O>>>16&255,M=O&65535,!(L<=g);){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}if((F&240)===0){for(q=L,G=F,te=M;O=t.distcode[te+((y&(1<<q+G)-1)>>q)],L=O>>>24,F=O>>>16&255,M=O&65535,!(q+L<=g);){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}y>>>=q,g-=q,t.back+=q}if(y>>>=L,g-=L,t.back+=L,F&64){r.msg="invalid distance code",t.mode=je;break}t.offset=M,t.extra=F&15,t.mode=Lu;case Lu:if(t.extra){for(H=t.extra;g<H;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}t.offset+=y&(1<<t.extra)-1,y>>>=t.extra,g-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=je;break}t.mode=Mu;case Mu:if(f===0)break e;if(R=I-f,t.offset>R){if(R=t.offset-R,R>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=je;break}R>t.wnext?(R-=t.wnext,T=t.wsize-R):T=t.wnext-R,R>t.length&&(R=t.length),x=t.window}else x=s,T=o-t.offset,R=t.length;R>f&&(R=f),f-=R,t.length-=R;do s[o++]=x[T++];while(--R);t.length===0&&(t.mode=Mi);break;case Pu:if(f===0)break e;s[o++]=t.length,f--,t.mode=Mi;break;case Co:if(t.wrap){for(;g<32;){if(u===0)break e;u--,y|=n[i++]<<g,g+=8}if(I-=f,r.total_out+=I,t.total+=I,t.wrap&4&&I&&(r.adler=t.check=t.flags?nn(t.check,s,I,o-I):sa(t.check,s,I,o-I)),I=f,t.wrap&4&&(t.flags?y:Hu(y))!==t.check){r.msg="incorrect data check",t.mode=je;break}y=0,g=0}t.mode=Uu;case Uu:if(t.wrap&&t.flags){for(;g<32;){if(u===0)break e;u--,y+=n[i++]<<g,g+=8}if(t.wrap&4&&y!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=je;break}y=0,g=0}t.mode=Du;case Du:ee=w_;break e;case je:ee=Pd;break e;case Dd:return Ud;case Hd:default:return Yt}return r.next_out=o,r.avail_out=f,r.next_in=i,r.avail_in=u,t.hold=y,t.bits=g,(t.wsize||I!==r.avail_out&&t.mode<je&&(t.mode<Co||e!==gu))&&qd(r,r.output,r.next_out,I-r.avail_out),S-=r.avail_in,I-=r.avail_out,r.total_in+=S,r.total_out+=I,t.total+=I,t.wrap&4&&I&&(r.adler=t.check=t.flags?nn(t.check,s,I,r.next_out-I):sa(t.check,s,I,r.next_out-I)),r.data_type=t.bits+(t.last?64:0)+(t.mode===fn?128:0)+(t.mode===Li||t.mode===xo?256:0),(S===0&&I===0||e===gu)&&ee===sr&&(ee=R_),ee},k_=r=>{if(ur(r))return Yt;let e=r.state;return e.window&&(e.window=null),r.state=null,sr},x_=(r,e)=>{if(ur(r))return Yt;const t=r.state;return(t.wrap&2)===0?Yt:(t.head=e,e.done=!1,sr)},C_=(r,e)=>{const t=e.length;let n,s,i;return ur(r)||(n=r.state,n.wrap!==0&&n.mode!==rs)?Yt:n.mode===rs&&(s=1,s=sa(s,e,t,0),s!==n.check)?Pd:(i=qd(r,e,t,t),i?(n.mode=Dd,Ud):(n.havedict=1,sr))};var B_=zd,L_=$d,M_=Fd,P_=S_,U_=Kd,D_=N_,H_=k_,F_=x_,z_=C_,$_="pako inflate (from Nodeca project)",mn={inflateReset:B_,inflateReset2:L_,inflateResetKeep:M_,inflateInit:P_,inflateInit2:U_,inflate:D_,inflateEnd:H_,inflateGetHeader:F_,inflateSetDictionary:z_,inflateInfo:$_};function K_(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var q_=K_;const Vd=Object.prototype.toString,{Z_NO_FLUSH:V_,Z_FINISH:G_,Z_OK:ii,Z_STREAM_END:Mo,Z_NEED_DICT:Po,Z_STREAM_ERROR:W_,Z_DATA_ERROR:zu,Z_MEM_ERROR:j_}=xd;function Ns(r){this.options=Cd.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u_,this.strm.avail_out=0;let t=mn.inflateInit2(this.strm,e.windowBits);if(t!==ii)throw new Error(oa[t]);if(this.header=new q_,mn.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=aa.string2buf(e.dictionary):Vd.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=mn.inflateSetDictionary(this.strm,e.dictionary),t!==ii)))throw new Error(oa[t])}Ns.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let i,o,u;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?G_:V_,Vd.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),i=mn.inflate(t,o),i===Po&&s&&(i=mn.inflateSetDictionary(t,s),i===ii?i=mn.inflate(t,o):i===zu&&(i=Po));t.avail_in>0&&i===Mo&&t.state.wrap>0&&r[t.next_in]!==0;)mn.inflateReset(t),i=mn.inflate(t,o);switch(i){case W_:case zu:case Po:case j_:return this.onEnd(i),this.ended=!0,!1}if(u=t.avail_out,t.next_out&&(t.avail_out===0||i===Mo))if(this.options.to==="string"){let f=aa.utf8border(t.output,t.next_out),y=t.next_out-f,g=aa.buf2string(t.output,f);t.next_out=y,t.avail_out=n-y,y&&t.output.set(t.output.subarray(f,f+y),0),this.onData(g)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(i===ii&&u===0)){if(i===Mo)return i=mn.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Ns.prototype.onData=function(r){this.chunks.push(r)};Ns.prototype.onEnd=function(r){r===ii&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Cd.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function Y_(r,e){const t=new Ns(e);if(t.push(r),t.err)throw t.msg||oa[t.err];return t.result}var Z_=Y_,X_={inflate:Z_};const{inflate:J_}=X_;var Q_=J_,Uo={exports:{}},$u;function ew(){return $u||($u=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(f,y,g){this.fn=f,this.context=y,this.once=g||!1}function i(f,y,g,S,I){if(typeof g!="function")throw new TypeError("The listener must be a function");var R=new s(g,S||f,I),T=t?t+y:y;return f._events[T]?f._events[T].fn?f._events[T]=[f._events[T],R]:f._events[T].push(R):(f._events[T]=R,f._eventsCount++),f}function o(f,y){--f._eventsCount===0?f._events=new n:delete f._events[y]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var y=[],g,S;if(this._eventsCount===0)return y;for(S in g=this._events)e.call(g,S)&&y.push(t?S.slice(1):S);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(g)):y},u.prototype.listeners=function(y){var g=t?t+y:y,S=this._events[g];if(!S)return[];if(S.fn)return[S.fn];for(var I=0,R=S.length,T=new Array(R);I<R;I++)T[I]=S[I].fn;return T},u.prototype.listenerCount=function(y){var g=t?t+y:y,S=this._events[g];return S?S.fn?1:S.length:0},u.prototype.emit=function(y,g,S,I,R,T){var x=t?t+y:y;if(!this._events[x])return!1;var O=this._events[x],L=arguments.length,F,M;if(O.fn){switch(O.once&&this.removeListener(y,O.fn,void 0,!0),L){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,g),!0;case 3:return O.fn.call(O.context,g,S),!0;case 4:return O.fn.call(O.context,g,S,I),!0;case 5:return O.fn.call(O.context,g,S,I,R),!0;case 6:return O.fn.call(O.context,g,S,I,R,T),!0}for(M=1,F=new Array(L-1);M<L;M++)F[M-1]=arguments[M];O.fn.apply(O.context,F)}else{var q=O.length,G;for(M=0;M<q;M++)switch(O[M].once&&this.removeListener(y,O[M].fn,void 0,!0),L){case 1:O[M].fn.call(O[M].context);break;case 2:O[M].fn.call(O[M].context,g);break;case 3:O[M].fn.call(O[M].context,g,S);break;case 4:O[M].fn.call(O[M].context,g,S,I);break;default:if(!F)for(G=1,F=new Array(L-1);G<L;G++)F[G-1]=arguments[G];O[M].fn.apply(O[M].context,F)}}return!0},u.prototype.on=function(y,g,S){return i(this,y,g,S,!1)},u.prototype.once=function(y,g,S){return i(this,y,g,S,!0)},u.prototype.removeListener=function(y,g,S,I){var R=t?t+y:y;if(!this._events[R])return this;if(!g)return o(this,R),this;var T=this._events[R];if(T.fn)T.fn===g&&(!I||T.once)&&(!S||T.context===S)&&o(this,R);else{for(var x=0,O=[],L=T.length;x<L;x++)(T[x].fn!==g||I&&!T[x].once||S&&T[x].context!==S)&&O.push(T[x]);O.length?this._events[R]=O.length===1?O[0]:O:o(this,R)}return this},u.prototype.removeAllListeners=function(y){var g;return y?(g=t?t+y:y,this._events[g]&&o(this,g)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,r.exports=u}(Uo)),Uo.exports}var tw=ew();const nw=Br(tw);function rw(r,e){return Array.apply(0,new Array(Math.ceil(r.length/e))).map((t,n)=>r.slice(n*e,(n+1)*e))}const Kn=r=>"version"in r;function iw(r){return new TextDecoder("utf-8").decode(r)}function Ku(r){return et.encode(r)}function qu(r){return r.toString("base64")}function Gd(r){return fe.Buffer.from(r,"base64")}function gr(r){return"accounts"in r}async function sw(r){const e=(await ne.findProgramAddress([],r))[0];return await ne.createWithSeed(e,ow(),r)}function ow(){return"anchor:idl"}const aw=be.struct([be.publicKey("authority"),be.vecU8("data")]);function cw(r){return aw.decode(r)}function uw(r){const e=["name","path","account","relations","generic"],t=i=>i.split(".").map(Dm).join("."),n=i=>{for(const o in i){const u=i[o];e.includes(o)?i[o]=Array.isArray(u)?u.map(t):t(u):typeof u=="object"&&n(u)}},s=structuredClone(r);return n(s),s}function mr(r,e,t,n){return r!=null&&r.length?r[0].name?t(r):n(r):e()}function lw(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let s=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,s)}),e}function dw(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(s=>{t[s.name]=e[n],n+=1}),t}function Wd(r,e={}){r.forEach(t=>{if(gr(t))Wd(t.accounts,e[t.name]);else if(!e[t.name])throw new Error(`Account \`${t.name}\` not provided.`)})}function Jt(r){return r instanceof ne?r:new ne(r)}class hw extends TypeError{constructor(e,t){let n;const{message:s,...i}=e,{path:o}=e,u=o.length===0?s:"At path: "+o.join(".")+" -- "+s;super(u),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var f;return(f=n)!=null?f:n=[e,...t()]}}}function fw(r){return Ar(r)&&typeof r[Symbol.iterator]=="function"}function Ar(r){return typeof r=="object"&&r!=null}function Un(r){return typeof r=="string"?JSON.stringify(r):""+r}function pw(r){const{done:e,value:t}=r.next();return e?void 0:t}function yw(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=e,{type:o}=t,{refinement:u,message:f="Expected a value of type `"+o+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+Un(n)+"`"}=r;return{value:n,type:o,refinement:u,key:s[s.length-1],path:s,branch:i,...r,message:f}}function*Vu(r,e,t,n){fw(r)||(r=[r]);for(const s of r){const i=yw(s,e,t,n);i&&(yield i)}}function*Ka(r,e,t){t===void 0&&(t={});const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=t,u={path:n,branch:s};if(i&&(r=e.coercer(r,u),o&&e.type!=="type"&&Ar(e.schema)&&Ar(r)&&!Array.isArray(r)))for(const y in r)e.schema[y]===void 0&&delete r[y];let f=!0;for(const y of e.validator(r,u))f=!1,yield[y,void 0];for(let[y,g,S]of e.entries(r,u)){const I=Ka(g,S,{path:y===void 0?n:[...n,y],branch:y===void 0?s:[...s,g],coerce:i,mask:o});for(const R of I)R[0]?(f=!1,yield[R[0],void 0]):i&&(g=R[1],y===void 0?r=g:r instanceof Map?r.set(y,g):r instanceof Set?r.add(g):Ar(r)&&(r[y]=g))}if(f)for(const y of e.refiner(r,u))f=!1,yield[y,void 0];f&&(yield[void 0,r])}class Hn{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:n,validator:s,refiner:i,coercer:o=f=>f,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=o,s?this.validator=(f,y)=>{const g=s(f,y);return Vu(g,y,this,f)}:this.validator=()=>[],i?this.refiner=(f,y)=>{const g=i(f,y);return Vu(g,y,this,f)}:this.refiner=()=>[]}assert(e){return gw(e,this)}create(e){return qa(e,this)}is(e){return jd(e,this)}mask(e){return mw(e,this)}validate(e,t){return t===void 0&&(t={}),yi(e,this,t)}}function gw(r,e){const t=yi(r,e);if(t[0])throw t[0]}function qa(r,e){const t=yi(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function mw(r,e){const t=yi(r,e,{coerce:!0,mask:!0});if(t[0])throw t[0];return t[1]}function jd(r,e){return!yi(r,e)[0]}function yi(r,e,t){t===void 0&&(t={});const n=Ka(r,e,t),s=pw(n);return s[0]?[new hw(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function gi(r,e){return new Hn({type:r,schema:null,validator:e})}function _w(){return gi("any",()=>!0)}function Do(r){return new Hn({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+Un(e)}})}function ww(){return gi("boolean",r=>typeof r=="boolean")}function Gu(r){const e=Un(r);return new Hn({type:"literal",schema:r,validator(t){return t===r||"Expected the literal `"+e+"`, but received: "+Un(t)}})}function Pi(r){return new Hn({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function Gi(){return gi("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+Un(r))}function Wi(r){return new Hn({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Xn(){return gi("string",r=>typeof r=="string"||"Expected a string, but received: "+Un(r))}function Ln(r){const e=Object.keys(r);return new Hn({type:"type",schema:r,*entries(t){if(Ar(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return Ar(t)||"Expected an object, but received: "+Un(t)}})}function Yd(r){const e=r.map(t=>t.type).join(" | ");return new Hn({type:"union",schema:null,coercer(t,n){return(r.find(i=>{const[o]=i.validate(t,{coerce:!0});return!o})||Va()).coercer(t,n)},validator(t,n){const s=[];for(const i of r){const[...o]=Ka(t,i,n),[u]=o;if(u[0])for(const[f]of o)f&&s.push(f);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+Un(t),...s]}})}function Va(){return gi("unknown",()=>!0)}function bw(r,e,t){return new Hn({...r,coercer:(n,s)=>jd(n,e)?r.coercer(t(n,s),s):r.coercer(n,s)})}const Wu=99;async function Rw(r,e,t){if(e.length<=Wu)return await ju(r,e,t);{const n=rw(e,Wu);return(await Promise.all(n.map(i=>ju(r,i,t)))).flat()}}async function ju(r,e,t){const n=t??r.commitment,{value:s,context:i}=await r.getMultipleAccountsInfoAndContext(e,n);return s.map((u,f)=>u===null?null:{publicKey:e[f],account:u,context:i})}async function Ew(r,e,t,n,s){var i;t&&t.length>0&&e.sign(...t);const o=e._compile(),u=o.serialize(),y=e._serialize(u).toString("base64"),g={encoding:"base64",commitment:n??r.commitment};if(s){const T=(Array.isArray(s)?s:o.nonProgramIds()).map(x=>x.toBase58());g.accounts={encoding:"base64",addresses:T}}t&&t.length>0&&(g.sigVerify=!0);const S=[y,g],I=await r._rpcRequest("simulateTransaction",S),R=qa(I,Ow);if("error"in R){let T;if("data"in R.error&&(T=(i=R.error.data)===null||i===void 0?void 0:i.logs,T&&Array.isArray(T))){const x=`
    `,O=x+T.join(x);console.error(R.error.message,O)}throw new Pn("failed to simulate transaction: "+R.error.message,T)}return R.result}function Aw(r){return bw(Zd(r),vw,e=>"error"in e?e:{...e,result:qa(e.result,r)})}const vw=Zd(Va());function Zd(r){return Yd([Ln({jsonrpc:Gu("2.0"),id:Xn(),result:r}),Ln({jsonrpc:Gu("2.0"),id:Xn(),error:Ln({code:Va(),message:Xn(),data:Wi(_w())})})])}function Iw(r){return Aw(Ln({context:Ln({slot:Gi()}),value:r}))}const Ow=Iw(Ln({err:Pi(Yd([Ln({}),Xn()])),logs:Pi(Do(Xn())),accounts:Wi(Pi(Do(Pi(Ln({executable:ww(),owner:Xn(),lamports:Gi(),data:Do(Xn()),rentEpoch:Wi(Gi())}))))),unitsConsumed:Wi(Gi())}));class kr{constructor(e,t,n=kr.defaultOptions()){this.connection=e,this.wallet=t,this.opts=n,this.publicKey=t==null?void 0:t.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t=kr.defaultOptions()){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var s,i,o,u;if(n===void 0&&(n=this.opts),Kn(e))t&&e.sign(t);else if(e.feePayer=(s=e.feePayer)!==null&&s!==void 0?s:this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n.preflightCommitment)).blockhash,t)for(const y of t)e.partialSign(y);e=await this.wallet.signTransaction(e);const f=e.serialize();try{return await Yu(this.connection,f,n)}catch(y){if(y instanceof ca){const g=Ku(Kn(e)?((i=e.signatures)===null||i===void 0?void 0:i[0])||new Uint8Array:(o=e.signature)!==null&&o!==void 0?o:new Uint8Array),S=Kn(e)?0:void 0,I=await this.connection.getTransaction(g,{commitment:"confirmed",maxSupportedTransactionVersion:S});if(I){const R=(u=I.meta)===null||u===void 0?void 0:u.logMessages;throw R?new Pn(y.message,R):y}else throw y}else throw y}}async sendAll(e,t){var n,s,i;t===void 0&&(t=this.opts);const o=(await this.connection.getLatestBlockhash(t.preflightCommitment)).blockhash;let u=e.map(g=>{var S,I;if(Kn(g.tx)){let R=g.tx;return g.signers&&R.sign(g.signers),R}else{let R=g.tx,T=(S=g.signers)!==null&&S!==void 0?S:[];return R.feePayer=(I=R.feePayer)!==null&&I!==void 0?I:this.wallet.publicKey,R.recentBlockhash=o,T.forEach(x=>{R.partialSign(x)}),R}});const f=await this.wallet.signAllTransactions(u),y=[];for(let g=0;g<u.length;g+=1){const S=f[g],I=S.serialize();try{y.push(await Yu(this.connection,I,t))}catch(R){if(R instanceof ca){const T=Ku(Kn(S)?((n=S.signatures)===null||n===void 0?void 0:n[0])||new Uint8Array:(s=S.signature)!==null&&s!==void 0?s:new Uint8Array),x=Kn(S)?0:void 0,O=await this.connection.getTransaction(T,{commitment:"confirmed",maxSupportedTransactionVersion:x});if(O){const L=(i=O.meta)===null||i===void 0?void 0:i.logMessages;throw L?new Pn(R.message,L):R}else throw R}else throw R}}return y}async simulate(e,t,n,s){let i=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,o;if(Kn(e)?(t&&t.length>0&&(e.sign(t),e=await this.wallet.signTransaction(e)),o=await this.connection.simulateTransaction(e,{commitment:n})):(e.feePayer=e.feePayer||this.wallet.publicKey,e.recentBlockhash=i,t&&t.length>0&&(e=await this.wallet.signTransaction(e)),o=await Ew(this.connection,e,t,n,s)),o.value.err)throw new Sw(o.value);return o.value}}class Sw extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function Yu(r,e,t){const n=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},s=await r.sendRawTransaction(e,n),i=(await r.confirmTransaction(s,t&&t.commitment)).value;if(i.err)throw new ca(`Raw transaction ${s} failed (${JSON.stringify(i)})`);return s}class ca extends Error{constructor(e){super(e)}}function Zu(r){la=r}function ua(){return la===null?kr.local():la}let la=null;var Tw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ji<"u"?ji:typeof self<"u"?self:{},Y={};Object.defineProperty(Y,"__esModule",{value:!0});var Xd=Y.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=Wh=Y.ANCHOR_ERROR__REQUIRE_VIOLATED=Gh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=Vh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=qh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=Kh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=$h=Y.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=zh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=Fh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=Hh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=Dh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=Uh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=Ph=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=Mh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=Lh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=Bh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=Ch=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=xh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=kh=Y.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=Nh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=Th=Y.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=Sh=Y.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=Oh=Y.ANCHOR_ERROR__CONSTRAINT_SPACE=Ih=Y.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=vh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=Ah=Y.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=Eh=Y.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=Rh=Y.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=bh=Y.ANCHOR_ERROR__CONSTRAINT_ZERO=wh=Y.ANCHOR_ERROR__CONSTRAINT_ADDRESS=_h=Y.ANCHOR_ERROR__CONSTRAINT_CLOSE=mh=Y.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=gh=Y.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=yh=Y.ANCHOR_ERROR__CONSTRAINT_STATE=ph=Y.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=fh=Y.ANCHOR_ERROR__CONSTRAINT_SEEDS=hh=Y.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=dh=Y.ANCHOR_ERROR__CONSTRAINT_OWNER=lh=Y.ANCHOR_ERROR__CONSTRAINT_RAW=uh=Y.ANCHOR_ERROR__CONSTRAINT_SIGNER=ch=Y.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=ah=Y.ANCHOR_ERROR__CONSTRAINT_MUT=oh=Y.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=sh=Y.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=ih=Y.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=rh=Y.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=nh=Y.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=th=Y.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=eh=Y.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=Qd=Y.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0,Jd=Y.ANCHOR_ERROR__DEPRECATED=bf=Y.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=wf=Y.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=_f=Y.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=mf=Y.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=gf=Y.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=yf=Y.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=pf=Y.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=ff=Y.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=hf=Y.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=df=Y.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=lf=Y.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=uf=Y.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=cf=Y.ANCHOR_ERROR__INVALID_PROGRAM_ID=af=Y.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=of=Y.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=sf=Y.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=rf=Y.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=nf=Y.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=tf=Y.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=ef=Y.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=Qh=Y.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=Jh=Y.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=Xh=Y.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=Zh=Y.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=Yh=Y.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=jh=Y.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0,Qd=Y.ANCHOR_ERROR__INSTRUCTION_MISSING=100,eh=Y.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101,th=Y.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102,nh=Y.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103,rh=Y.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3,ih=Y.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001,sh=Y.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002,oh=Y.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500,ah=Y.ANCHOR_ERROR__CONSTRAINT_MUT=2e3,ch=Y.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001,uh=Y.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002,lh=Y.ANCHOR_ERROR__CONSTRAINT_RAW=2003,dh=Y.ANCHOR_ERROR__CONSTRAINT_OWNER=2004,hh=Y.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005,fh=Y.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006,ph=Y.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007,yh=Y.ANCHOR_ERROR__CONSTRAINT_STATE=2008,gh=Y.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009,mh=Y.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010,_h=Y.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011,wh=Y.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012,bh=Y.ANCHOR_ERROR__CONSTRAINT_ZERO=2013,Rh=Y.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014,Eh=Y.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015,Ah=Y.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016,vh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017,Ih=Y.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018,Oh=Y.ANCHOR_ERROR__CONSTRAINT_SPACE=2019,Sh=Y.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020,Th=Y.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021,Nh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022,kh=Y.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023,xh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024,Ch=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025,Bh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026,Lh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027,Mh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028,Ph=Y.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029,Uh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030,Dh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031,Hh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032,Fh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033,zh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034,$h=Y.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035,Kh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036,qh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037,Vh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038,Gh=Y.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039,Wh=Y.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;Xd=Y.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;var jh=Y.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502,Yh=Y.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503,Zh=Y.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504,Xh=Y.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505,Jh=Y.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506,Qh=Y.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3,ef=Y.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001,tf=Y.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002,nf=Y.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003,rf=Y.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004,sf=Y.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005,of=Y.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006,af=Y.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007,cf=Y.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008,uf=Y.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009,lf=Y.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010,df=Y.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011,hf=Y.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012,ff=Y.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013,pf=Y.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014,yf=Y.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015,gf=Y.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016,mf=Y.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017,_f=Y.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100,wf=Y.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101,bf=Y.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;Jd=Y.ANCHOR_ERROR__DEPRECATED=5e3;const Nw=new Map;function Rf(r){return Nw.get(r)!==void 0}class kn extends Error{constructor(e){super(e),this.name="IdlError"}}class mi{constructor(e){this.stack=e}static parse(e){var t;const n=/^Program (\w*) invoke/,s=/^Program \w* success/,i=[];for(let o=0;o<e.length;o++){if(s.exec(e[o])){i.pop();continue}const u=(t=n.exec(e[o]))===null||t===void 0?void 0:t[1];u&&i.push(new ne(u))}return new mi(i)}}class Xr extends Error{constructor(e,t,n,s,i,o){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=s,this.error={errorCode:e,errorMessage:t,comparedValues:o,origin:i},this._programErrorStack=mi.parse(s)}static parse(e){if(!e)return null;const t=e.findIndex(I=>I.startsWith("Program log: AnchorError"));if(t===-1)return null;const n=e[t],s=[n];let i;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const I=/^Program log: (.*)$/,R=I.exec(e[t+2])[1],T=I.exec(e[t+4])[1];i=[new ne(R),new ne(T)],s.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const I=/^Program log: (Left|Right): (.*)$/,R=I.exec(e[t+1])[2],T=I.exec(e[t+2])[2];s.push(...e.slice(t+1,t+3)),i=[R,T]}}const u=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),y=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),S=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(u){const[I,R,T]=u.slice(1,4),x={code:I,number:parseInt(R)};return new Xr(x,T,s,e,void 0,i)}else if(y){const[I,R,T,x,O]=y.slice(1,6),L={code:T,number:parseInt(x)},F={file:I,line:parseInt(R)};return new Xr(L,O,s,e,F,i)}else if(S){const[I,R,T,x]=S.slice(1,5),O=I,L={code:R,number:parseInt(T)};return new Xr(L,x,s,e,O,i)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class is extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=mi.parse(n))}static parse(e,t){const n=e.toString();let s;if(n.includes("custom program error:")){let u=n.split("custom program error: ");if(u.length!==2)return null;s=u[1]}else{const u=n.match(/"Custom":([0-9]+)}/g);if(!u||u.length>1)return null;s=u[0].match(/([0-9]+)/g)[0]}let i;try{i=parseInt(s)}catch{return null}let o=t.get(i);return o!==void 0?new is(i,o,e.logs):(o=kw.get(i),o!==void 0?new is(i,o,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function Ef(r,e){Rf("debug-logs")&&console.log("Translating error:",r);const t=Xr.parse(r.logs);if(t)return t;const n=is.parse(r,e);if(n)return n;if(r.logs){const s={get:function(i,o){return o==="programErrorStack"?i.programErrorStack.stack:o==="program"?i.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=mi.parse(r.logs),new Proxy(r,s)}return r}const ae={InstructionMissing:Qd,InstructionFallbackNotFound:eh,InstructionDidNotDeserialize:th,InstructionDidNotSerialize:nh,IdlInstructionStub:rh,IdlInstructionInvalidProgram:ih,IdlAccountNotEmpty:sh,EventInstructionStub:oh,ConstraintMut:ah,ConstraintHasOne:ch,ConstraintSigner:uh,ConstraintRaw:lh,ConstraintOwner:dh,ConstraintRentExempt:hh,ConstraintSeeds:fh,ConstraintExecutable:ph,ConstraintState:yh,ConstraintAssociated:gh,ConstraintAssociatedInit:mh,ConstraintClose:_h,ConstraintAddress:wh,ConstraintZero:bh,ConstraintTokenMint:Rh,ConstraintTokenOwner:Eh,ConstraintMintMintAuthority:Ah,ConstraintMintFreezeAuthority:vh,ConstraintMintDecimals:Ih,ConstraintSpace:Oh,ConstraintAccountIsNone:Sh,ConstraintTokenTokenProgram:Th,ConstraintMintTokenProgram:Nh,ConstraintAssociatedTokenTokenProgram:kh,ConstraintMintGroupPointerExtension:xh,ConstraintMintGroupPointerExtensionAuthority:Ch,ConstraintMintGroupPointerExtensionGroupAddress:Bh,ConstraintMintGroupMemberPointerExtension:Lh,ConstraintMintGroupMemberPointerExtensionAuthority:Mh,ConstraintMintGroupMemberPointerExtensionMemberAddress:Ph,ConstraintMintMetadataPointerExtension:Uh,ConstraintMintMetadataPointerExtensionAuthority:Dh,ConstraintMintMetadataPointerExtensionMetadataAddress:Hh,ConstraintMintCloseAuthorityExtension:Fh,ConstraintMintCloseAuthorityExtensionAuthority:zh,ConstraintMintPermanentDelegateExtension:$h,ConstraintMintPermanentDelegateExtensionDelegate:Kh,ConstraintMintTransferHookExtension:qh,ConstraintMintTransferHookExtensionAuthority:Vh,ConstraintMintTransferHookExtensionProgramId:Gh,RequireViolated:Wh,RequireEqViolated:Xd,RequireKeysEqViolated:jh,RequireNeqViolated:Yh,RequireKeysNeqViolated:Zh,RequireGtViolated:Xh,RequireGteViolated:Jh,AccountDiscriminatorAlreadySet:Qh,AccountDiscriminatorNotFound:ef,AccountDiscriminatorMismatch:tf,AccountDidNotDeserialize:nf,AccountDidNotSerialize:rf,AccountNotEnoughKeys:sf,AccountNotMutable:of,AccountOwnedByWrongProgram:af,InvalidProgramId:cf,InvalidProgramExecutable:uf,AccountNotSigner:lf,AccountNotSystemOwned:df,AccountNotInitialized:hf,AccountNotProgramData:ff,AccountNotAssociatedTokenAccount:pf,AccountSysvarMismatch:yf,AccountReallocExceedsLimit:gf,AccountDuplicateReallocs:mf,DeclaredProgramIdMismatch:_f,TryingToInitPayerAsProgramAccount:wf,InvalidNumericConversion:bf,Deprecated:Jd},kw=new Map([[ae.InstructionMissing,"8 byte instruction identifier not provided"],[ae.InstructionFallbackNotFound,"Fallback functions are not supported"],[ae.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[ae.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[ae.IdlInstructionStub,"The program was compiled without idl instructions"],[ae.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[ae.IdlAccountNotEmpty,"IDL account must be empty in order to resize, try closing first"],[ae.EventInstructionStub,"The program was compiled without `event-cpi` feature"],[ae.ConstraintMut,"A mut constraint was violated"],[ae.ConstraintHasOne,"A has one constraint was violated"],[ae.ConstraintSigner,"A signer constraint was violated"],[ae.ConstraintRaw,"A raw constraint was violated"],[ae.ConstraintOwner,"An owner constraint was violated"],[ae.ConstraintRentExempt,"A rent exemption constraint was violated"],[ae.ConstraintSeeds,"A seeds constraint was violated"],[ae.ConstraintExecutable,"An executable constraint was violated"],[ae.ConstraintState,"Deprecated Error, feel free to replace with something else"],[ae.ConstraintAssociated,"An associated constraint was violated"],[ae.ConstraintAssociatedInit,"An associated init constraint was violated"],[ae.ConstraintClose,"A close constraint was violated"],[ae.ConstraintAddress,"An address constraint was violated"],[ae.ConstraintZero,"Expected zero account discriminant"],[ae.ConstraintTokenMint,"A token mint constraint was violated"],[ae.ConstraintTokenOwner,"A token owner constraint was violated"],[ae.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[ae.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[ae.ConstraintMintDecimals,"A mint decimals constraint was violated"],[ae.ConstraintSpace,"A space constraint was violated"],[ae.ConstraintAccountIsNone,"A required account for the constraint is None"],[ae.ConstraintTokenTokenProgram,"A token account token program constraint was violated"],[ae.ConstraintMintTokenProgram,"A mint token program constraint was violated"],[ae.ConstraintAssociatedTokenTokenProgram,"An associated token account token program constraint was violated"],[ae.ConstraintMintGroupPointerExtension,"A group pointer extension constraint was violated"],[ae.ConstraintMintGroupPointerExtensionAuthority,"A group pointer extension authority constraint was violated"],[ae.ConstraintMintGroupPointerExtensionGroupAddress,"A group pointer extension group address constraint was violated"],[ae.ConstraintMintGroupMemberPointerExtension,"A group member pointer extension constraint was violated"],[ae.ConstraintMintGroupMemberPointerExtensionAuthority,"A group member pointer extension authority constraint was violated"],[ae.ConstraintMintGroupMemberPointerExtensionMemberAddress,"A group member pointer extension group address constraint was violated"],[ae.ConstraintMintMetadataPointerExtension,"A metadata pointer extension constraint was violated"],[ae.ConstraintMintMetadataPointerExtensionAuthority,"A metadata pointer extension authority constraint was violated"],[ae.ConstraintMintMetadataPointerExtensionMetadataAddress,"A metadata pointer extension metadata address constraint was violated"],[ae.ConstraintMintCloseAuthorityExtension,"A close authority constraint was violated"],[ae.ConstraintMintCloseAuthorityExtensionAuthority,"A close authority extension authority constraint was violated"],[ae.ConstraintMintPermanentDelegateExtension,"A permanent delegate extension constraint was violated"],[ae.ConstraintMintPermanentDelegateExtensionDelegate,"A permanent delegate extension delegate constraint was violated"],[ae.ConstraintMintTransferHookExtension,"A transfer hook extension constraint was violated"],[ae.ConstraintMintTransferHookExtensionAuthority,"A transfer hook extension authority constraint was violated"],[ae.ConstraintMintTransferHookExtensionProgramId,"A transfer hook extension transfer hook program id constraint was violated"],[ae.RequireViolated,"A require expression was violated"],[ae.RequireEqViolated,"A require_eq expression was violated"],[ae.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[ae.RequireNeqViolated,"A require_neq expression was violated"],[ae.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[ae.RequireGtViolated,"A require_gt expression was violated"],[ae.RequireGteViolated,"A require_gte expression was violated"],[ae.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[ae.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[ae.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[ae.AccountDidNotDeserialize,"Failed to deserialize the account"],[ae.AccountDidNotSerialize,"Failed to serialize the account"],[ae.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[ae.AccountNotMutable,"The given account is not mutable"],[ae.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[ae.InvalidProgramId,"Program ID was not as expected"],[ae.InvalidProgramExecutable,"Program account is not executable"],[ae.AccountNotSigner,"The given account did not sign"],[ae.AccountNotSystemOwned,"The given account is not owned by the system program"],[ae.AccountNotInitialized,"The program expected this account to be already initialized"],[ae.AccountNotProgramData,"The given account is not a program data account"],[ae.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[ae.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[ae.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[ae.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[ae.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[ae.TryingToInitPayerAsProgramAccount,"You cannot/should not initialize the payer account as a program account"],[ae.InvalidNumericConversion,"The program could not perform the numeric conversion, out of range integral type conversion attempted"],[ae.Deprecated,"The API being used is deprecated and should no longer be used"]]);class Ne{static fieldLayout(e,t=[],n){const s=e.name;switch(e.type){case"bool":return be.bool(s);case"u8":return be.u8(s);case"i8":return be.i8(s);case"u16":return be.u16(s);case"i16":return be.i16(s);case"u32":return be.u32(s);case"i32":return be.i32(s);case"f32":return be.f32(s);case"u64":return be.u64(s);case"i64":return be.i64(s);case"f64":return be.f64(s);case"u128":return be.u128(s);case"i128":return be.i128(s);case"u256":return be.u256(s);case"i256":return be.i256(s);case"bytes":return be.vecU8(s);case"string":return be.str(s);case"pubkey":return be.publicKey(s);default:{if("option"in e.type)return be.option(Ne.fieldLayout({type:e.type.option},t,n),s);if("vec"in e.type)return be.vec(Ne.fieldLayout({type:e.type.vec},t,n),s);if("array"in e.type){let[i,o]=e.type.array;return o=Ne.resolveArrayLen(o,n),be.array(Ne.fieldLayout({type:i},t,n),o,s)}if("defined"in e.type){if(!t)throw new kn("User defined types not provided");const i=e.type.defined.name,o=t.find(u=>u.name===i);if(!o)throw new kn(`Type not found: ${e.name}`);return Ne.typeDefLayout({typeDef:o,types:t,genericArgs:n??e.type.defined.generics,name:s})}if("generic"in e.type){const i=n==null?void 0:n.at(0);if((i==null?void 0:i.kind)!=="type")throw new kn(`Invalid generic field: ${e.name}`);return Ne.fieldLayout({...e,type:i.type},t)}throw new kn(`Not yet implemented: ${JSON.stringify(e.type)}`)}}}static typeDefLayout({typeDef:e,types:t,name:n,genericArgs:s}){switch(e.type.kind){case"struct":{const i=mr(e.type.fields,()=>[],o=>o.map(u=>{const f=s&&Ne.resolveGenericArgs({type:u.type,typeDef:e,genericArgs:s});return Ne.fieldLayout(u,t,f)}),o=>o.map((u,f)=>{const y=s&&Ne.resolveGenericArgs({type:u,typeDef:e,genericArgs:s});return Ne.fieldLayout({name:f.toString(),type:u},t,y)}));return be.struct(i,n)}case"enum":{const i=e.type.variants.map(o=>{const u=mr(o.fields,()=>[],f=>f.map(y=>{const g=s&&Ne.resolveGenericArgs({type:y.type,typeDef:e,genericArgs:s});return Ne.fieldLayout(y,t,g)}),f=>f.map((y,g)=>{const S=s&&Ne.resolveGenericArgs({type:y,typeDef:e,genericArgs:s});return Ne.fieldLayout({name:g.toString(),type:y},t,S)}));return be.struct(u,o.name)});return n!==void 0?be.rustEnum(i).replicate(n):be.rustEnum(i,n)}case"type":return Ne.fieldLayout({type:e.type.alias,name:n},t)}}static typeSize(e,t,n){var s;switch(e){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"pubkey":return 32;default:if("option"in e)return 1+Ne.typeSize(e.option,t,n);if("coption"in e)return 4+Ne.typeSize(e.coption,t,n);if("vec"in e)return 1;if("array"in e){let[i,o]=e.array;return o=Ne.resolveArrayLen(o,n),Ne.typeSize(i,t,n)*o}if("defined"in e){const i=(s=t.types)===null||s===void 0?void 0:s.find(u=>u.name===e.defined.name);if(!i)throw new kn(`Type not found: ${JSON.stringify(e)}`);const o=u=>{const f=n??e.defined.generics,y=f&&Ne.resolveGenericArgs({type:u,typeDef:i,genericArgs:f});return Ne.typeSize(u,t,y)};switch(i.type.kind){case"struct":return mr(i.type.fields,()=>[0],u=>u.map(f=>o(f.type)),u=>u.map(f=>o(f))).reduce((u,f)=>u+f,0);case"enum":{const u=i.type.variants.map(f=>mr(f.fields,()=>[0],y=>y.map(g=>o(g.type)),y=>y.map(g=>o(g))).reduce((y,g)=>y+g,0));return Math.max(...u)+1}case"type":return Ne.typeSize(i.type.alias,t,n)}}if("generic"in e){const i=n==null?void 0:n.at(0);if((i==null?void 0:i.kind)!=="type")throw new kn(`Invalid generic: ${e.generic}`);return Ne.typeSize(i.type,t,n)}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}static resolveArrayLen(e,t){if(typeof e=="number")return e;if(t){const n=t.find(s=>s.kind==="const");(n==null?void 0:n.kind)==="const"&&(e=+n.value)}if(typeof e!="number")throw new kn("Generic array length did not resolve");return e}static resolveGenericArgs({type:e,typeDef:t,genericArgs:n,isDefined:s}){if(typeof e!="object")return null;for(const i in t.generics){const o=t.generics[i];if("generic"in e&&o.name===e.generic)return[n[i]];if("option"in e){const u=Ne.resolveGenericArgs({type:e.option,typeDef:t,genericArgs:n,isDefined:s});if(!u||!s)return u;if(u[0].kind==="type")return[{kind:"type",type:{option:u[0].type}}]}if("vec"in e){const u=Ne.resolveGenericArgs({type:e.vec,typeDef:t,genericArgs:n,isDefined:s});if(!u||!s)return u;if(u[0].kind==="type")return[{kind:"type",type:{vec:u[0].type}}]}if("array"in e){const[u,f]=e.array,y=typeof f=="object",g=Ne.resolveGenericArgs({type:u,typeDef:t,genericArgs:n,isDefined:s});if(g){for(const S in t.generics.slice(+i)){const I=+i+ +S;y&&t.generics[I].name===f.generic&&g.push(n[I])}if(!s)return g;if(g[0].kind==="type"&&g[1].kind==="const")return[{kind:"type",type:{array:[g[0].type,+g[1].value]}}]}if(y&&o.name===f.generic){const S=n[i];return s?[{kind:"type",type:{array:[u,+S.value]}}]:[S]}return null}if("defined"in e)return e.defined.generics?e.defined.generics.flatMap(u=>{switch(u.kind){case"type":return Ne.resolveGenericArgs({type:u.type,typeDef:t,genericArgs:n,isDefined:!0});case"const":return[u]}}).filter(u=>u!==null):null}return null}}class xw{constructor(e){this.idl=e;const t=e.instructions.map(s=>{const i=s.name,o=s.args.map(f=>Ne.fieldLayout(f,e.types)),u=be.struct(o,i);return[i,{discriminator:s.discriminator,layout:u}]});this.ixLayouts=new Map(t);const n=t.map(([s,{discriminator:i,layout:o}])=>[et.encode(i),{name:s,layout:o}]);this.sighashLayouts=new Map(n)}encode(e,t){const n=fe.Buffer.alloc(1e3),s=this.ixLayouts.get(e);if(!s)throw new Error(`Unknown method: ${e}`);const i=s.layout.encode(t,n),o=n.slice(0,i);return fe.Buffer.concat([fe.Buffer.from(s.discriminator),o])}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?fe.Buffer.from(e,"hex"):et.decode(e));const n=e.slice(0,_r),s=e.slice(_r),i=this.sighashLayouts.get(et.encode(n));return i?{name:i.name,data:i.layout.decode(s)}:null}format(e,t){return Kt.format(e,t,this.idl)}}class Kt{static format(e,t,n){const s=n.instructions.find(f=>e.name===f.name);if(!s)return console.error("Invalid instruction given"),null;const i=s.args.map(f=>({name:f.name,type:Kt.formatIdlType(f.type),data:Kt.formatIdlData(f,e.data[f.name],n.types)})),o=Kt.flattenIdlAccounts(s.accounts),u=t.map((f,y)=>y<o.length?{name:o[y].name,...f}:{name:void 0,...f});return{args:i,accounts:u}}static formatIdlType(e){if(typeof e=="string")return e;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("coption"in e)return`COption<${this.formatIdlType(e.coption)}>`;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;if("defined"in e){const t=e.defined.name;if(e.defined.generics){const n=e.defined.generics.map(s=>{switch(s.kind){case"type":return Kt.formatIdlType(s.type);case"const":return s.value}}).join(", ");return`${t}<${n}>`}return t}throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if("vec"in e.type)return"["+t.map(s=>this.formatIdlData({name:"",type:e.type.vec},s,n)).join(", ")+"]";if("option"in e.type)return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if("defined"in e.type){if(!n)throw new Error("User defined types not provided");const s=e.type.defined.name,i=n.find(o=>o.name===s);if(!i)throw new Error(`Type not found: ${s}`);return Kt.formatIdlDataDefined(i,t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){switch(e.type.kind){case"struct":return"{ "+mr(e.type.fields,()=>"",s=>Object.entries(t).map(([i,o])=>{const u=s.find(f=>f.name===i);if(!u)throw new Error(`Field not found: ${i}`);return i+": "+Kt.formatIdlData(u,o,n)}).join(", "),s=>Object.entries(t).map(([i,o])=>i+": "+Kt.formatIdlData({name:"",type:s[i]},o,n)).join(", "))+" }";case"enum":{const s=Object.keys(t)[0],i=e.type.variants.find(u=>u.name===s);if(!i)throw new Error(`Unable to find variant: ${s}`);const o=t[s];return mr(i.fields,()=>s,u=>{const f=Object.keys(o).map(y=>{const g=o[y],S=u.find(I=>I.name===y);if(!S)throw new Error(`Field not found: ${y}`);return y+": "+Kt.formatIdlData(S,g,n)}).join(", ");return`${s} { ${f} }`},u=>{const f=Object.entries(o).map(([y,g])=>y+": "+Kt.formatIdlData({name:"",type:u[y]},g,n)).join(", ");return`${s} { ${f} }`})}case"type":return Kt.formatIdlType(e.type.alias)}}static flattenIdlAccounts(e,t){return e.map(n=>{const s=Cw(n.name);if(n.hasOwnProperty("accounts")){const i=t?`${t} > ${s}`:s;return Kt.flattenIdlAccounts(n.accounts,i)}else return{...n,name:t?`${t} > ${s}`:s}}).flat()}}function Cw(r){const e=r.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}const _r=8;class Bw{constructor(e){if(this.idl=e,!e.accounts){this.accountLayouts=new Map;return}const t=e.types;if(!t)throw new Error("Accounts require `idl.types`");const n=e.accounts.map(s=>{const i=t.find(o=>o.name===s.name);if(!i)throw new Error(`Account not found: ${s.name}`);return[s.name,Ne.typeDefLayout({typeDef:i,types:t})]});this.accountLayouts=new Map(n)}async encode(e,t){const n=fe.Buffer.alloc(1e3),s=this.accountLayouts.get(e);if(!s)throw new Error(`Unknown account: ${e}`);const i=s.encode(t,n),o=n.slice(0,i),u=this.accountDiscriminator(e);return fe.Buffer.concat([u,o])}decode(e,t){if(this.accountDiscriminator(e).compare(t.slice(0,_r)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeAny(e){const t=e.slice(0,_r),n=Array.from(this.accountLayouts.keys()).find(s=>this.accountDiscriminator(s).equals(t));if(!n)throw new Error("Account not found");return this.decodeUnchecked(n,e)}decodeUnchecked(e,t){const n=t.subarray(_r),s=this.accountLayouts.get(e);if(!s)throw new Error(`Unknown account: ${e}`);return s.decode(n)}memcmp(e,t){const n=this.accountDiscriminator(e);return{offset:0,bytes:et.encode(t?fe.Buffer.concat([n,t]):n)}}size(e){return _r+Ne.typeSize({defined:{name:e}},this.idl)}accountDiscriminator(e){var t;const n=(t=this.idl.accounts)===null||t===void 0?void 0:t.find(s=>s.name===e);if(!n)throw new Error(`Account not found: ${e}`);return fe.Buffer.from(n.discriminator)}}class Lw{constructor(e){var t;if(!e.events){this.layouts=new Map;return}const n=e.types;if(!n)throw new Error("Events require `idl.types`");const s=e.events.map(i=>{const o=n.find(u=>u.name===i.name);if(!o)throw new Error(`Event not found: ${i.name}`);return[i.name,Ne.typeDefLayout({typeDef:o,types:n})]});this.layouts=new Map(s),this.discriminators=new Map(((t=e.events)!==null&&t!==void 0?t:[]).map(i=>[qu(fe.Buffer.from(i.discriminator)),i.name]))}decode(e){let t;try{t=Gd(e)}catch{return null}const n=qu(t.slice(0,8)),s=this.discriminators.get(n);if(!s)return null;const i=this.layouts.get(s);if(!i)throw new Error(`Unknown event: ${s}`);return{data:i.decode(t.slice(8)),name:s}}}class Mw{constructor(e){const t=e.types;if(!t){this.typeLayouts=new Map;return}const n=t.filter(s=>!s.generics).map(s=>[s.name,Ne.typeDefLayout({typeDef:s,types:t})]);this.typeLayouts=new Map(n)}encode(e,t){const n=fe.Buffer.alloc(1e3),s=this.typeLayouts.get(e);if(!s)throw new Error(`Unknown type: ${e}`);const i=s.encode(t,n);return n.slice(0,i)}decode(e,t){const n=this.typeLayouts.get(e);if(!n)throw new Error(`Unknown type: ${e}`);return n.decode(t)}}class Af{constructor(e){this.instruction=new xw(e),this.accounts=new Bw(e),this.events=new Lw(e),this.types=new Mw(e)}}class $t{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var ks=$t;function Pw(r,e){return e.property?r+"["+e.property+"]":r}class Jn extends $t{isCount(){throw new Error("ExternalLayout is abstract")}}class vf extends Jn{constructor(e,t,n){if(!(e instanceof $t))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof xs||this.layout instanceof If}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class xs extends $t{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class If extends $t{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const da=Math.pow(2,32);function Of(r){const e=Math.floor(r/da),t=r-e*da;return{hi32:e,lo32:t}}function Sf(r,e){return r*da+e}class Uw extends $t{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),s=e.readUInt32LE(t+4);return Sf(s,n)}encode(e,t,n){n===void 0&&(n=0);const s=Of(e);return t.writeUInt32LE(s.lo32,n),t.writeUInt32LE(s.hi32,n+4),8}}class Dw extends $t{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),s=e.readInt32LE(t+4);return Sf(s,n)}encode(e,t,n){n===void 0&&(n=0);const s=Of(e);return t.writeUInt32LE(s.lo32,n),t.writeInt32LE(s.hi32,n+4),8}}class Hw extends $t{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((i,o)=>i&&o instanceof $t,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const i of e)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(e,t);return t+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const s=n;let i=0,o=0;for(const u of this.fields){let f=u.span;if(o=0<f?f:0,u.property!==void 0){const y=e[u.property];y!==void 0&&(o=u.encode(y,t,n),0>f&&(f=u.getSpan(t,n)))}i=n,n+=f}return i+o-s}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class Tf{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Xu extends Tf{constructor(e,t){if(!(e instanceof Jn&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class Nf extends $t{constructor(e,t,n){const s=e instanceof xs||e instanceof If;if(s)e=new Xu(new vf(e));else if(e instanceof Jn&&e.isCount())e=new Xu(e);else if(!(e instanceof Tf))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof $t))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&s&&(i+=e.layout.span)),super(i,n),this.discriminator=e,this.usesPrefixDiscriminator=s,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return o(u)},this.configGetSourceVariant=function(u){o=u.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){t===void 0&&(t=0);let n;const s=this.discriminator,i=s.decode(e,t);let o=this.registry[i];if(o===void 0){let u=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(u=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[o.property]=this.defaultLayout.decode(e,t+u)}else n=o.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const s=this.getSourceVariant(e);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let u=0;return this.usesPrefixDiscriminator&&(u=i.layout.span),i.encode(e[i.property],t,n),u+o.encode(e[o.property],t,n+u)}return s.encode(e,t,n)}addVariant(e,t,n){const s=new Fw(this,e,t,n);return this.registry[e]=s,s}getVariant(e,t){let n=e;return ye.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class Fw extends $t{constructor(e,t,n,s){if(!(e instanceof Nf))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof $t))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=n?n.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,s),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let i=s;if(this.layout&&(this.layout.encode(e[this.property],t,n+s),i+=this.layout.getSpan(t,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class zw extends $t{constructor(e,t){if(!(e instanceof Jn&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Jn||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let s=this.length;if(this.length instanceof Jn&&(s=e.length),!(ye.isBuffer(e)&&s===e.length))throw new TypeError(Pw("Blob.encode",this)+" requires (length "+s+") Buffer as src");if(n+s>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,s,"hex"),this.length instanceof Jn&&this.length.encode(s,t,n),s}}var $w=(r,e,t)=>new vf(r,e,t),Kw=r=>new xs(1,r),En=r=>new xs(4,r),qw=r=>new Uw(r),In=r=>new Dw(r),vt=(r,e,t)=>new Hw(r,e,t),kf=(r,e,t)=>new Nf(r,e,t),_i=(r,e)=>new zw(r,e);class Vw extends ks{constructor(e){super(-1,e),this.property=e,this.layout=vt([En("length"),En("lengthPadding"),_i($w(En(),-8),"chars")],this.property)}encode(e,t,n=0){if(e==null)return this.layout.span;const s={chars:ye.from(e,"utf8")};return this.layout.encode(s,t,n)}decode(e,t=0){return this.layout.decode(e,t).chars.toString()}getSpan(e,t=0){return En().span+En().span+new nt(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}}function Cs(r){return new Vw(r)}function Zt(r){return _i(32,r)}const Gt=kf(En("instruction"));Gt.addVariant(0,vt([In("lamports"),In("space"),Zt("owner")]),"createAccount");Gt.addVariant(1,vt([Zt("owner")]),"assign");Gt.addVariant(2,vt([In("lamports")]),"transfer");Gt.addVariant(3,vt([Zt("base"),Cs("seed"),In("lamports"),In("space"),Zt("owner")]),"createAccountWithSeed");Gt.addVariant(4,vt([Zt("authorized")]),"advanceNonceAccount");Gt.addVariant(5,vt([In("lamports")]),"withdrawNonceAccount");Gt.addVariant(6,vt([Zt("authorized")]),"initializeNonceAccount");Gt.addVariant(7,vt([Zt("authorized")]),"authorizeNonceAccount");Gt.addVariant(8,vt([In("space")]),"allocate");Gt.addVariant(9,vt([Zt("base"),Cs("seed"),In("space"),Zt("owner")]),"allocateWithSeed");Gt.addVariant(10,vt([Zt("base"),Cs("seed"),Zt("owner")]),"assignWithSeed");Gt.addVariant(11,vt([In("lamports"),Cs("seed"),Zt("owner")]),"transferWithSeed");Math.max(...Object.values(Gt.registry).map(r=>r.span));class Gw extends ks{constructor(e,t,n,s){super(e.span,s),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}function Ju(r){return new Gw(_i(32),e=>new ne(e),e=>e.toBuffer(),r)}vt([En("version"),En("state"),Ju("authorizedPubkey"),Ju("nonce"),vt([qw("lamportsPerSignature")],"feeCalculator")]);new ne("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new ne("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var Qu={exports:{}};(function(r,e){var t=typeof self<"u"?self:Tw,n=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var u={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function f(c){return c&&DataView.prototype.isPrototypeOf(c)}if(u.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(c){return c&&y.indexOf(Object.prototype.toString.call(c))>-1};function S(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function I(c){return typeof c!="string"&&(c=String(c)),c}function R(c){var p={next:function(){var b=c.shift();return{done:b===void 0,value:b}}};return u.iterable&&(p[Symbol.iterator]=function(){return p}),p}function T(c){this.map={},c instanceof T?c.forEach(function(p,b){this.append(b,p)},this):Array.isArray(c)?c.forEach(function(p){this.append(p[0],p[1])},this):c&&Object.getOwnPropertyNames(c).forEach(function(p){this.append(p,c[p])},this)}T.prototype.append=function(c,p){c=S(c),p=I(p);var b=this.map[c];this.map[c]=b?b+", "+p:p},T.prototype.delete=function(c){delete this.map[S(c)]},T.prototype.get=function(c){return c=S(c),this.has(c)?this.map[c]:null},T.prototype.has=function(c){return this.map.hasOwnProperty(S(c))},T.prototype.set=function(c,p){this.map[S(c)]=I(p)},T.prototype.forEach=function(c,p){for(var b in this.map)this.map.hasOwnProperty(b)&&c.call(p,this.map[b],b,this)},T.prototype.keys=function(){var c=[];return this.forEach(function(p,b){c.push(b)}),R(c)},T.prototype.values=function(){var c=[];return this.forEach(function(p){c.push(p)}),R(c)},T.prototype.entries=function(){var c=[];return this.forEach(function(p,b){c.push([b,p])}),R(c)},u.iterable&&(T.prototype[Symbol.iterator]=T.prototype.entries);function x(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=!0}function O(c){return new Promise(function(p,b){c.onload=function(){p(c.result)},c.onerror=function(){b(c.error)}})}function L(c){var p=new FileReader,b=O(p);return p.readAsArrayBuffer(c),b}function F(c){var p=new FileReader,b=O(p);return p.readAsText(c),b}function M(c){for(var p=new Uint8Array(c),b=new Array(p.length),v=0;v<p.length;v++)b[v]=String.fromCharCode(p[v]);return b.join("")}function q(c){if(c.slice)return c.slice(0);var p=new Uint8Array(c.byteLength);return p.set(new Uint8Array(c)),p.buffer}function G(){return this.bodyUsed=!1,this._initBody=function(c){this._bodyInit=c,c?typeof c=="string"?this._bodyText=c:u.blob&&Blob.prototype.isPrototypeOf(c)?this._bodyBlob=c:u.formData&&FormData.prototype.isPrototypeOf(c)?this._bodyFormData=c:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)?this._bodyText=c.toString():u.arrayBuffer&&u.blob&&f(c)?(this._bodyArrayBuffer=q(c.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(c)||g(c))?this._bodyArrayBuffer=q(c):this._bodyText=c=Object.prototype.toString.call(c):this._bodyText="",this.headers.get("content-type")||(typeof c=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var c=x(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?x(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(L)}),this.text=function(){var c=x(this);if(c)return c;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then($)}),this.json=function(){return this.text().then(JSON.parse)},this}var te=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function X(c){var p=c.toUpperCase();return te.indexOf(p)>-1?p:c}function ee(c,p){p=p||{};var b=p.body;if(c instanceof ee){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url,this.credentials=c.credentials,p.headers||(this.headers=new T(c.headers)),this.method=c.method,this.mode=c.mode,this.signal=c.signal,!b&&c._bodyInit!=null&&(b=c._bodyInit,c.bodyUsed=!0)}else this.url=String(c);if(this.credentials=p.credentials||this.credentials||"same-origin",(p.headers||!this.headers)&&(this.headers=new T(p.headers)),this.method=X(p.method||this.method||"GET"),this.mode=p.mode||this.mode||null,this.signal=p.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&b)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(b)}ee.prototype.clone=function(){return new ee(this,{body:this._bodyInit})};function $(c){var p=new FormData;return c.trim().split("&").forEach(function(b){if(b){var v=b.split("="),k=v.shift().replace(/\+/g," "),_=v.join("=").replace(/\+/g," ");p.append(decodeURIComponent(k),decodeURIComponent(_))}}),p}function z(c){var p=new T,b=c.replace(/\r?\n[\t ]+/g," ");return b.split(/\r?\n/).forEach(function(v){var k=v.split(":"),_=k.shift().trim();if(_){var d=k.join(":").trim();p.append(_,d)}}),p}G.call(ee.prototype);function H(c,p){p||(p={}),this.type="default",this.status=p.status===void 0?200:p.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in p?p.statusText:"OK",this.headers=new T(p.headers),this.url=p.url||"",this._initBody(c)}G.call(H.prototype),H.prototype.clone=function(){return new H(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new T(this.headers),url:this.url})},H.error=function(){var c=new H(null,{status:0,statusText:""});return c.type="error",c};var P=[301,302,303,307,308];H.redirect=function(c,p){if(P.indexOf(p)===-1)throw new RangeError("Invalid status code");return new H(null,{status:p,headers:{location:c}})},o.DOMException=i.DOMException;try{new o.DOMException}catch{o.DOMException=function(p,b){this.message=p,this.name=b;var v=Error(p);this.stack=v.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function A(c,p){return new Promise(function(b,v){var k=new ee(c,p);if(k.signal&&k.signal.aborted)return v(new o.DOMException("Aborted","AbortError"));var _=new XMLHttpRequest;function d(){_.abort()}_.onload=function(){var l={status:_.status,statusText:_.statusText,headers:z(_.getAllResponseHeaders()||"")};l.url="responseURL"in _?_.responseURL:l.headers.get("X-Request-URL");var a="response"in _?_.response:_.responseText;b(new H(a,l))},_.onerror=function(){v(new TypeError("Network request failed"))},_.ontimeout=function(){v(new TypeError("Network request failed"))},_.onabort=function(){v(new o.DOMException("Aborted","AbortError"))},_.open(k.method,k.url,!0),k.credentials==="include"?_.withCredentials=!0:k.credentials==="omit"&&(_.withCredentials=!1),"responseType"in _&&u.blob&&(_.responseType="blob"),k.headers.forEach(function(l,a){_.setRequestHeader(a,l)}),k.signal&&(k.signal.addEventListener("abort",d),_.onreadystatechange=function(){_.readyState===4&&k.signal.removeEventListener("abort",d)}),_.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return A.polyfill=!0,i.fetch||(i.fetch=A,i.Headers=T,i.Request=ee,i.Response=H),o.Headers=T,o.Request=ee,o.Response=H,o.fetch=A,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,r.exports=e})(Qu,Qu.exports);be.rustEnum([be.struct([],"uninitialized"),be.struct([be.option(be.publicKey(),"authorityAddress")],"buffer"),be.struct([be.publicKey("programdataAddress")],"program"),be.struct([be.u64("slot"),be.option(be.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,be.u32());function Bs(r,e){var t,n;let s={};const i=r.args?r.args.length:0;if(e.length>i){if(e.length!==i+1)throw new Error(`provided too many arguments ${e} to instruction ${r==null?void 0:r.name} expecting: ${(n=(t=r.args)===null||t===void 0?void 0:t.map(o=>o.name))!==null&&n!==void 0?n:[]}`);s=e.pop()}return[e,s]}class ss{static build(e,t,n){if(e.name==="_inner")throw new kn("the _inner name is reserved");const s=(...i)=>{const[o,u]=Bs(e,[...i]);Wd(e.accounts,u.accounts),Ww(e,...i);const f=s.accounts(u.accounts);return u.remainingAccounts!==void 0&&f.push(...u.remainingAccounts),Rf("debug-logs")&&console.log("Outgoing account metas:",f),new De({keys:f,programId:n,data:t(e.name,dw(e,...o))})};return s.accounts=i=>ss.accountsArray(i,e.accounts,n,e.name),s}static accountsArray(e,t,n,s){return e?t.map(i=>{if(gr(i)){const g=e[i.name];return ss.accountsArray(g,i.accounts,n,s).flat()}let o;try{o=Jt(e[i.name])}catch{throw new Error(`Wrong input type for account "${i.name}" in the instruction accounts object${s!==void 0?' for instruction "'+s+'"':""}. Expected PublicKey or string.`)}const u=i.optional&&o.equals(n),f=!!(i.writable&&!u),y=!!(i.signer&&!u);return{pubkey:o,isWritable:f,isSigner:y}}).flat():[]}}function Ww(r,...e){}class jw{static build(e,t){return(...s)=>{var i,o,u;const[,f]=Bs(e,[...s]),y=new xe;if(f.preInstructions&&f.instructions)throw new Error("instructions is deprecated, use preInstructions");return(i=f.preInstructions)===null||i===void 0||i.forEach(g=>y.add(g)),(o=f.instructions)===null||o===void 0||o.forEach(g=>y.add(g)),y.add(t(...s)),(u=f.postInstructions)===null||u===void 0||u.forEach(g=>y.add(g)),y}}}class Yw{static build(e,t,n,s){return async(...o)=>{var u;const f=t(...o),[,y]=Bs(e,[...o]);if(s.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await s.sendAndConfirm(f,(u=y.signers)!==null&&u!==void 0?u:[],y.options)}catch(g){throw Ef(g,n)}}}}class Zw{static build(e,t,n,s){var i;return((i=e.accounts)!==null&&i!==void 0?i:[]).reduce((o,u)=>(o[u.name]=new Xw(e,u,n,s,t),o),{})}}class Xw{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}constructor(e,t,n,s,i){this._idlAccount=t,this._programId=n,this._provider=s??ua(),this._coder=i??new Af(e),this._size=this._coder.accounts.size(t.name)}async fetchNullable(e,t){const{data:n}=await this.fetchNullableAndContext(e,t);return n}async fetchNullableAndContext(e,t){const n=await this.getAccountInfoAndContext(e,t),{value:s,context:i}=n;return{data:s&&s.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,s.data):null,context:i}}async fetch(e,t){const{data:n}=await this.fetchNullableAndContext(e,t);if(n===null)throw new Error(`Account does not exist or has no data ${e.toString()}`);return n}async fetchAndContext(e,t){const{data:n,context:s}=await this.fetchNullableAndContext(e,t);if(n===null)throw new Error(`Account does not exist ${e.toString()}`);return{data:n,context:s}}async fetchMultiple(e,t){return(await this.fetchMultipleAndContext(e,t)).map(s=>s?s.data:null)}async fetchMultipleAndContext(e,t){return(await Rw(this._provider.connection,e.map(s=>Jt(s)),t)).map(s=>{if(s==null)return null;const{account:i,context:o}=s;return{data:this._coder.accounts.decode(this._idlAccount.name,i.data),context:o}})}async all(e){const t=this.coder.accounts.memcmp(this._idlAccount.name,e instanceof ye?e:void 0),n=[];return(t==null?void 0:t.offset)!=null&&(t==null?void 0:t.bytes)!=null&&n.push({memcmp:{offset:t.offset,bytes:t.bytes}}),(t==null?void 0:t.dataSize)!=null&&n.push({dataSize:t.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...n,...Array.isArray(e)?e:[]]})).map(({pubkey:i,account:o})=>({publicKey:i,account:this._coder.accounts.decode(this._idlAccount.name,o.data)}))}subscribe(e,t){const n=Wr.get(e.toString());if(n)return n.ee;const s=new nw;e=Jt(e);const i=this._provider.connection.onAccountChange(e,o=>{const u=this._coder.accounts.decode(this._idlAccount.name,o.data);s.emit("change",u)},t);return Wr.set(e.toString(),{ee:s,listener:i}),s}async unsubscribe(e){let t=Wr.get(e.toString());if(!t){console.warn("Address is not subscribed");return}Wr&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{Wr.delete(e.toString())}).catch(console.error)}async createInstruction(e,t){const n=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return Et.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(Jt(e),t)}async getAccountInfoAndContext(e,t){return await this._provider.connection.getAccountInfoAndContext(Jt(e),t)}}const Wr=new Map,ha="Program log: ",xf="Program data: ",Jw=ha.length,Qw=xf.length;class eb{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new Cf(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let s=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(e)||this._eventListeners.set(e,[]),this._eventListeners.set(e,((n=this._eventListeners.get(e))!==null&&n!==void 0?n:[]).concat(s)),this._eventCallbacks.set(s,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(i,o)=>{if(!i.err)for(const u of this._eventParser.parseLogs(i.logs)){const f=this._eventListeners.get(u.name);f&&f.forEach(y=>{const g=this._eventCallbacks.get(y);if(g){const[,S]=g;S(u.data,o.slot,i.signature)}})}})),s}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let s=this._eventListeners.get(n);if(!s)throw new Error(`Event listeners don't exist for ${n}!`);if(this._eventCallbacks.delete(e),s=s.filter(i=>i!==e),this._eventListeners.set(n,s),s.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size===0){if(this._eventListeners.size!==0)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class Cf{constructor(e,t){this.coder=t,this.programId=e}*parseLogs(e,t=!1){const n=new nb(e),s=new tb;let i=n.next();for(;i!==null;){let[o,u,f]=this.handleLog(s,i,t);o&&(yield o),u&&s.push(u),f&&s.pop(),i=n.next()}}handleLog(e,t,n){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t,n):[null,...this.handleSystemLog(t)]}handleProgramLog(e,t){if(e.startsWith(ha)||e.startsWith(xf)){const n=e.startsWith(ha)?e.slice(Jw):e.slice(Qw),s=this.coder.events.decode(n);if(t&&s===null)throw new Error(`Unable to decode event ${n}`);return[s,null,!1]}else return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class tb{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class nb{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}class rb{static build(e,t,n,s,i,o,u){return async(...y)=>{var g;const S=t(...y),[,I]=Bs(e,[...y]);let R;if(s.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{R=await s.simulate(S,I.signers,(g=I.options)===null||g===void 0?void 0:g.commitment)}catch(O){throw Ef(O,n)}if(R===void 0)throw new Error("Unable to simulate transaction");const T=R.logs;if(!T)throw new Error("Simulated logs not found");const x=[];if(u.events){let O=new Cf(o,i);for(const L of O.parseLogs(T))x.push(L)}return{events:x,raw:T}}}}function Ho(r){return new Bf(_i(8),e=>Ga.fromBuffer(e),e=>e.toBuffer(),r)}function Ui(r){return new Bf(_i(32),e=>new ne(e),e=>e.toBuffer(),r)}function Fo(r,e){return new ib(r,e)}class Bf extends ks{constructor(e,t,n,s){super(e.span,s),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class ib extends ks{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=En()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}class Ga extends nt{toBuffer(){const e=super.toArray().reverse(),t=ye.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=ye.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new Ga([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}const sb=vt([Ui("mint"),Ui("owner"),Ho("amount"),Fo(Ui(),"delegate"),(r=>{const e=kf(Kw("discriminator"),null,r);return e.addVariant(0,vt([]),"uninitialized"),e.addVariant(1,vt([]),"initialized"),e.addVariant(2,vt([]),"frozen"),e})("state"),Fo(Ho(),"isNative"),Ho("delegatedAmount"),Fo(Ui(),"closeAuthority")]);function ob(r){return sb.decode(r)}class ab{constructor(e,t,n,s,i,o,u,f){this._args=e,this._accounts=t,this._provider=n,this._programId=s,this._idlIx=i,this._idlTypes=u,this._customResolver=f,this._accountStore=new cb(n,o,s)}args(e){this._args=e}async resolve(){this.resolveEventCpi(this._idlIx.accounts),this.resolveConst(this._idlIx.accounts);let e=0;for(;await this.resolvePdasAndRelations(this._idlIx.accounts)+await this.resolveCustom()>0;)if(e++,e===16)throw new Error("Reached maximum depth for account resolution")}resolveOptionals(e){Object.assign(this._accounts,this.resolveOptionalsHelper(e,this._idlIx.accounts))}get(e){const t=e.reduce((n,s)=>n&&n[s],this._accounts);if(t&&t.toBase58)return t}set(e,t){let n=this._accounts;e.forEach((s,i)=>{var o;i===e.length-1&&(n[s]=t),n[s]=(o=n[s])!==null&&o!==void 0?o:{},n=n[s]})}resolveOptionalsHelper(e,t){const n={};for(const s of t){const i=s.name,o=e[i];o!==void 0&&(Lf(o)?gr(s)?n[i]=this.resolveOptionalsHelper(o,s.accounts):n[i]=Mf(o):o!==null?n[i]=Jt(o):s.optional&&(n[i]=this._programId))}return n}async resolveCustom(){if(this._customResolver){const{accounts:e,resolved:t}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=e,t}return 0}resolveEventCpi(e,t=[]){for(const n in e){const s=e[n];gr(s)&&this.resolveEventCpi(s.accounts,[...t,s.name]);const i=+n+1;if(i===e.length)return;const o=e[n].name,u=e[i].name;if(o==="eventAuthority"&&u==="program"){const f=[...t,o],y=[...t,u];this.get(f)||this.set(f,ne.findProgramAddressSync([ye.from("__event_authority")],this._programId)[0]),this.get(y)||this.set(y,this._programId);return}}}resolveConst(e,t=[]){for(const n of e){const s=n.name;if(gr(n))this.resolveConst(n.accounts,[...t,s]);else{const i=n;if((i.signer||i.address)&&!this.get([...t,s])){if(i.signer){if(!this._provider.wallet)throw new Error("This function requires the `Provider` interface implementor to have a `wallet` field.");this.set([...t,s],this._provider.wallet.publicKey)}i.address&&this.set([...t,s],Jt(i.address))}}}}async resolvePdasAndRelations(e,t=[]){let n=0;for(const s of e){const i=s.name;if(gr(s))n+=await this.resolvePdasAndRelations(s.accounts,[...t,i]);else{const o=s;if((o.pda||o.relations)&&!this.get([...t,i])){n++;try{if(o.pda){const u=await Promise.all(o.pda.seeds.map(g=>this.toBuffer(g,t)));if(u.some(g=>!g))continue;const f=await this.parseProgramId(o,t),[y]=ne.findProgramAddressSync(u,f);this.set([...t,i],y)}}catch{}try{if(o.relations){const u=this.get([...t,o.relations[0]]);if(u){const f=await this._accountStore.fetchAccount({publicKey:u});this.set([...t,i],f[i])}}}catch{}}}}return n}async parseProgramId(e,t=[]){var n;if(!(!((n=e.pda)===null||n===void 0)&&n.program))return this._programId;const s=await this.toBuffer(e.pda.program,t);if(!s)throw new Error(`Program seed not resolved: ${e.name}`);return new ne(s)}async toBuffer(e,t=[]){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e,t);default:throw new Error(`Unexpected seed: ${e}`)}}toBufferConst(e){return this.toBufferValue("bytes",e.value)}async toBufferArg(e){const[t,...n]=e.path.split("."),s=this._idlIx.args.findIndex(u=>u.name===t);if(s===-1)throw new Error(`Unable to find argument for seed: ${t}`);const i=n.reduce((u,f)=>(u??{})[f],this._args[s]);if(i===void 0)return;const o=this.getType(this._idlIx.args[s].type,n);return this.toBufferValue(o,i)}async toBufferAccount(e,t=[]){const[n,...s]=e.path.split("."),i=this.get([...t,n]);if(!i)return;if(!s.length)return this.toBufferValue("pubkey",i);if(!e.account)throw new Error(`Seed account is required in order to resolve type: ${e.path}`);let u=await this._accountStore.fetchAccount({publicKey:i,name:e.account}),f=s;for(;f.length>0;)u=u[f[0]],f=f.slice(1);if(u===void 0)return;const y=this.getType({defined:{name:e.account}},s);return this.toBufferValue(y,u)}toBufferValue(e,t){switch(e){case"u8":case"i8":return ye.from([t]);case"u16":case"i16":return new nt(t).toArrayLike(ye,"le",2);case"u32":case"i32":return new nt(t).toArrayLike(ye,"le",4);case"u64":case"i64":return new nt(t).toArrayLike(ye,"le",8);case"u128":case"i128":return new nt(t).toArrayLike(ye,"le",16);case"u256":case"i256":return new nt(t).toArrayLike(ye,"le",32);case"string":return ye.from(t);case"pubkey":return t.toBuffer();case"bytes":return ye.from(t);default:if(e!=null&&e.array)return ye.from(t);throw new Error(`Unexpected seed type: ${e}`)}}getType(e,t=[]){var n;const s=(n=e==null?void 0:e.defined)===null||n===void 0?void 0:n.name;if(s){if(s==="tokenAccount")switch(t.at(0)){case"mint":case"owner":return"pubkey";case"amount":case"delagatedAmount":return"u64";default:throw new Error(`Unknown token account path: ${t}`)}const i=this._idlTypes.find(g=>g.name===s);if(!i)throw new Error(`Type not found: ${s}`);const[o,...u]=t,y=i.type.fields.find(g=>g.name===o);if(!y)throw new Error(`Field not found: ${o}`);return this.getType(y.type,u)}return e}}class cb{constructor(e,t,n){this._provider=e,this._cache=new Map,this._idls={},this._idls[n.toBase58()]=t}async fetchAccount({publicKey:e,name:t}){const n=e.toBase58();if(!this._cache.has(n)){const s=await this._provider.connection.getAccountInfo(e);if(s===null)throw new Error(`Account not found: ${n}`);if(t==="tokenAccount"){const i=ob(s.data);this._cache.set(n,i)}else{const i=await this.getAccountsNs(s.owner);if(i){const o=Object.values(i)[0];if(o){const u=o.coder.accounts.decodeAny(s.data);this._cache.set(n,u)}}}}return this._cache.get(n)}async getAccountsNs(e){const t=e.toBase58();if(!this._idls[t]){const n=await xr.fetchIdl(e,this._provider);if(n){const s=new xr(n,this._provider);this._idls[t]=s.account}}return this._idls[t]}}class ub{static build(e,t,n,s,i,o,u,f,y,g,S){return(...I)=>new lb(I,s,i,o,u,f,e,t,n,y,g,S)}}function Lf(r){return typeof r=="object"&&r!==null&&!("_bn"in r)}function Mf(r,e){const t={};for(const n in r){const s=r[n];if(s===null)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");t[n]=Lf(s)?Mf(s):Jt(s)}return t}class lb{constructor(e,t,n,s,i,o,u,f,y,g,S,I){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=s,this._simulateFn=i,this._viewFn=o,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._resolveAccounts=!0,this._accountsResolver=new ab(e,this._accounts,u,f,y,g,S,I)}args(e){this._args=e,this._accountsResolver.args(e)}accounts(e){return this.accountsPartial(e)}accountsPartial(e){return this._resolveAccounts=!0,this._accountsResolver.resolveOptionals(e),this}accountsStrict(e){return this._resolveAccounts=!1,this._accountsResolver.resolveOptionals(e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e,t=!1){return t?this._preInstructions=e.concat(this._preInstructions):this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async pubkeys(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._accounts}async rpc(e){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async rpcAndKeys(e){return{pubkeys:await this.pubkeys(),signature:await this.rpc(e)}}async view(e){if(this._resolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:this._signers}}async transaction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class db{static build(e,t,n,s){const i=t.accounts.find(f=>f.writable),o=!!t.returns;return i||!o?void 0:async(...f)=>{let y=await n(...f);const g=`Program return: ${e} `;let S=y.raw.find(x=>x.startsWith(g));if(!S)throw new Error("View expected return log");let I=Gd(S.slice(g.length)),R=t.returns;if(!R)throw new Error("View expected return type");return Ne.fieldLayout({type:R},s.types).decode(I)}}}class hb{static build(e,t,n,s,i){const o={},u={},f={},y={},g={},S={},I=lw(e),R=e.accounts?Zw.build(e,t,n,s):{};return e.instructions.forEach(T=>{const x=ss.build(T,(te,X)=>t.instruction.encode(te,X),n),O=jw.build(T,x),L=Yw.build(T,O,I,s),F=rb.build(T,O,I,s,t,n,e),M=db.build(n,T,F,e),q=ub.build(s,n,T,x,O,L,F,M,R,e.types||[],i==null?void 0:i(T)),G=T.name;u[G]=x,f[G]=O,o[G]=L,y[G]=F,g[G]=q,M&&(S[G]=M)}),[o,u,f,R,y,g,S]}}class xr{get programId(){return this._programId}get idl(){return this._idl}get rawIdl(){return this._rawIdl}get coder(){return this._coder}get provider(){return this._provider}constructor(e,t=ua(),n,s){const i=uw(e);this._idl=i,this._rawIdl=e,this._provider=t,this._programId=Jt(e.address),this._coder=n??new Af(i),this._events=new eb(this._programId,t,this._coder);const[o,u,f,y,g,S,I]=hb.build(i,this._coder,this._programId,t,s);this.rpc=o,this.instruction=u,this.transaction=f,this.account=y,this.simulate=g,this.methods=S,this.views=I}static async at(e,t){const n=Jt(e),s=await xr.fetchIdl(n,t);if(!s)throw new Error(`IDL not found for program: ${e.toString()}`);return new xr(s,t)}static async fetchIdl(e,t){t=t??ua();const n=Jt(e),s=await sw(n),i=await t.connection.getAccountInfo(s);if(!i)return null;let o=cw(i.data.slice(8));const u=Q_(o.data);return JSON.parse(iw(u))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}new ne("11111111111111111111111111111111");var Di={},pn={},el;function fb(){if(el)return pn;el=1;var r={},e;Object.defineProperty(pn,"__esModule",{value:!0}),pn.isVersionedTransaction=pn.chunks=pn.isBrowser=void 0,pn.isBrowser=r.ANCHOR_BROWSER||typeof window<"u"&&!(!((e=window.process)===null||e===void 0)&&e.hasOwnProperty("type"));function t(s,i){return Array.apply(0,new Array(Math.ceil(s.length/i))).map((o,u)=>s.slice(u*i,(u+1)*i))}pn.chunks=t;const n=s=>"version"in s;return pn.isVersionedTransaction=n,pn}var zo={exports:{}},tl;function pb(){if(tl)return zo.exports;tl=1;var r=zo.exports={},e,t;function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?t=clearTimeout:t=s}catch{t=s}})();function i(x){if(e===setTimeout)return setTimeout(x,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(x,0);try{return e(x,0)}catch{try{return e.call(null,x,0)}catch{return e.call(this,x,0)}}}function o(x){if(t===clearTimeout)return clearTimeout(x);if((t===s||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(x);try{return t(x)}catch{try{return t.call(null,x)}catch{return t.call(this,x)}}}var u=[],f=!1,y,g=-1;function S(){!f||!y||(f=!1,y.length?u=y.concat(u):g=-1,u.length&&I())}function I(){if(!f){var x=i(S);f=!0;for(var O=u.length;O;){for(y=u,u=[];++g<O;)y&&y[g].run();g=-1,O=u.length}y=null,f=!1,o(x)}}r.nextTick=function(x){var O=new Array(arguments.length-1);if(arguments.length>1)for(var L=1;L<arguments.length;L++)O[L-1]=arguments[L];u.push(new R(x,O)),u.length===1&&!f&&i(I)};function R(x,O){this.fun=x,this.array=O}R.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function T(){}return r.on=T,r.addListener=T,r.once=T,r.off=T,r.removeListener=T,r.removeAllListeners=T,r.emit=T,r.prependListener=T,r.prependOnceListener=T,r.listeners=function(x){return[]},r.binding=function(x){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(x){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},zo.exports}var nl;function yb(){if(nl)return Di;nl=1,Object.defineProperty(Di,"__esModule",{value:!0});const r=ls(),e=Td,t=fb();class n{constructor(i){this.payer=i}static local(){const i=pb();if(!i.env.ANCHOR_WALLET||i.env.ANCHOR_WALLET==="")throw new Error("expected environment variable `ANCHOR_WALLET` is not set.");const o=e.Keypair.fromSecretKey(r.Buffer.from(JSON.parse(al.readFileSync(i.env.ANCHOR_WALLET,{encoding:"utf-8"}))));return new n(o)}async signTransaction(i){return(0,t.isVersionedTransaction)(i)?i.sign([this.payer]):i.partialSign(this.payer),i}async signAllTransactions(i){return i.map(o=>((0,t.isVersionedTransaction)(o)?o.sign([this.payer]):o.partialSign(this.payer),o))}get publicKey(){return this.payer.publicKey}}return Di.default=n,Di}yb();const gb="vtYo2ayiQJ53h2ePxK4kHNCbi8uspXhp1GyYu78mmbr",mb={name:"ico_launchpad",version:"0.1.0",spec:"0.1.0",description:"Created with Anchor"},_b=JSON.parse('[{"name":"buy_token","docs":["Purchase ico token by paying cost token"],"discriminator":[138,127,14,91,38,87,115,105],"accounts":[{"name":"buyer","writable":true,"signer":true},{"name":"global_pool","pda":{"seeds":[{"kind":"const","value":[103,108,111,98,97,108,45,97,117,116,104,111,114,105,116,121]}]}},{"name":"ico_pot","writable":true,"pda":{"seeds":[{"kind":"const","value":[105,99,111,45,112,111,116]},{"kind":"arg","path":"seed"}]}},{"name":"ico_mint","relations":["ico_pot"]},{"name":"cost_mint","relations":["ico_pot"]},{"name":"user_purchase","writable":true,"pda":{"seeds":[{"kind":"const","value":[117,115,101,114,45,112,117,114,99,104,97,115,101]},{"kind":"account","path":"ico_pot"},{"kind":"account","path":"ico_pot.purchase_seq_num","account":"IcoState"}]}},{"name":"buyer_ico_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"buyer"},{"kind":"account","path":"ico_token_program"},{"kind":"account","path":"ico_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"ico_token_vault","writable":true,"pda":{"seeds":[{"kind":"account","path":"ico_pot"},{"kind":"account","path":"ico_token_program"},{"kind":"account","path":"ico_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"buyer_cost_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"buyer"},{"kind":"account","path":"cost_token_program"},{"kind":"account","path":"cost_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"cost_escrow_vault","writable":true,"pda":{"seeds":[{"kind":"account","path":"ico_pot"},{"kind":"account","path":"cost_token_program"},{"kind":"account","path":"cost_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"ico_token_program"},{"name":"cost_token_program"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"rent","address":"SysvarRent111111111111111111111111111111111"}],"args":[{"name":"seed","type":"u64"},{"name":"amount","type":"u64"}]},{"name":"change_config","docs":["Admin can change global config"],"discriminator":[24,158,114,115,94,210,244,233],"accounts":[{"name":"admin","writable":true,"signer":true,"relations":["global_pool"]},{"name":"global_pool","writable":true,"pda":{"seeds":[{"kind":"const","value":[103,108,111,98,97,108,45,97,117,116,104,111,114,105,116,121]}]}}],"args":[{"name":"paused","type":"u8"}]},{"name":"claim","docs":["Claim unlocked token as buyer"],"discriminator":[62,198,214,193,213,159,108,210],"accounts":[{"name":"buyer","writable":true,"signer":true},{"name":"global_pool","pda":{"seeds":[{"kind":"const","value":[103,108,111,98,97,108,45,97,117,116,104,111,114,105,116,121]}]}},{"name":"ico_pot","pda":{"seeds":[{"kind":"const","value":[105,99,111,45,112,111,116]},{"kind":"arg","path":"ico_seed"}]}},{"name":"ico_mint","relations":["ico_pot"]},{"name":"user_purchase","writable":true,"pda":{"seeds":[{"kind":"const","value":[117,115,101,114,45,112,117,114,99,104,97,115,101]},{"kind":"account","path":"ico_pot"},{"kind":"arg","path":"purchase_seed"}]}},{"name":"buyer_ico_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"buyer"},{"kind":"account","path":"token_program"},{"kind":"account","path":"ico_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"ico_token_vault","writable":true,"pda":{"seeds":[{"kind":"account","path":"ico_pot"},{"kind":"account","path":"token_program"},{"kind":"account","path":"ico_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"token_program"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"rent","address":"SysvarRent111111111111111111111111111111111"}],"args":[{"name":"ico_seed","type":"u64"},{"name":"purchase_seed","type":"u64"}]},{"name":"close_ico","docs":["Close ICO pot with owner authority"],"discriminator":[236,192,28,5,41,203,104,223],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"global_pool","writable":true,"pda":{"seeds":[{"kind":"const","value":[103,108,111,98,97,108,45,97,117,116,104,111,114,105,116,121]}]}},{"name":"ico_pot","writable":true,"pda":{"seeds":[{"kind":"const","value":[105,99,111,45,112,111,116]},{"kind":"arg","path":"seed"}]}},{"name":"ico_mint","relations":["ico_pot"]},{"name":"authority_ico_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"authority"},{"kind":"account","path":"token_program"},{"kind":"account","path":"ico_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"ico_token_vault","writable":true,"pda":{"seeds":[{"kind":"account","path":"ico_pot"},{"kind":"account","path":"token_program"},{"kind":"account","path":"ico_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"token_program"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"rent","address":"SysvarRent111111111111111111111111111111111"}],"args":[{"name":"seed","type":"u64"}]},{"name":"create_ico","docs":["Create ICO pot"],"discriminator":[12,83,125,16,133,67,173,93],"accounts":[{"name":"creator","writable":true,"signer":true},{"name":"global_pool","writable":true,"pda":{"seeds":[{"kind":"const","value":[103,108,111,98,97,108,45,97,117,116,104,111,114,105,116,121]}]}},{"name":"ico_pot","writable":true,"pda":{"seeds":[{"kind":"const","value":[105,99,111,45,112,111,116]},{"kind":"account","path":"global_pool.ico_seq_num","account":"GlobalPool"}]}},{"name":"ico_mint"},{"name":"cost_mint"},{"name":"creator_ico_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"creator"},{"kind":"account","path":"ico_token_program"},{"kind":"account","path":"ico_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"ico_token_vault","writable":true,"pda":{"seeds":[{"kind":"account","path":"ico_pot"},{"kind":"account","path":"ico_token_program"},{"kind":"account","path":"ico_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"cost_escrow_vault","writable":true,"pda":{"seeds":[{"kind":"account","path":"ico_pot"},{"kind":"account","path":"cost_token_program"},{"kind":"account","path":"cost_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"ico_token_program"},{"name":"cost_token_program"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"rent","address":"SysvarRent111111111111111111111111111111111"}],"args":[{"name":"params","type":{"defined":{"name":"CreateIcoParams"}}}]},{"name":"initialize","docs":["* Initialize global pool"],"discriminator":[175,175,109,31,13,152,155,237],"accounts":[{"name":"admin","writable":true,"signer":true},{"name":"global_pool","writable":true,"pda":{"seeds":[{"kind":"const","value":[103,108,111,98,97,108,45,97,117,116,104,111,114,105,116,121]}]}},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"rent","address":"SysvarRent111111111111111111111111111111111"}],"args":[]},{"name":"rescue_token","docs":["Force withdraw all tokens from Ico pot as admin"],"discriminator":[227,248,168,149,165,80,20,89],"accounts":[{"name":"admin","writable":true,"signer":true},{"name":"global_pool","writable":true,"pda":{"seeds":[{"kind":"const","value":[103,108,111,98,97,108,45,97,117,116,104,111,114,105,116,121]}]}},{"name":"ico_pot","writable":true,"pda":{"seeds":[{"kind":"const","value":[105,99,111,45,112,111,116]},{"kind":"arg","path":"seed"}]}},{"name":"ico_mint","relations":["ico_pot"]},{"name":"admin_ico_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"admin"},{"kind":"account","path":"token_program"},{"kind":"account","path":"ico_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"ico_token_vault","writable":true,"pda":{"seeds":[{"kind":"account","path":"ico_pot"},{"kind":"account","path":"token_program"},{"kind":"account","path":"ico_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"token_program"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"rent","address":"SysvarRent111111111111111111111111111111111"}],"args":[{"name":"seed","type":"u64"}]},{"name":"transfer_admin","docs":["Admin can transfer admin authority"],"discriminator":[42,242,66,106,228,10,111,156],"accounts":[{"name":"admin","writable":true,"signer":true,"relations":["global_pool"]},{"name":"global_pool","writable":true,"pda":{"seeds":[{"kind":"const","value":[103,108,111,98,97,108,45,97,117,116,104,111,114,105,116,121]}]}}],"args":[{"name":"new_admin","type":"pubkey"}]},{"name":"withdraw_cost","docs":["Withdraw cost token collection as owner"],"discriminator":[24,29,195,242,103,79,189,71],"accounts":[{"name":"authority","writable":true,"signer":true},{"name":"ico_pot","pda":{"seeds":[{"kind":"const","value":[105,99,111,45,112,111,116]},{"kind":"arg","path":"seed"}]}},{"name":"cost_mint","relations":["ico_pot"]},{"name":"authority_ico_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"authority"},{"kind":"account","path":"token_program"},{"kind":"account","path":"cost_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"cost_escrow_vault","writable":true,"pda":{"seeds":[{"kind":"account","path":"ico_pot"},{"kind":"account","path":"token_program"},{"kind":"account","path":"cost_mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"token_program"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"rent","address":"SysvarRent111111111111111111111111111111111"}],"args":[{"name":"seed","type":"u64"}]}]'),wb=[{name:"GlobalPool",discriminator:[162,244,124,37,148,94,28,50]},{name:"IcoState",discriminator:[219,70,204,53,128,154,51,108]},{name:"UserPurchase",discriminator:[23,17,96,83,125,230,223,233]}],bb=[{code:6e3,name:"InvalidAdmin",msg:"Admin address dismatch"},{code:6001,name:"IsPaused",msg:"Admin paused whole launchpad"},{code:6002,name:"InvalidDateConfig",msg:"ICO date configs should be future time"},{code:6003,name:"InsufficientTokenBalance",msg:"Token account balance insufficient"},{code:6004,name:"InvalidPercentageValue",msg:"Percentage value should less than 10000 = 100%"},{code:6005,name:"InvalidIcoOwner",msg:"ICO owner does not match with passed address"},{code:6006,name:"NoAvailableTokens",msg:"All ICO tokens sold out"},{code:6007,name:"PotIsClosed",msg:"ICO is closed by owner or admin"},{code:6008,name:"AlreadyClosed",msg:"ICO is closed already"},{code:6009,name:"IncorrectIcoAddress",msg:"User purchase ICO pot address not matched with passed account"},{code:6010,name:"InvalidSalePeriod",msg:"ICO not started or already ended"},{code:6011,name:"InvalidAmountConfig",msg:"ICO amount and reserve should not zero"}],Rb=[{name:"CreateIcoParams",type:{kind:"struct",fields:[{name:"amount",type:"u64"},{name:"start_price",type:"u64"},{name:"end_price",type:"u64"},{name:"start_date",type:"i64"},{name:"end_date",type:"i64"},{name:"bonus_reserve",type:"u64"},{name:"bonus_percentage",type:"u16"},{name:"bonus_activator",type:"u16"},{name:"unlock_percentage",type:"u16"},{name:"cliff_period",type:"i64"},{name:"vesting_percentage",type:"u16"},{name:"vesting_interval",type:"i64"}]}},{name:"GlobalPool",type:{kind:"struct",fields:[{name:"admin",type:"pubkey"},{name:"total_ico_count",type:"u64"},{name:"ico_seq_num",type:"u64"},{name:"is_paused",type:"u8"},{name:"extra",type:"u128"}]}},{name:"IcoState",type:{kind:"struct",fields:[{name:"seed",type:"u64"},{name:"owner",type:"pubkey"},{name:"ico_mint",type:"pubkey"},{name:"ico_decimals",type:"u64"},{name:"amount",type:"u64"},{name:"cost_mint",type:"pubkey"},{name:"start_price",type:"u64"},{name:"end_price",type:"u64"},{name:"start_date",type:"i64"},{name:"end_date",type:"i64"},{name:"bonus_reserve",type:"u64"},{name:"bonus_percentage",type:"u16"},{name:"bonus_activator",type:"u16"},{name:"is_closed",type:"u8"},{name:"total_sold",type:"u64"},{name:"total_received",type:"u64"},{name:"unlock_percentage",type:"u16"},{name:"cliff_period",type:"i64"},{name:"vesting_percentage",type:"u16"},{name:"vesting_interval",type:"i64"},{name:"purchase_seq_num",type:"u64"},{name:"extra",type:"u128"}]}},{name:"UserPurchase",type:{kind:"struct",fields:[{name:"seed",type:"u64"},{name:"buyer",type:"pubkey"},{name:"ico",type:"pubkey"},{name:"buy_amount",type:"u64"},{name:"buy_date",type:"i64"},{name:"bonus",type:"u64"},{name:"locked_amount",type:"u64"},{name:"total_claimed",type:"u64"},{name:"extra",type:"u128"}]}}],Eb={address:gb,metadata:mb,instructions:_b,accounts:wb,errors:bb,types:Rb},Ab=128+8*5+4+4+8+8+4+8+4+8+8+16,vb=80+8*5+16,Cr=new ne("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),fa=new ne("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");new ne("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new ne("So11111111111111111111111111111111111111112");new ne("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const Ib=async(r,e,t,n,s=Cr,i=Cr)=>{const{data:o}=await wi(e,n);console.log("ico seed",o.seed);const u=new xe,f=await n.methods.buyToken(new nt(o.seed),new nt(t)).accounts({buyer:r,icoPot:e,icoTokenProgram:s,costTokenProgram:i}).transaction();return u.add(f),u},Ob=async(r,e,t,n,s=Cr)=>{const i=await wi(e,n);console.log("ico seed",i.data.seed);const o=await Pf(t,n);console.log("user purchase seed",o.data.seed);const u=new xe,f=await n.methods.claim(new nt(i.data.seed),new nt(o.data.seed)).accounts({buyer:r,icoPot:e,userPurchase:t,tokenProgram:s}).transaction();return u.add(f),u},wi=async(r,e)=>{try{let t=await e.account.icoState.fetch(r);return{key:r,data:t}}catch(t){throw console.error(t),t}},Sb=async({owner:r,icoMint:e,costMint:t},n)=>{let s=[{dataSize:Ab}];return r&&s.push({memcmp:{offset:16,bytes:r.toBase58()}}),e&&s.push({memcmp:{offset:48,bytes:e.toBase58()}}),t&&s.push({memcmp:{offset:96,bytes:t.toBase58()}}),(await n.provider.connection.getProgramAccounts(n.programId,{filters:s,encoding:"base64"})).map(o=>{let u=n.coder.accounts.decode("icoState",o.account.data);return u.seed=u.seed.toNumber(),u.owner=u.owner.toBase58(),u.icoMint=u.icoMint.toBase58(),u.icoDecimals=u.icoDecimals.toNumber(),u.amount=u.amount.toNumber(),u.costMint=u.costMint.toBase58(),u.startPrice=u.startPrice.toNumber(),u.endPrice=u.endPrice,u.startDate=u.startDate,u.endDate=u.endDate.toNumber(),u.bonusReserve=u.bonusReserve.toNumber(),u.bonusPercentage=u.bonusPercentage,u.bonusActivator=u.bonusActivator,u.isClosed=u.isClosed,u.totalSold=u.totalSold.toNumber(),u.totalReceived=u.totalReceived.toNumber(),u.unlockPercentage=u.unlockPercentage,u.cliffPeriod=u.cliffPeriod.toNumber(),u.vestingPercentage=u.vestingPercentage,u.vestingInterval=u.vestingInterval.toNumber(),u.purchaseSeqNum=u.purchaseSeqNum.toNumber(),{key:o.pubkey.toBase58(),data:u}})},Pf=async(r,e)=>{try{let t=await e.account.userPurchase.fetch(r);return{key:r,data:t}}catch(t){return console.error(t),{key:r,data:null}}},Tb=async({buyer:r,ico:e},t)=>{let n=[{dataSize:vb}];return r&&n.push({memcmp:{offset:16,bytes:r.toBase58()}}),e&&n.push({memcmp:{offset:48,bytes:e.toBase58()}}),(await t.provider.connection.getProgramAccounts(t.programId,{filters:n,encoding:"base64"})).map(i=>{let o=t.coder.accounts.decode("userPurchase",i.account.data);return o.seed=o.seed.toNumber(),o.buyer=o.buyer.toBase58(),o.ico=o.ico.toBase58(),o.buyAmount=o.buyAmount.toNumber(),o.buyDate=o.buyDate.toNumber(),o.bonus=o.bonus.toNumber(),o.lockedAmount=o.lockedAmount.toNumber(),o.totalClaimed=o.totalClaimed.toNumber(),{key:i.pubkey.toBase58(),data:o}})},Nb=(r,e)=>{if(r.lockedAmount.toNumber()==0)return new nt(0);let t=r.buyDate.toNumber()+e.cliffPeriod.toNumber(),n=Math.floor(Date.now()/1e3);if(t>n)return new nt(0);let s=Math.floor((n-t)/e.vestingInterval.toNumber())+1,i=r.lockedAmount.mul(new nt(s)).mul(new nt(e.vestingPercentage)).div(new nt(1e4));return i.gt(r.lockedAmount)&&(i=r.lockedAmount),i.sub(r.totalClaimed)},kb=(r,e)=>{let t=r.amount.sub(r.totalSold);if(e.lt(t)&&(t=e),r.endPrice.eq(new nt(0))){let n=t.mul(r.startPrice).div(r.icoDecimals);return{availableAmount:t,value:n}}else{let n=r.endPrice.sub(r.startPrice).mul(r.totalSold).div(r.amount).add(r.startPrice),s=r.endPrice.sub(r.startPrice).mul(r.totalSold.add(t)).div(r.amount).add(r.startPrice),i=t.mul(n.add(s)).div(r.icoDecimals.mul(new nt(2)));return{availableAmount:t,value:i}}};let $o=null,ln=null,Wn=null,os=null;const xb=async(r,e,t)=>{$o=new Ed(t),Wn=new kr($o,e,{skipPreflight:!1,commitment:"confirmed"}),Zu(Wn),os=e,Wn=new kr($o,e,{skipPreflight:!1,commitment:"confirmed"}),Zu(Wn),os=e,console.log("Wallet Address: ",e.publicKey.toBase58()),ln=new xr(Eb,Wn),console.log("ProgramId: ",ln.programId.toBase58())},Cb=async(r,e,t=!1,n=!1)=>{const s=await Ib(os.publicKey,r,e,ln,t?fa:Cr,n?fa:Cr),i=await Wn.sendAndConfirm(s,[],{commitment:"confirmed"});console.log("txHash: ",i)},Bb=async(r,e,t=!1)=>{const n=await Ob(os.publicKey,r,e,ln,t?fa:Cr),s=await Wn.sendAndConfirm(n,[],{commitment:"confirmed"});console.log("txHash: ",s)},Lb=async r=>{const{data:e,key:t}=await wi(r,ln);return console.log("ico pot: ",t.toBase58()),{seed:e.seed.toNumber(),owner:e.owner.toBase58(),icoMint:e.icoMint.toBase58(),icoDecimals:e.icoDecimals.toNumber(),amount:e.amount.toNumber(),costMint:e.costMint.toBase58(),startPrice:e.startPrice,endPrice:e.endPrice,startDate:e.startDate.toNumber(),endDate:e.endDate.toNumber(),bonusReserve:e.bonusReserve.toNumber(),bonusPercentage:e.bonusPercentage,bonusActivator:e.bonusActivator,isClosed:e.isClosed,totalSold:e.totalSold.toNumber(),totalReceived:e.totalReceived.toNumber(),unlockPercentage:e.unlockPercentage,cliffPeriod:e.cliffPeriod.toNumber(),vestingPercentage:e.vestingPercentage,vestingInterval:e.vestingInterval.toNumber(),purchaseSeqNum:e.purchaseSeqNum.toNumber()}},Mb=async(r,e)=>{const{data:t,key:n}=await wi(r,ln);console.log("ico pot: ",n.toBase58());const{availableAmount:s,value:i}=kb(t,new nt(e));return{availableAmount:s.toNumber(),value:i.toNumber()}},Pb=async({owner:r,icoMint:e,costMint:t})=>await Sb({owner:r,icoMint:e,costMint:t},ln),Ub=async r=>{const{data:e,key:t}=await Pf(r,ln);console.log("user purchase: ",t.toBase58());const n=(await wi(e.ico,ln)).data;return console.log("ico pot: ",e.ico.toBase58()),{seed:e.seed.toNumber(),buyer:e.buyer.toBase58(),ico:e.ico.toBase58(),buyAmount:e.buyAmount.toNumber(),buyDate:e.buyDate.toNumber(),bonus:e.bonus.toNumber(),lockedAmount:e.lockedAmount.toNumber(),totalClaimed:e.totalClaimed.toNumber(),unlockedAmount:Nb(e,n).toNumber()}},Db=async({buyer:r,ico:e})=>await Tb({buyer:r,ico:e},ln);class mR{static async setConnection(){const e=Xf();if(!e.value)throw new Error("not defined: publicKey");await xb("mainnet-beta",e.value,"https://tame-morning-emerald.solana-mainnet.quiknode.pro/63082ea77ad25bd41c5ccdf30742d4af1540e81e/")}static async getAllIco(e){try{return await this.setConnection(),await Pb({owner:e==null?void 0:e.owner,icoMint:e==null?void 0:e.icoMint,costMint:e==null?void 0:e.costMint})}catch(t){throw zn.error("ico failed",t),t}}static async buyToken({icoPot:e,amountWithDecimals:t,isIco2022:n,isCost2022:s}){const{publicKey:i}=zr();if(!i.value)throw new Error("not defined: publicKey");await this.setConnection();try{return await Cb(e,String(t),n??!1,s??!1)}catch(o){throw zn.error("ico failed",o),o}}static async claimTokens({icoPot:e,userPurchase:t,isIco2022:n}){const{publicKey:s}=zr();if(!s.value)throw new Error("not defined: publicKey");try{return await this.setConnection(),await Bb(e,t,n??!1)}catch(i){throw zn.error("ico failed",i),i}}static async getIcoInfo({icoPot:e}){try{return await this.setConnection(),await Lb(e)}catch(t){throw zn.error("ico failed",t),t}}static async getAllPurchases({buyer:e,ico:t}){const{publicKey:n}=zr();if(!n.value)throw new Error("not defined: publicKey");try{return await this.setConnection(),await Db({buyer:e,ico:t})}catch(s){throw zn.error("ico failed",s),s}}static async getUserPurchaseInfo({userPurchase:e}){const{publicKey:t}=zr();if(!t.value)throw new Error("not defined: publicKey");try{return await this.setConnection(),await Ub(e)}catch(n){throw zn.error("ico failed",n),n}}static async getPurchaseAmount({icoPot:e,amount:t}){const{publicKey:n}=zr();if(!n.value)throw new Error("not defined: publicKey");try{return await this.setConnection(),await Mb(e,String(t))}catch(s){throw zn.error("ico failed",s),s}}}const rl=new Map([["So11111111111111111111111111111111111111112","wSOL"],["EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","USDC"]]),_R=r=>rl.has(r)?rl.get(r):r.slice(0,8)+"..."+r.slice(-4),wR=[{key:"7EJazPSeYuJg3z7gvfY8zhKDcBY6RYkgk1KmGJ4uPf15",name:"Launchpad 1",projectLogo:"https://cryptologos.cc/logos/dogecoin-doge-logo.png",links:{web:{name:"Website",url:"https://google.com"},x:{name:"X",url:"https://x.com/FushumaChain/"},telegram:{name:"Instagram",url:"https://instagram.com/https://t.me/FushumaChain"}},description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},{key:"7EZEpz2aWVYh3X4tgGiBnM7xxY2gmHzbTpiyJeuyYvE6",name:"Defined in JSON",projectLogo:"https://cryptologos.cc/logos/solana-sol-logo.png",links:{web:{name:"Website",url:"https://google.com"},x:{name:"X",url:"https://x.com/FushumaChain/"},telegram:{name:"Instagram",url:"https://instagram.com/https://t.me/FushumaChain"}},description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."},{key:"3Ji7fXgUGrQxzRkAUT1VaC2gkKVT56WWHRZcTzaMbq7F",name:"Launchpad 2",projectLogo:"https://cryptologos.cc/logos/ethereum-eth-logo.png",links:{web:{name:"Website",url:"https://google.com"},x:{name:"X",url:"https://x.com/FushumaChain/"},telegram:{name:"Instagram",url:"https://instagram.com/https://t.me/FushumaChain"}},description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}];export{ip as I,mR as S,$b as _,Vb as a,qb as b,_R as c,Kb as d,Gb as f,Wb as g,wR as l};
